import{_ as $}from"./Card-BjL1m_sW.js";import{_ as M}from"./Badge-DfumusWV.js";import{_ as j,a as F}from"./Button-CI_-soaG.js";import{A as X}from"./admin-BzR6vrex.js";import{u as P,a as Y,g as Z,_ as tt,b as et}from"./CancelModal.vue_vue_type_script_setup_true_lang-Boxm_nDO.js";import{d as v,e as p,w as c,b as t,I as at,a as u,o as s,F as U,r as T,j as r,t as o,u as x,n as S,f as y,k,c as w,h as B}from"./app-CyjtdGoI.js";import"./ColorModeButton-Bf7Nr8w3.js";import"./Tooltip-BrTR-Vq7.js";import"./Modal-Bgd8PL5Y.js";import"./FormField-qFQ_28ZO.js";import"./Label-yeknIWsP.js";import"./SelectMenu-DKAhKU-v.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./index-v4g8wp86.js";import"./Textarea-CZyY9J1c.js";import"./Alert-CrKiQ9oh.js";const st={class:"divide-y divide-gray-200 dark:divide-gray-800"},rt=["src","alt"],ot={class:"flex-1 min-w-0"},nt={class:"font-medium text-gray-900 dark:text-white"},it={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},lt={class:"text-sm text-gray-500 dark:text-gray-400"},dt={class:"mt-2 flex items-center justify-between"},ct={class:"text-sm text-gray-600 dark:text-gray-400"},ut={class:"font-semibold text-gray-900 dark:text-white"},mt=v({__name:"OrderItemsList",props:{items:{}},setup(e){const{formatCurrency:n}=P(),g=i=>{i.target.src="https://placehold.co/80x80/1a1a2e/ffffff?text=No+Image"};return(i,l)=>{const f=$;return s(),p(f,null,{header:c(()=>[...l[0]||(l[0]=[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Produk Pesanan ",-1)])]),default:c(()=>[t("div",st,[(s(!0),u(U,null,T(e.items,a=>(s(),u("div",{key:a.id,class:"flex gap-4 py-4 first:pt-0 last:pb-0"},[t("img",{src:a.image,alt:a.productName,class:"w-20 h-20 rounded-lg object-cover bg-gray-100 dark:bg-gray-800 shrink-0",onError:g},null,40,rt),t("div",ot,[t("p",nt,o(a.productName),1),a.variantName?(s(),u("p",it," Varian: "+o(a.variantName),1)):r("v-if",!0),t("p",lt," SKU: "+o(a.productSku),1),t("div",dt,[t("p",ct,o(a.quantity)+"x "+o(x(n)(a.price)),1),t("p",ut,o(x(n)(a.subtotal)),1)])])]))),128))]),at(i.$slots,"footer")]),_:3})}}}),gt={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-800 space-y-3"},yt={class:"flex justify-between text-sm"},ft={class:"text-gray-900 dark:text-white"},pt={class:"flex justify-between text-sm"},xt={class:"text-gray-900 dark:text-white"},ht={key:0,class:"flex justify-between text-sm"},kt={class:"text-green-600 dark:text-green-400"},bt={key:1,class:"flex justify-between text-sm"},vt={class:"text-gray-900 dark:text-white"},_t={key:2,class:"flex justify-between text-sm"},wt={class:"text-gray-900 dark:text-white"},$t={class:"flex justify-between text-lg font-bold pt-3 border-t border-gray-200 dark:border-gray-800"},Ct={class:"text-primary-600 dark:text-primary-400"},At=v({__name:"OrderSummary",props:{subtotal:{},shippingCost:{},discount:{},tax:{},adminFee:{},total:{}},setup(e){const{formatCurrency:n}=P();return(g,i)=>(s(),u("div",gt,[t("div",yt,[i[0]||(i[0]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Subtotal",-1)),t("span",ft,o(x(n)(e.subtotal)),1)]),t("div",pt,[i[1]||(i[1]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Ongkos Kirim",-1)),t("span",xt,o(x(n)(e.shippingCost)),1)]),e.discount>0?(s(),u("div",ht,[i[2]||(i[2]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Diskon",-1)),t("span",kt,"-"+o(x(n)(e.discount)),1)])):r("v-if",!0),e.tax>0?(s(),u("div",bt,[i[3]||(i[3]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Pajak",-1)),t("span",vt,o(x(n)(e.tax)),1)])):r("v-if",!0),e.adminFee>0?(s(),u("div",_t,[i[4]||(i[4]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Biaya Admin",-1)),t("span",wt,o(x(n)(e.adminFee)),1)])):r("v-if",!0),t("div",$t,[i[5]||(i[5]=t("span",{class:"text-gray-900 dark:text-white"},"Total",-1)),t("span",Ct,o(x(n)(e.total)),1)])]))}}),St={class:"space-y-4"},It={class:"relative flex flex-col items-center"},Pt={class:"flex-1 pb-4"},Dt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Nt=v({__name:"OrderTimeline",props:{steps:{}},setup(e){const{formatShortDate:n}=P();return(g,i)=>{const l=j,f=$;return s(),p(f,null,{header:c(()=>[...i[0]||(i[0]=[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Status Pesanan ",-1)])]),default:c(()=>[t("div",St,[(s(!0),u(U,null,T(e.steps,(a,b)=>(s(),u("div",{key:a.label,class:"flex gap-3"},[t("div",It,[t("div",{class:S(["w-8 h-8 rounded-full flex items-center justify-center",a.completed?a.color==="error"?"bg-red-100 dark:bg-red-900/30":"bg-primary-100 dark:bg-primary-900/30":"bg-gray-100 dark:bg-gray-800"])},[y(l,{name:a.icon,class:S(["w-4 h-4",a.completed?a.color==="error"?"text-red-600 dark:text-red-400":"text-primary-600 dark:text-primary-400":"text-gray-400 dark:text-gray-600"])},null,8,["name","class"])],2),b<e.steps.length-1?(s(),u("div",{key:0,class:S(["w-0.5 h-8",a.completed?"bg-primary-200 dark:bg-primary-800":"bg-gray-200 dark:bg-gray-700"])},null,2)):r("v-if",!0)]),t("div",Pt,[t("p",{class:S(["font-medium",a.completed?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600"])},o(a.label),3),a.date?(s(),u("p",Dt,o(x(n)(a.date)),1)):r("v-if",!0)])]))),128))])]),_:1})}}}),Bt={class:"flex items-center justify-between"},Ut={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},jt={class:"flex items-center justify-between"},Tt={class:"font-semibold text-blue-900 dark:text-blue-100"},Lt={class:"flex items-center gap-2 mt-1"},Rt={class:"text-blue-800 dark:text-blue-200 font-mono"},Ot={key:0,class:"space-y-4"},Vt={class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg"},Et={class:"font-semibold text-gray-900 dark:text-white"},Mt={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Ft={class:"space-y-4"},zt={class:"relative"},Kt={class:"relative flex flex-col items-center"},qt={key:0,class:"w-0.5 h-full bg-gray-200 dark:bg-gray-700 absolute top-3"},Gt={class:"flex-1 min-w-0 pb-4"},Ht={class:"text-sm font-medium text-gray-900 dark:text-white"},Qt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Wt={key:0},Jt={class:"text-center py-6"},Xt=v({__name:"ShippingTracker",props:{shipping:{},tracking:{default:null},loading:{type:Boolean,default:!1}},emits:["refresh","copy"],setup(e,{emit:n}){const g=n;return(i,l)=>{const f=F,a=j,b=$;return s(),p(b,null,{header:c(()=>[t("div",Bt,[l[4]||(l[4]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Lacak Pengiriman ",-1)),y(f,{color:"neutral",variant:"ghost",size:"sm",icon:"i-heroicons-arrow-path",loading:e.loading,onClick:l[0]||(l[0]=h=>g("refresh"))},{default:c(()=>[...l[3]||(l[3]=[k(" Refresh ",-1)])]),_:1},8,["loading"])])]),default:c(()=>[t("div",Ut,[t("div",jt,[t("div",null,[t("p",Tt,o(e.shipping.courierName)+" - "+o(e.shipping.courierService),1),t("div",Lt,[t("p",Rt,o(e.shipping.waybill),1),y(f,{color:"neutral",variant:"ghost",size:"xs",icon:"i-heroicons-clipboard-document",onClick:l[1]||(l[1]=h=>g("copy",e.shipping.waybill))})])]),y(a,{name:"i-heroicons-truck",class:"w-10 h-10 text-blue-600 dark:text-blue-400"})])]),e.tracking?(s(),u("div",Ot,[t("div",Vt,[y(a,{name:e.tracking.status==="DELIVERED"?"i-heroicons-check-circle":"i-heroicons-truck",class:S(["w-8 h-8",e.tracking.status==="DELIVERED"?"text-green-600":"text-blue-600"])},null,8,["name","class"]),t("div",null,[t("p",Et,o(e.tracking.status),1),e.tracking.statusDescription?(s(),u("p",Mt,o(e.tracking.statusDescription),1)):r("v-if",!0)])]),r(" Tracking History "),t("div",Ft,[l[5]||(l[5]=t("h4",{class:"font-medium text-gray-900 dark:text-white"},"Riwayat Pengiriman",-1)),t("div",zt,[(s(!0),u(U,null,T(e.tracking.history,(h,_)=>(s(),u("div",{key:_,class:"flex gap-4 pb-4 last:pb-0"},[t("div",Kt,[t("div",{class:S(["w-3 h-3 rounded-full",_===0?"bg-primary-500":"bg-gray-300 dark:bg-gray-600"])},null,2),_<e.tracking.history.length-1?(s(),u("div",qt)):r("v-if",!0)]),t("div",Gt,[t("p",Ht,o(h.description),1),t("p",Qt,[k(o(h.date)+" "+o(h.time)+" ",1),h.city?(s(),u("span",Wt,"â€¢ "+o(h.city),1)):r("v-if",!0)])])]))),128))])])])):(s(),u(U,{key:1},[r(" No Tracking Data "),t("div",Jt,[y(a,{name:"i-heroicons-map-pin",class:"w-12 h-12 mx-auto text-gray-300 dark:text-gray-600"}),l[7]||(l[7]=t("p",{class:"mt-2 text-gray-500 dark:text-gray-400"}," Data tracking belum tersedia ",-1)),y(f,{color:"primary",variant:"soft",size:"sm",class:"mt-4",onClick:l[2]||(l[2]=h=>g("refresh"))},{default:c(()=>[...l[6]||(l[6]=[k(" Cek Tracking ",-1)])]),_:1})])],2112))]),_:1})}}}),Yt={class:"space-y-3"},Zt={class:"flex items-center gap-3"},te={class:"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center"},ee={class:"font-medium text-gray-900 dark:text-white"},ae={class:"text-sm text-gray-500 dark:text-gray-400"},se={class:"flex items-center gap-3 text-sm"},re={class:"text-gray-600 dark:text-gray-400"},oe=v({__name:"CustomerInfo",props:{customer:{}},setup(e){return(n,g)=>{const i=j,l=$;return s(),p(l,null,{header:c(()=>[...g[0]||(g[0]=[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Informasi Pembeli ",-1)])]),default:c(()=>[t("div",Yt,[t("div",Zt,[t("div",te,[y(i,{name:"i-heroicons-user",class:"w-5 h-5 text-primary-600 dark:text-primary-400"})]),t("div",null,[t("p",ee,o(e.customer.name),1),t("p",ae,o(e.customer.email),1)])]),t("div",se,[y(i,{name:"i-heroicons-phone",class:"w-4 h-4 text-gray-400"}),t("span",re,o(e.customer.phone),1)])])]),_:1})}}}),ne={class:"space-y-2"},ie={class:"font-medium text-gray-900 dark:text-white"},le={class:"text-sm text-gray-600 dark:text-gray-400"},de={class:"text-sm text-gray-600 dark:text-gray-400"},ce=v({__name:"AddressInfo",props:{address:{}},setup(e){return(n,g)=>{const i=$;return s(),p(i,null,{header:c(()=>[...g[0]||(g[0]=[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Alamat Pengiriman ",-1)])]),default:c(()=>[t("div",ne,[t("p",ie,o(e.address.recipientName),1),t("p",le,o(e.address.phone),1),t("p",de,o(e.address.fullAddress),1)])]),_:1})}}}),ue={key:0,class:"space-y-3"},me={class:"flex justify-between"},ge={class:"font-medium text-gray-900 dark:text-white capitalize"},ye={class:"flex justify-between"},fe={key:0,class:"flex justify-between"},pe={class:"text-gray-900 dark:text-white"},xe={key:1,class:"text-center py-4 text-gray-500 dark:text-gray-400"},he=v({__name:"PaymentInfo",props:{payment:{}},setup(e){const n=e,{formatShortDate:g}=P(),i=w(()=>{const f=n.payment?.status||"pending";return{pending:{label:"Menunggu Pembayaran",color:"warning"},capture:{label:"Diproses",color:"info"},settlement:{label:"Lunas",color:"success"},deny:{label:"Ditolak",color:"error"},cancel:{label:"Dibatalkan",color:"error"},expire:{label:"Kadaluarsa",color:"neutral"},refund:{label:"Refund",color:"neutral"}}[f]||{label:f,color:"neutral"}}),l=w(()=>{const f=n.payment?.method||"";return{bank_transfer:"Transfer Bank",credit_card:"Kartu Kredit",gopay:"GoPay",shopeepay:"ShopeePay",qris:"QRIS",cstore:"Convenience Store",echannel:"Mandiri Bill",bca_va:"BCA Virtual Account",bni_va:"BNI Virtual Account",bri_va:"BRI Virtual Account",permata_va:"Permata Virtual Account"}[f]||f?.replace(/_/g," ")||"-"});return(f,a)=>{const b=M,h=j,_=$;return s(),p(_,null,{header:c(()=>[...a[0]||(a[0]=[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Informasi Pembayaran ",-1)])]),default:c(()=>[e.payment?(s(),u("div",ue,[t("div",me,[a[1]||(a[1]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Metode",-1)),t("span",ge,o(l.value),1)]),t("div",ye,[a[2]||(a[2]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Status",-1)),y(b,{color:i.value.color,variant:"soft",size:"sm"},{default:c(()=>[k(o(i.value.label),1)]),_:1},8,["color"])]),e.payment.paidAt?(s(),u("div",fe,[a[3]||(a[3]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Dibayar",-1)),t("span",pe,o(x(g)(e.payment.paidAt)),1)])):r("v-if",!0)])):(s(),u("div",xe,[y(h,{name:"i-heroicons-credit-card",class:"w-8 h-8 mx-auto mb-2 opacity-50"}),a[4]||(a[4]=t("p",null,"Belum ada informasi pembayaran",-1))]))]),_:1})}}}),ke={class:"space-y-6"},be={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ve={class:"flex items-center gap-4"},_e={class:"text-2xl font-bold text-gray-900 dark:text-white"},we={class:"text-sm text-gray-500 dark:text-gray-400"},$e={key:0,class:"flex flex-wrap gap-3"},Ce={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ae={class:"lg:col-span-2 space-y-6"},Se={class:"text-gray-600 dark:text-gray-400"},Ie={class:"space-y-6"},Ge=v({layout:X,__name:"show",props:{admin:{default:()=>({id:0,storeName:"",cityId:"",districtId:""})},order:{default:()=>({id:0,orderNumber:"",status:"pending_payment",statusLabel:"Pending",statusColor:"warning",customer:null,subtotal:0,shippingCost:0,discount:0,tax:0,adminFee:0,total:0,customerNotes:null,adminNotes:null,itemCount:0,firstItemImage:"",items:[],payment:null,shipping:null,createdAt:"",paidAt:null,processedAt:null,shippedAt:null,deliveredAt:null,cancelledAt:null})},trackingInfo:{default:null},couriers:{default:()=>[]}},setup(e){const n=e,{isLoading:g,processOrder:i,submitShipping:l,refreshTracking:f,cancelOrder:a,reloadPage:b,copyToClipboard:h}=Y(),{formatDate:_}=P(),L=B(n.trackingInfo),D=B(!1),N=B(!1),C=B(!1),R=w(()=>n.order.status==="paid"),O=w(()=>["paid","processing"].includes(n.order.status)),z=w(()=>n.order.status==="shipped"&&n.order.shipping?.waybill),V=w(()=>["pending_payment","paid"].includes(n.order.status)),K=w(()=>{const m=n.order,d=[{label:"Pesanan Dibuat",date:m.createdAt,completed:!0,icon:"i-heroicons-shopping-cart",color:"primary"},{label:"Pembayaran",date:m.paidAt,completed:!!m.paidAt,icon:"i-heroicons-credit-card",color:"primary"},{label:"Diproses",date:m.processedAt,completed:!!m.processedAt,icon:"i-heroicons-cog-6-tooth",color:"primary"},{label:"Dikirim",date:m.shippedAt,completed:!!m.shippedAt,icon:"i-heroicons-truck",color:"primary"},{label:"Selesai",date:m.deliveredAt,completed:!!m.deliveredAt,icon:"i-heroicons-check-circle",color:"primary"}];return m.status==="cancelled"?[d[0],{label:"Dibatalkan",date:m.cancelledAt,completed:!0,icon:"i-heroicons-x-circle",color:"error"}]:d}),q=async()=>{await i(n.order.id)&&b()},E=async()=>{const m=await f(n.order.id);m&&(L.value=m)},G=async(m,d)=>{C.value=!0,await l(n.order.id,m,d)&&(D.value=!1,b()),C.value=!1},H=async m=>{C.value=!0,await a(n.order.id,m)&&(N.value=!1,b()),C.value=!1},Q=m=>{h(m)};return(m,d)=>{const A=F,W=M,J=$;return s(),u("div",ke,[r(" Page Header "),t("div",be,[t("div",ve,[y(A,{color:"neutral",variant:"ghost",icon:"i-heroicons-arrow-left",to:"/admin/orders"},{default:c(()=>[...d[4]||(d[4]=[k(" Kembali ",-1)])]),_:1}),t("div",null,[t("h1",_e,o(e.order.orderNumber),1),t("p",we,o(x(_)(e.order.createdAt)),1)])]),r(" Status Badge "),y(W,{color:x(Z)(e.order.statusColor),variant:"soft",size:"lg"},{default:c(()=>[k(o(e.order.statusLabel),1)]),_:1},8,["color"])]),r(" Action Buttons "),R.value||O.value||V.value?(s(),u("div",$e,[R.value?(s(),p(A,{key:0,color:"primary",icon:"i-heroicons-play",loading:x(g),onClick:q},{default:c(()=>[...d[5]||(d[5]=[k(" Proses Pesanan ",-1)])]),_:1},8,["loading"])):r("v-if",!0),O.value?(s(),p(A,{key:1,color:"primary",icon:"i-heroicons-truck",onClick:d[0]||(d[0]=I=>D.value=!0)},{default:c(()=>[k(o(e.order.shipping?.waybill?"Update Resi":"Input Resi"),1)]),_:1})):r("v-if",!0),z.value?(s(),p(A,{key:2,color:"neutral",variant:"soft",icon:"i-heroicons-arrow-path",loading:x(g),onClick:E},{default:c(()=>[...d[6]||(d[6]=[k(" Refresh Tracking ",-1)])]),_:1},8,["loading"])):r("v-if",!0),V.value?(s(),p(A,{key:3,color:"error",variant:"ghost",icon:"i-heroicons-x-mark",onClick:d[1]||(d[1]=I=>N.value=!0)},{default:c(()=>[...d[7]||(d[7]=[k(" Batalkan Pesanan ",-1)])]),_:1})):r("v-if",!0)])):r("v-if",!0),r(" Main Content Grid "),t("div",Ce,[r(" Left Column "),t("div",Ae,[r(" Order Items "),y(mt,{items:e.order.items},{footer:c(()=>[y(At,{subtotal:e.order.subtotal,"shipping-cost":e.order.shippingCost,discount:e.order.discount,tax:e.order.tax,"admin-fee":e.order.adminFee,total:e.order.total},null,8,["subtotal","shipping-cost","discount","tax","admin-fee","total"])]),_:1},8,["items"]),r(" Shipping Tracking "),e.order.shipping?.waybill?(s(),p(Xt,{key:0,shipping:e.order.shipping,tracking:L.value,loading:x(g),onRefresh:E,onCopy:Q},null,8,["shipping","tracking","loading"])):r("v-if",!0),r(" Customer Notes "),e.order.customerNotes?(s(),p(J,{key:1},{header:c(()=>[...d[8]||(d[8]=[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Catatan Pembeli ",-1)])]),default:c(()=>[t("p",Se,o(e.order.customerNotes),1)]),_:1})):r("v-if",!0)]),r(" Right Column "),t("div",Ie,[r(" Order Timeline "),y(Nt,{steps:K.value},null,8,["steps"]),r(" Customer Info "),e.order.customer?(s(),p(oe,{key:0,customer:e.order.customer},null,8,["customer"])):r("v-if",!0),r(" Shipping Address "),e.order.address?(s(),p(ce,{key:1,address:e.order.address},null,8,["address"])):r("v-if",!0),r(" Payment Info "),e.order.payment?(s(),p(he,{key:2,payment:e.order.payment},null,8,["payment"])):r("v-if",!0)])]),r(" Shipping Modal "),y(tt,{open:D.value,"onUpdate:open":d[2]||(d[2]=I=>D.value=I),order:e.order,couriers:e.couriers,loading:C.value,onSubmit:G},null,8,["open","order","couriers","loading"]),r(" Cancel Modal "),y(et,{open:N.value,"onUpdate:open":d[3]||(d[3]=I=>N.value=I),order:e.order,loading:C.value,onConfirm:H},null,8,["open","order","loading"])])}}});export{Ge as default};
