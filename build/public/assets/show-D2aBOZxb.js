import{_ as I}from"./Modal-Bgd8PL5Y.js";import{_ as P}from"./Badge-DfumusWV.js";import{_ as L,a as E}from"./Button-CI_-soaG.js";import{d as U,h as G,a as c,j as i,b as e,f as l,w as n,u as v,m as _,k as r,e as w,t as a,F as y,r as A,l as b,o as d}from"./app-CyjtdGoI.js";import{g as H}from"./ColorModeButton-Bf7Nr8w3.js";import{A as O}from"./admin-BzR6vrex.js";import"./Tooltip-BrTR-Vq7.js";const R={class:"space-y-6"},z={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},F={class:"flex items-center gap-4"},M={class:"flex gap-2"},q={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},K={class:"lg:col-span-2 space-y-6"},Q={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden"},W={class:"bg-linear-to-r from-violet-500 to-purple-600 px-6 py-8"},J={class:"flex items-center gap-4"},X={class:"w-20 h-20 rounded-full bg-white/20 flex items-center justify-center overflow-hidden"},Y=["src","alt"],Z={class:"text-2xl font-bold text-white"},ee={class:"text-white/80"},te={class:"flex gap-2 mt-2"},se={class:"p-6"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oe={class:"space-y-4"},le={class:"text-slate-900 dark:text-white font-medium"},re={class:"text-slate-900 dark:text-white font-medium"},ie={class:"text-slate-900 dark:text-white font-medium"},ne={class:"text-slate-900 dark:text-white font-medium"},de={class:"space-y-4"},ce={class:"text-slate-900 dark:text-white font-medium"},me={class:"text-slate-900 dark:text-white font-medium"},ue={class:"text-slate-900 dark:text-white font-medium"},xe={key:0},fe={class:"text-slate-900 dark:text-white font-medium"},ge={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden"},pe={key:0,class:"divide-y divide-slate-200 dark:divide-slate-800"},be={class:"flex items-center justify-between"},ke={class:"text-sm text-slate-500 dark:text-slate-400"},he={class:"text-right"},ve={class:"font-medium text-slate-900 dark:text-white"},_e={key:1,class:"p-8 text-center"},we={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden"},ye={key:0,class:"divide-y divide-slate-200 dark:divide-slate-800"},Ae={class:"flex items-start justify-between"},De={class:"flex items-center gap-2 mb-1"},Ce={class:"font-medium text-slate-900 dark:text-white"},Se={class:"text-sm text-slate-600 dark:text-slate-400"},je={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},Be={key:1,class:"p-8 text-center"},Ne={class:"space-y-6"},$e={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6"},Te={class:"space-y-4"},Ve={class:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},Ie={class:"flex items-center gap-3"},Pe={class:"w-10 h-10 rounded-lg bg-violet-500/10 flex items-center justify-center"},Le={class:"font-bold text-slate-900 dark:text-white"},Ee={class:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},Ue={class:"flex items-center gap-3"},Ge={class:"w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center"},He={class:"font-bold text-emerald-600 dark:text-emerald-400"},Oe={key:0,class:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},Re={class:"flex items-center gap-3"},ze={class:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center"},Fe={class:"font-bold text-blue-600 dark:text-blue-400"},Me={class:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},qe={class:"flex items-center gap-3"},Ke={class:"w-10 h-10 rounded-lg bg-amber-500/10 flex items-center justify-center"},Qe={class:"font-bold text-slate-900 dark:text-white"},We={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6"},Je={class:"space-y-3"},Xe={class:"p-6 max-h-[85vh] overflow-y-auto"},Ye={class:"flex items-center gap-4 mb-4"},Ze={class:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-500/20 flex items-center justify-center"},et={class:"text-slate-500 dark:text-slate-400"},tt={class:"text-sm text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-500/10 p-3 rounded-lg mb-4"},st={class:"flex justify-end gap-3"},ct=U({layout:O,__name:"show",props:{customer:{}},setup(D){const s=D,x=H(),g=G(!1),h=m=>new Date(m).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),C=m=>new Date(m).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(m),S=m=>({pending:"warning",paid:"primary",processing:"info",shipped:"info",delivered:"success",cancelled:"error",refunded:"neutral"})[m]||"neutral",j=m=>({pending:"Menunggu Pembayaran",paid:"Sudah Dibayar",processing:"Diproses",shipped:"Dikirim",delivered:"Selesai",cancelled:"Dibatalkan",refunded:"Dikembalikan"})[m]||m,B=()=>{b.patch(`/admin/customers/${s.customer.id}/active`,{},{preserveScroll:!0,onSuccess:()=>{x.success(`Pelanggan berhasil di${s.customer.isActive?"nonaktifkan":"aktifkan"}`)},onError:()=>{x.error("Gagal mengubah status pelanggan")}})},N=()=>{b.patch(`/admin/customers/${s.customer.id}/verified`,{},{preserveScroll:!0,onSuccess:()=>{x.success("Status verifikasi berhasil diubah")},onError:()=>{x.error("Gagal mengubah status verifikasi")}})},$=()=>{b.delete(`/admin/customers/${s.customer.id}`,{onSuccess:()=>{x.success("Pelanggan berhasil dihapus")},onError:()=>{x.error("Gagal menghapus pelanggan")}})},T=()=>{if(!s.customer.isActive){x.error("Tidak dapat login sebagai customer yang tidak aktif");return}b.post(`/admin/customers/${s.customer.id}/impersonate`,{},{onSuccess:()=>{x.success(`Anda sekarang login sebagai ${s.customer.fullName}`)},onError:()=>{x.error("Gagal login sebagai customer")}})};return(m,t)=>{const u=L,f=E,p=P,V=I;return d(),c("div",R,[i(" Page Header "),e("div",z,[e("div",F,[l(v(_),{href:"/admin/customers",class:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"},{default:n(()=>[l(u,{name:"i-heroicons-arrow-left",class:"w-5 h-5 text-slate-600 dark:text-slate-400"})]),_:1}),t[3]||(t[3]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Detail Pelanggan"),e("p",{class:"text-gray-500 dark:text-gray-400"}," Informasi lengkap pelanggan ")],-1))]),e("div",M,[l(f,{icon:"i-heroicons-user-circle",color:"primary",disabled:!s.customer.isActive,onClick:T},{default:n(()=>[...t[4]||(t[4]=[r(" Login sebagai Customer ",-1)])]),_:1},8,["disabled"]),l(f,{icon:"i-heroicons-pencil-square",color:"primary",variant:"outline",to:`/admin/customers/${s.customer.id}/edit`},{default:n(()=>[...t[5]||(t[5]=[r(" Edit ",-1)])]),_:1},8,["to"]),l(f,{icon:"i-heroicons-trash",color:"error",variant:"outline",onClick:t[0]||(t[0]=o=>g.value=!0)},{default:n(()=>[...t[6]||(t[6]=[r(" Hapus ",-1)])]),_:1})])]),e("div",q,[i(" Left Column - Customer Info "),e("div",K,[i(" Customer Info Card "),e("div",Q,[i(" Header with Avatar "),e("div",W,[e("div",J,[e("div",X,[s.customer.avatar?(d(),c("img",{key:0,src:s.customer.avatar,alt:s.customer.fullName,class:"w-full h-full object-cover"},null,8,Y)):(d(),w(u,{key:1,name:"i-heroicons-user",class:"w-10 h-10 text-white"}))]),e("div",null,[e("h2",Z,a(s.customer.fullName),1),e("p",ee,a(s.customer.email),1),e("div",te,[l(p,{color:s.customer.isActive?"success":"error"},{default:n(()=>[r(a(s.customer.isActive?"Aktif":"Tidak Aktif"),1)]),_:1},8,["color"]),l(p,{color:s.customer.isVerified?"primary":"neutral"},{default:n(()=>[r(a(s.customer.isVerified?"Terverifikasi":"Belum Verifikasi"),1)]),_:1},8,["color"])])])])]),i(" Details "),e("div",se,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white mb-4"}," Informasi Pelanggan ",-1)),e("div",ae,[e("div",oe,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm text-slate-500 dark:text-slate-400"},"ID",-1)),e("p",le,"#"+a(s.customer.id),1)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm text-slate-500 dark:text-slate-400"},"Nama Lengkap",-1)),e("p",re,a(s.customer.fullName),1)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm text-slate-500 dark:text-slate-400"},"Email",-1)),e("p",ie,a(s.customer.email),1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm text-slate-500 dark:text-slate-400"},"Telepon",-1)),e("p",ne,a(s.customer.phone||"-"),1)])]),e("div",de,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm text-slate-500 dark:text-slate-400"},"Gender",-1)),e("p",ce,a(s.customer.gender==="male"?"Laki-laki":s.customer.gender==="female"?"Perempuan":"-"),1)]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm text-slate-500 dark:text-slate-400"},"Tanggal Lahir",-1)),e("p",me,a(s.customer.birthDate?h(s.customer.birthDate):"-"),1)]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm text-slate-500 dark:text-slate-400"},"Tanggal Bergabung",-1)),e("p",ue,a(C(s.customer.createdAt)),1)]),s.customer.referredByCode?(d(),c("div",xe,[t[14]||(t[14]=e("label",{class:"block text-sm text-slate-500 dark:text-slate-400"},"Kode Referral",-1)),e("p",fe,a(s.customer.referredByCode),1)])):i("v-if",!0)])])])]),i(" Recent Orders "),e("div",ge,[t[17]||(t[17]=e("div",{class:"p-4 border-b border-slate-200 dark:border-slate-800"},[e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Pesanan Terakhir")],-1)),s.customer.orders&&s.customer.orders.length>0?(d(),c("div",pe,[(d(!0),c(y,null,A(s.customer.orders,o=>(d(),c("div",{key:o.id,class:"p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[e("div",be,[e("div",null,[l(v(_),{href:`/admin/orders/${o.id}`,class:"font-medium text-violet-600 hover:text-violet-700 dark:text-violet-400"},{default:n(()=>[r(a(o.orderNumber),1)]),_:2},1032,["href"]),e("p",ke,a(h(o.createdAt)),1)]),e("div",he,[e("p",ve,a(k(o.total)),1),l(p,{color:S(o.status),variant:"subtle",size:"xs"},{default:n(()=>[r(a(j(o.status)),1)]),_:2},1032,["color"])])])]))),128))])):(d(),c("div",_e,[l(u,{name:"i-heroicons-shopping-cart",class:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-4"}),t[16]||(t[16]=e("p",{class:"text-slate-500 dark:text-slate-400"},"Belum ada pesanan",-1))]))]),i(" Addresses "),e("div",we,[t[20]||(t[20]=e("div",{class:"p-4 border-b border-slate-200 dark:border-slate-800"},[e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Alamat")],-1)),s.customer.addresses&&s.customer.addresses.length>0?(d(),c("div",ye,[(d(!0),c(y,null,A(s.customer.addresses,o=>(d(),c("div",{key:o.id,class:"p-4"},[e("div",Ae,[e("div",null,[e("div",De,[e("p",Ce,a(o.label),1),o.isDefault?(d(),w(p,{key:0,color:"primary",variant:"subtle",size:"xs"},{default:n(()=>[...t[18]||(t[18]=[r(" Utama ",-1)])]),_:1})):i("v-if",!0)]),e("p",Se,a(o.recipientName)+" - "+a(o.phone),1),e("p",je,a(o.fullAddress)+", "+a(o.district)+", "+a(o.city)+", "+a(o.province)+" "+a(o.postalCode),1)])])]))),128))])):(d(),c("div",Be,[l(u,{name:"i-heroicons-map-pin",class:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-4"}),t[19]||(t[19]=e("p",{class:"text-slate-500 dark:text-slate-400"},"Belum ada alamat tersimpan",-1))]))])]),i(" Right Column - Stats & Actions "),e("div",Ne,[i(" Stats Card "),e("div",$e,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white mb-4"},"Statistik",-1)),e("div",Te,[e("div",Ve,[e("div",Ie,[e("div",Pe,[l(u,{name:"i-heroicons-shopping-cart",class:"w-5 h-5 text-violet-500"})]),t[21]||(t[21]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Total Pesanan",-1))]),e("span",Le,a(s.customer.totalOrdersCount),1)]),e("div",Ee,[e("div",Ue,[e("div",Ge,[l(u,{name:"i-heroicons-banknotes",class:"w-5 h-5 text-emerald-500"})]),t[22]||(t[22]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Total Belanja",-1))]),e("span",He,a(k(s.customer.totalSpent)),1)]),s.customer.wallet?(d(),c("div",Oe,[e("div",Re,[e("div",ze,[l(u,{name:"i-heroicons-wallet",class:"w-5 h-5 text-blue-500"})]),t[23]||(t[23]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Saldo Wallet",-1))]),e("span",Fe,a(k(s.customer.wallet.balance)),1)])):i("v-if",!0),e("div",Me,[e("div",qe,[e("div",Ke,[l(u,{name:"i-heroicons-star",class:"w-5 h-5 text-amber-500"})]),t[24]||(t[24]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Total Review",-1))]),e("span",Qe,a(s.customer.reviews?.length||0),1)])])]),i(" Quick Actions "),e("div",We,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white mb-4"},"Aksi Cepat",-1)),e("div",Je,[l(f,{icon:s.customer.isActive?"i-heroicons-x-circle":"i-heroicons-check-circle",color:s.customer.isActive?"warning":"success",variant:"soft",block:"",onClick:B},{default:n(()=>[r(a(s.customer.isActive?"Nonaktifkan Akun":"Aktifkan Akun"),1)]),_:1},8,["icon","color"]),l(f,{icon:s.customer.isVerified?"i-heroicons-shield-exclamation":"i-heroicons-shield-check",color:s.customer.isVerified?"neutral":"primary",variant:"soft",block:"",onClick:N},{default:n(()=>[r(a(s.customer.isVerified?"Batalkan Verifikasi":"Verifikasi Email"),1)]),_:1},8,["icon","color"])])])])]),i(" Delete Modal "),l(V,{open:g.value,"onUpdate:open":t[2]||(t[2]=o=>g.value=o),ui:{overlay:"z-[100]",content:"z-[100]"}},{content:n(()=>[e("div",Xe,[e("div",Ye,[e("div",Ze,[l(u,{name:"i-heroicons-exclamation-triangle",class:"w-6 h-6 text-red-500"})]),e("div",null,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Hapus Pelanggan",-1)),e("p",et,[t[27]||(t[27]=r(" Apakah Anda yakin ingin menghapus ",-1)),e("strong",null,a(s.customer.fullName),1),t[28]||(t[28]=r("? ",-1))])])]),e("p",tt,[l(u,{name:"i-heroicons-exclamation-triangle",class:"w-4 h-4 inline mr-1"}),t[30]||(t[30]=r(" Pelanggan dengan riwayat pesanan tidak dapat dihapus. ",-1))]),e("div",st,[l(f,{color:"neutral",variant:"outline",onClick:t[1]||(t[1]=o=>g.value=!1)},{default:n(()=>[...t[31]||(t[31]=[r(" Batal ",-1)])]),_:1}),l(f,{color:"error",onClick:$},{default:n(()=>[...t[32]||(t[32]=[r(" Hapus ",-1)])]),_:1})])])]),_:1},8,["open"])])}}});export{ct as default};
