import{_ as V,a as N}from"./Button-CI_-soaG.js";import{_ as C}from"./Select-D6kv-Jzs.js";import{_ as S,g as P}from"./ColorModeButton-Bf7Nr8w3.js";import{d as U,h as v,a as n,j as t,b as a,f as r,w as k,u as h,m as j,D as A,k as i,t as u,l as B,o as m}from"./app-CyjtdGoI.js";import{A as F}from"./admin-BzR6vrex.js";import"./useFormControl-D_pV87FU.js";import"./Tooltip-BrTR-Vq7.js";const $={class:"space-y-6"},E={class:"flex items-center gap-4"},M={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6"},T={key:0,class:"mt-1 text-sm text-red-500"},K={key:0,class:"mt-1 text-sm text-red-500"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},I={key:0,class:"mt-1 text-sm text-red-500"},L={key:0,class:"mt-1 text-sm text-red-500"},O={class:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700"},X=U({layout:F,__name:"create",setup(R){const x=P(),s=v({fullName:"",email:"",password:"",passwordConfirmation:"",role:"admin"}),p=v(!1),l=v({}),w=[{label:"Admin",value:"admin"},{label:"Super Admin",value:"superadmin"}],g=()=>(l.value={},s.value.fullName||(l.value.fullName="Nama lengkap wajib diisi"),s.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)||(l.value.email="Format email tidak valid"):l.value.email="Email wajib diisi",s.value.password?s.value.password.length<8&&(l.value.password="Password minimal 8 karakter"):l.value.password="Password wajib diisi",s.value.password!==s.value.passwordConfirmation&&(l.value.passwordConfirmation="Konfirmasi password tidak cocok"),Object.keys(l.value).length===0),c=()=>{g()&&(p.value=!0,B.post("/admin/users",{fullName:s.value.fullName,email:s.value.email,password:s.value.password,role:s.value.role},{onSuccess:()=>{x.success("Pengguna berhasil ditambahkan")},onError:f=>{f&&(l.value={...l.value,...f}),x.error("Gagal menambahkan pengguna")},onFinish:()=>{p.value=!1}}))};return(f,e)=>{const _=V,d=S,y=C,b=N;return m(),n("div",$,[t(" Page Header "),a("div",E,[r(h(j),{href:"/admin/users",class:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"},{default:k(()=>[r(_,{name:"i-heroicons-arrow-left",class:"w-5 h-5 text-slate-600 dark:text-slate-400"})]),_:1}),e[5]||(e[5]=a("div",null,[a("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Tambah Pengguna"),a("p",{class:"text-gray-500 dark:text-gray-400"}," Tambah pengguna admin baru ")],-1))]),t(" Form "),a("div",M,[a("form",{onSubmit:A(c,["prevent"]),class:"space-y-6"},[t(" Full Name "),a("div",null,[e[6]||(e[6]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[i(" Nama Lengkap "),a("span",{class:"text-red-500"},"*")],-1)),r(d,{modelValue:s.value.fullName,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.fullName=o),placeholder:"Masukkan nama lengkap",error:!!l.value.fullName},null,8,["modelValue","error"]),l.value.fullName?(m(),n("p",T,u(l.value.fullName),1)):t("v-if",!0)]),t(" Email "),a("div",null,[e[7]||(e[7]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[i(" Email "),a("span",{class:"text-red-500"},"*")],-1)),r(d,{modelValue:s.value.email,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.email=o),type:"email",placeholder:"Masukkan email",error:!!l.value.email},null,8,["modelValue","error"]),l.value.email?(m(),n("p",K,u(l.value.email),1)):t("v-if",!0)]),t(" Password "),a("div",D,[a("div",null,[e[8]||(e[8]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[i(" Password "),a("span",{class:"text-red-500"},"*")],-1)),r(d,{modelValue:s.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.password=o),type:"password",placeholder:"Masukkan password",error:!!l.value.password},null,8,["modelValue","error"]),l.value.password?(m(),n("p",I,u(l.value.password),1)):t("v-if",!0)]),a("div",null,[e[9]||(e[9]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[i(" Konfirmasi Password "),a("span",{class:"text-red-500"},"*")],-1)),r(d,{modelValue:s.value.passwordConfirmation,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.passwordConfirmation=o),type:"password",placeholder:"Konfirmasi password",error:!!l.value.passwordConfirmation},null,8,["modelValue","error"]),l.value.passwordConfirmation?(m(),n("p",L,u(l.value.passwordConfirmation),1)):t("v-if",!0)])]),t(" Role "),a("div",null,[e[10]||(e[10]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[i(" Role "),a("span",{class:"text-red-500"},"*")],-1)),r(y,{modelValue:s.value.role,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.role=o),items:w},null,8,["modelValue"]),e[11]||(e[11]=a("p",{class:"mt-1 text-sm text-slate-500 dark:text-slate-400"}," Super Admin memiliki akses penuh ke semua fitur termasuk manajemen pengguna ",-1))]),t(" Submit "),a("div",O,[r(b,{color:"neutral",variant:"outline",to:"/admin/users"},{default:k(()=>[...e[12]||(e[12]=[i(" Batal ",-1)])]),_:1}),r(b,{type:"submit",color:"primary",loading:p.value},{default:k(()=>[...e[13]||(e[13]=[i(" Simpan Pengguna ",-1)])]),_:1},8,["loading"])])],32)])])}}});export{X as default};
