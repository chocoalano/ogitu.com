import{_ as le}from"./Checkbox-9qpvU9Db.js";import{_ as te}from"./Select-D6kv-Jzs.js";import{a as ae,_ as oe}from"./Button-CI_-soaG.js";import{_ as se}from"./Textarea-CZyY9J1c.js";import{_ as ie}from"./FormField-qFQ_28ZO.js";import{_ as ne}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as re,a as ue}from"./ArticlePageBuilder.vue_vue_type_script_setup_true_lang-BSrqSR3I.js";import{_ as de}from"./Card-BjL1m_sW.js";import{_ as ce}from"./DropdownMenu-DxuVXSbh.js";import{_ as me}from"./Badge-DfumusWV.js";import{d as pe,C as fe,h as v,y as ge,c as M,a as h,f as l,b as t,u as o,i as ve,j as n,e as E,w as i,k as b,t as c,D as be,E as A,G as B,n as ke,o as g,F as R,r as he,l as xe}from"./app-CyjtdGoI.js";import{A as ye}from"./admin-BzR6vrex.js";import{a as _e,g as we,b as Ve}from"./admin_article-B2V9J82g.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Label-yeknIWsP.js";import"./Modal-Bgd8PL5Y.js";import"./Alert-CrKiQ9oh.js";import"./Tooltip-BrTR-Vq7.js";const Te={class:"space-y-6"},Ue={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},Se={class:"flex items-center gap-4"},Ce={class:"flex items-center gap-3"},De={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},$e={class:"flex items-center gap-2"},Ae={class:"grid grid-cols-2 gap-4 md:grid-cols-5"},Be={class:"text-xl font-semibold"},Pe={class:"text-xl font-semibold"},Ie={class:"text-xl font-semibold"},Ke={class:"text-xl font-semibold"},Fe={class:"text-xl font-semibold"},Le={class:"space-y-6"},je={class:"space-y-4"},Me={class:"flex items-center justify-between"},Ee={class:"space-y-6"},Re={class:"grid gap-6 md:grid-cols-2"},Ge={class:"space-y-3"},ze={key:0,class:"relative aspect-video overflow-hidden rounded-lg border dark:border-gray-700"},Oe=["src"],Ne={class:"space-y-3"},Je={key:0,class:"relative aspect-video overflow-hidden rounded-lg border dark:border-gray-700"},qe=["src"],He={class:"space-y-6"},We={class:"space-y-4"},Qe={class:"mt-6 rounded-lg border bg-white p-4 dark:border-gray-700 dark:bg-gray-800"},Xe={class:"space-y-1"},Ye={class:"text-lg text-blue-600 hover:underline"},Ze={class:"text-sm text-green-600"},el={class:"text-sm text-gray-600 dark:text-gray-400"},ll={class:"space-y-6"},tl={class:"grid gap-6 md:grid-cols-2"},al={class:"space-y-4"},ol={class:"space-y-2"},sl={class:"flex gap-2"},il={key:0,class:"flex flex-wrap gap-2"},nl={class:"space-y-4"},rl={class:"space-y-3 pt-4"},Dl=pe({layout:ye,__name:"edit",props:{article:{},authors:{},categories:{}},setup(d){const k=d,a=fe(_e(k.article)),x=v("content"),C=v(!1),P=v(!1),y=v(null),_=v(null),w=v(k.article.thumbnail||null),V=v(k.article.banner||null);function G(r){const u=r.target.files?.[0];if(u){a.thumbnail=u;const f=new FileReader;f.onload=T=>{w.value=T.target?.result},f.readAsDataURL(u)}}function z(r){const u=r.target.files?.[0];if(u){a.banner=u;const f=new FileReader;f.onload=T=>{V.value=T.target?.result},f.readAsDataURL(u)}}function O(){a.thumbnail=null,a.thumbnailUrl="",w.value=null,y.value&&(y.value.value="")}function N(){a.banner=null,a.bannerUrl="",V.value=null,_.value&&(_.value.value="")}ge(()=>a.data(),()=>{P.value=!0},{deep:!0});const D=v("");function K(){const r=D.value.trim();r&&!a.tags.includes(r)&&a.tags.push(r),D.value=""}function J(r){a.tags.splice(r,1)}function q(r){(r.key==="Enter"||r.key===",")&&(r.preventDefault(),K())}function $(r){r&&(a.status=r),C.value=!0,a.put(`/admin/articles/${k.article.id}`,{preserveScroll:!0,onSuccess:()=>{P.value=!1},onFinish:()=>{C.value=!1}})}function H(){confirm(`Apakah Anda yakin ingin menghapus artikel "${k.article.title}"?`)&&xe.delete(`/admin/articles/${k.article.id}`)}function W(){window.open(`/artikel/${k.article.slug}`,"_blank")}const Q=[{value:"content",label:"Konten",icon:"i-heroicons-document-text"},{value:"media",label:"Media",icon:"i-heroicons-photo"},{value:"seo",label:"SEO",icon:"i-heroicons-magnifying-glass"},{value:"settings",label:"Pengaturan",icon:"i-heroicons-cog-6-tooth"}],X=M(()=>a.metaDescription?.length||0),Y=M(()=>a.metaTitle?.length||0);function Z(r){return new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}return(r,e)=>{const u=ae,f=me,T=ce,p=de,ee=re,U=ne,m=ie,F=se,S=oe,I=te,L=le;return g(),h(R,null,[l(o(ve),{title:`Edit: ${d.article.title}`},null,8,["title"]),t("div",Te,[n(" Header "),t("div",Ue,[t("div",Se,[l(u,{icon:"i-heroicons-arrow-left",color:"neutral",variant:"ghost",to:"/admin/articles"}),t("div",null,[t("div",Ce,[e[21]||(e[21]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Edit Artikel",-1)),l(f,{color:o(Ve)(d.article.status),variant:"soft"},{default:i(()=>[b(c(o(we)(d.article.status)),1)]),_:1},8,["color"]),P.value?(g(),E(f,{key:0,color:"warning",variant:"soft"},{default:i(()=>[...e[20]||(e[20]=[b(" Belum disimpan ",-1)])]),_:1})):n("v-if",!0)]),t("p",De," Terakhir diubah: "+c(Z(d.article.updatedAt)),1)])]),t("div",$e,[l(u,{color:"neutral",variant:"soft",icon:"i-heroicons-eye",onClick:W},{default:i(()=>[...e[22]||(e[22]=[b(" Preview ",-1)])]),_:1}),l(T,{items:[[{label:d.article.status==="published"?"Jadikan Draft":"Publikasikan",icon:d.article.status==="published"?"i-heroicons-archive-box":"i-heroicons-paper-airplane",onSelect:()=>$(d.article.status==="published"?"draft":"published")},{label:"Arsipkan",icon:"i-heroicons-archive-box-arrow-down",onSelect:()=>$("archived"),disabled:d.article.status==="archived"}],[{label:"Hapus",icon:"i-heroicons-trash",color:"error",onSelect:H}]],content:{align:"end"},modal:!1},{default:i(()=>[l(u,{color:"neutral",variant:"outline",icon:"i-heroicons-ellipsis-vertical"})]),_:1},8,["items"]),l(u,{color:"primary",loading:C.value,disabled:C.value,icon:"i-heroicons-check",onClick:e[0]||(e[0]=s=>$())},{default:i(()=>[...e[23]||(e[23]=[b(" Simpan Perubahan ",-1)])]),_:1},8,["loading","disabled"])])]),n(" Article stats "),t("div",Ae,[l(p,{class:"text-center"},{default:i(()=>[e[24]||(e[24]=t("p",{class:"text-xs text-gray-500"},"Views",-1)),t("p",Be,c(d.article.viewCount.toLocaleString("id-ID")),1)]),_:1}),l(p,{class:"text-center"},{default:i(()=>[e[25]||(e[25]=t("p",{class:"text-xs text-gray-500"},"Likes",-1)),t("p",Pe,c(d.article.likeCount.toLocaleString("id-ID")),1)]),_:1}),l(p,{class:"text-center"},{default:i(()=>[e[26]||(e[26]=t("p",{class:"text-xs text-gray-500"},"Shares",-1)),t("p",Ie,c(d.article.shareCount.toLocaleString("id-ID")),1)]),_:1}),l(p,{class:"text-center"},{default:i(()=>[e[27]||(e[27]=t("p",{class:"text-xs text-gray-500"},"Waktu Baca",-1)),t("p",Ke,c(d.article.readTime)+" menit",1)]),_:1}),l(p,{class:"text-center"},{default:i(()=>[e[28]||(e[28]=t("p",{class:"text-xs text-gray-500"},"Blok Konten",-1)),t("p",Fe,c(o(a).blocks.length),1)]),_:1})]),n(" Tabs "),l(ee,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),items:Q},null,8,["modelValue"]),n(" Form "),t("form",{onSubmit:e[19]||(e[19]=be(s=>$(),["prevent"]))},[n(" Content Tab "),A(t("div",Le,[l(p,null,{default:i(()=>[t("div",je,[n(" Title "),l(m,{label:"Judul Artikel",required:"",error:o(a).errors.title},{default:i(()=>[l(U,{modelValue:o(a).title,"onUpdate:modelValue":e[2]||(e[2]=s=>o(a).title=s),placeholder:"Masukkan judul artikel...",size:"lg",class:ke([{"text-xl font-semibold":!0},"w-full"])},null,8,["modelValue"])]),_:1},8,["error"]),n(" Slug "),l(m,{label:"Slug (URL)",error:o(a).errors.slug},{default:i(()=>[l(U,{modelValue:o(a).slug,"onUpdate:modelValue":e[3]||(e[3]=s=>o(a).slug=s),placeholder:"url-artikel",icon:"i-heroicons-link",class:"w-full"},{leading:i(()=>[...e[29]||(e[29]=[t("span",{class:"text-sm text-gray-500"},"/artikel/",-1)])]),_:1},8,["modelValue"])]),_:1},8,["error"]),n(" Excerpt "),l(m,{label:"Ringkasan",error:o(a).errors.excerpt},{default:i(()=>[l(F,{modelValue:o(a).excerpt,"onUpdate:modelValue":e[4]||(e[4]=s=>o(a).excerpt=s),placeholder:"Tulis ringkasan singkat artikel (akan ditampilkan di daftar artikel)...",rows:3,class:"w-full"},null,8,["modelValue"])]),_:1},8,["error"])])]),_:1}),n(" Page Builder "),l(p,null,{header:i(()=>[t("div",Me,[e[30]||(e[30]=t("h3",{class:"font-semibold"},"Konten Artikel",-1)),l(f,{color:"info",variant:"soft"},{default:i(()=>[b(c(o(a).blocks.length)+" blok ",1)]),_:1})])]),default:i(()=>[l(ue,{modelValue:o(a).blocks,"onUpdate:modelValue":e[5]||(e[5]=s=>o(a).blocks=s),"upload-url":"/admin/articles/upload-image",class:"w-full"},null,8,["modelValue"])]),_:1})],512),[[B,x.value==="content"]]),n(" Media Tab "),A(t("div",Ee,[l(p,null,{header:i(()=>[...e[31]||(e[31]=[t("h3",{class:"font-semibold"},"Gambar Artikel",-1)])]),default:i(()=>[t("div",Re,[n(" Thumbnail "),l(m,{label:"Thumbnail",help:"Gambar yang ditampilkan di daftar artikel (rasio 16:9)"},{default:i(()=>[t("div",Ge,[t("input",{ref_key:"thumbnailInputRef",ref:y,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",class:"hidden",onChange:G},null,544),w.value?(g(),h("div",ze,[t("img",{src:w.value,alt:"Thumbnail",class:"h-full w-full object-cover"},null,8,Oe),l(u,{icon:"i-heroicons-x-mark",color:"error",variant:"solid",size:"xs",class:"absolute right-2 top-2",onClick:O})])):(g(),h("div",{key:1,class:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 transition-colors hover:border-primary-500 dark:border-gray-600",onClick:e[6]||(e[6]=s=>y.value?.click())},[l(S,{name:"i-heroicons-photo",class:"mb-2 h-8 w-8 text-gray-400"}),e[32]||(e[32]=t("span",{class:"text-sm text-gray-500"},"Klik untuk upload thumbnail",-1))])),l(u,{type:"button",color:"neutral",variant:"outline",size:"sm",onClick:e[7]||(e[7]=s=>y.value?.click())},{default:i(()=>[l(S,{name:"i-heroicons-arrow-up-tray",class:"mr-2 h-4 w-4"}),b(" "+c(w.value?"Ganti Thumbnail":"Upload Thumbnail"),1)]),_:1})])]),_:1}),n(" Banner "),l(m,{label:"Banner",help:"Gambar header yang ditampilkan di halaman artikel"},{default:i(()=>[t("div",Ne,[t("input",{ref_key:"bannerInputRef",ref:_,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",class:"hidden",onChange:z},null,544),V.value?(g(),h("div",Je,[t("img",{src:V.value,alt:"Banner",class:"h-full w-full object-cover"},null,8,qe),l(u,{icon:"i-heroicons-x-mark",color:"error",variant:"solid",size:"xs",class:"absolute right-2 top-2",onClick:N})])):(g(),h("div",{key:1,class:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 transition-colors hover:border-primary-500 dark:border-gray-600",onClick:e[8]||(e[8]=s=>_.value?.click())},[l(S,{name:"i-heroicons-photo",class:"mb-2 h-8 w-8 text-gray-400"}),e[33]||(e[33]=t("span",{class:"text-sm text-gray-500"},"Klik untuk upload banner",-1))])),l(u,{type:"button",color:"neutral",variant:"outline",size:"sm",onClick:e[9]||(e[9]=s=>_.value?.click())},{default:i(()=>[l(S,{name:"i-heroicons-arrow-up-tray",class:"mr-2 h-4 w-4"}),b(" "+c(V.value?"Ganti Banner":"Upload Banner"),1)]),_:1})])]),_:1})])]),_:1})],512),[[B,x.value==="media"]]),n(" SEO Tab "),A(t("div",He,[l(p,null,{header:i(()=>[...e[34]||(e[34]=[t("h3",{class:"font-semibold"},"Pengaturan SEO",-1)])]),default:i(()=>[t("div",We,[n(" Meta Title "),l(m,{label:"Meta Title",help:`${Y.value}/70 karakter`},{default:i(()=>[l(U,{modelValue:o(a).metaTitle,"onUpdate:modelValue":e[10]||(e[10]=s=>o(a).metaTitle=s),placeholder:"Judul untuk mesin pencari (kosongkan untuk menggunakan judul artikel)...",maxlength:70,class:"w-full"},null,8,["modelValue"])]),_:1},8,["help"]),n(" Meta Description "),l(m,{label:"Meta Description",help:`${X.value}/160 karakter`},{default:i(()=>[l(F,{modelValue:o(a).metaDescription,"onUpdate:modelValue":e[11]||(e[11]=s=>o(a).metaDescription=s),placeholder:"Deskripsi untuk mesin pencari (kosongkan untuk menggunakan ringkasan)...",rows:3,maxlength:160,class:"w-full"},null,8,["modelValue"])]),_:1},8,["help"]),n(" Meta Keywords "),l(m,{label:"Meta Keywords"},{default:i(()=>[l(U,{modelValue:o(a).metaKeywords,"onUpdate:modelValue":e[12]||(e[12]=s=>o(a).metaKeywords=s),placeholder:"kata kunci, dipisah, koma...",class:"w-full"},null,8,["modelValue"])]),_:1}),n(" SEO Preview "),t("div",Qe,[e[35]||(e[35]=t("p",{class:"mb-2 text-xs text-gray-500"},"Preview di Google:",-1)),t("div",Xe,[t("p",Ye,c(o(a).metaTitle||o(a).title||"Judul Artikel"),1),t("p",Ze," https://ogitu.com/artikel/"+c(o(a).slug||"url-artikel"),1),t("p",el,c(o(a).metaDescription||o(a).excerpt||"Deskripsi artikel akan muncul di sini..."),1)])])])]),_:1})],512),[[B,x.value==="seo"]]),n(" Settings Tab "),A(t("div",ll,[t("div",tl,[n(" Category & Tags "),l(p,null,{header:i(()=>[...e[36]||(e[36]=[t("h3",{class:"font-semibold"},"Kategori & Tags",-1)])]),default:i(()=>[t("div",al,[n(" Category "),l(m,{label:"Kategori",required:"",error:o(a).errors.category},{default:i(()=>[l(I,{modelValue:o(a).category,"onUpdate:modelValue":e[13]||(e[13]=s=>o(a).category=s),items:d.categories,"label-key":"label","value-key":"value",placeholder:"Pilih kategori...",class:"w-full",portal:!1},null,8,["modelValue","items"])]),_:1},8,["error"]),n(" Tags "),l(m,{label:"Tags"},{default:i(()=>[t("div",ol,[t("div",sl,[l(U,{modelValue:D.value,"onUpdate:modelValue":e[14]||(e[14]=s=>D.value=s),placeholder:"Tambah tag...",class:"flex-1 w-full",onKeydown:q},null,8,["modelValue"]),l(u,{icon:"i-heroicons-plus",color:"primary",variant:"soft",onClick:K})]),o(a).tags.length>0?(g(),h("div",il,[(g(!0),h(R,null,he(o(a).tags,(s,j)=>(g(),E(f,{key:j,color:"neutral",variant:"soft",class:"cursor-pointer",onClick:ul=>J(j)},{default:i(()=>[b(c(s)+" ",1),l(S,{name:"i-heroicons-x-mark",class:"ml-1 h-3 w-3"})]),_:2},1032,["onClick"]))),128))])):n("v-if",!0)])]),_:1})])]),_:1}),n(" Author & Options "),l(p,null,{header:i(()=>[...e[37]||(e[37]=[t("h3",{class:"font-semibold"},"Pengaturan Lainnya",-1)])]),default:i(()=>[t("div",nl,[n(" Author "),l(m,{label:"Penulis"},{default:i(()=>[l(I,{modelValue:o(a).authorId,"onUpdate:modelValue":e[15]||(e[15]=s=>o(a).authorId=s),items:d.authors.map(s=>({value:s.id,label:s.fullName})),"label-key":"label","value-key":"value",placeholder:"Pilih penulis...",class:"w-full",portal:!1},null,8,["modelValue","items"])]),_:1}),n(" Status "),l(m,{label:"Status"},{default:i(()=>[l(I,{modelValue:o(a).status,"onUpdate:modelValue":e[16]||(e[16]=s=>o(a).status=s),items:[{value:"draft",label:"Draft"},{value:"published",label:"Dipublikasikan"},{value:"archived",label:"Diarsipkan"}],"label-key":"label","value-key":"value",class:"w-full",portal:!1},null,8,["modelValue"])]),_:1}),n(" Options "),t("div",rl,[l(L,{modelValue:o(a).isFeatured,"onUpdate:modelValue":e[17]||(e[17]=s=>o(a).isFeatured=s),label:"Artikel Unggulan",help:"Artikel ini akan ditampilkan di bagian unggulan"},null,8,["modelValue"]),l(L,{modelValue:o(a).isPinned,"onUpdate:modelValue":e[18]||(e[18]=s=>o(a).isPinned=s),label:"Sematkan di Atas",help:"Artikel ini akan selalu muncul di atas daftar"},null,8,["modelValue"])])])]),_:1})])],512),[[B,x.value==="settings"]])],32)])],64)}}});export{Dl as default};
