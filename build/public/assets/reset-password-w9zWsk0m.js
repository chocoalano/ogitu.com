import{_ as V,g as K}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as z,a as F}from"./Button-CI_-soaG.js";import{d as N,h as d,c as C,a as l,j as t,b as e,f as o,w as v,k as _,F as S,t as b,D as R,n as T,o as n}from"./app-CyjtdGoI.js";import{_ as U}from"./default.vue_vue_type_script_setup_true_lang-CxtMHnvj.js";import"./Modal-Bgd8PL5Y.js";import"./Badge-DfumusWV.js";import"./DropdownMenu-DxuVXSbh.js";import"./Checkbox-9qpvU9Db.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Label-yeknIWsP.js";const $={class:"min-h-screen flex"},I={class:"hidden lg:flex lg:w-1/2 bg-linear-to-br from-purple-600 via-pink-600 to-orange-500 relative overflow-hidden"},E={class:"relative z-10 flex flex-col justify-center items-center text-white p-12"},O={class:"w-24 h-24 bg-white/20 backdrop-blur-sm rounded-3xl flex items-center justify-center mb-8 shadow-2xl"},X={class:"space-y-6 w-full max-w-sm"},A={class:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-2xl p-4"},D={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},G={class:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-2xl p-4"},J={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},H={class:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-2xl p-4"},W={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},q={class:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-gray-950 p-4 sm:p-8"},Q={class:"w-full max-w-md"},Y={class:"lg:hidden text-center mb-8"},Z={class:"w-16 h-16 bg-linear-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-purple-500/30"},ee={key:0,class:"text-center"},se={class:"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-2xl flex items-center justify-center mx-auto mb-6"},te={class:"text-center mb-8"},ae={class:"w-20 h-20 bg-linear-to-br from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 rounded-2xl flex items-center justify-center mx-auto mb-4"},oe={class:"font-semibold text-purple-600 dark:text-purple-400"},re={key:0,class:"mb-6 p-4 rounded-xl bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800"},le={class:"flex items-center gap-3"},ne={class:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center"},ie={class:"text-sm text-green-700 dark:text-green-400"},de={key:0,class:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"},ce={class:"flex items-center gap-3"},ue={class:"w-8 h-8 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},me={class:"text-sm text-red-700 dark:text-red-400"},pe={class:"space-y-2"},ge={key:0,class:"text-xs text-amber-600"},xe={class:"space-y-2"},we={key:0,class:"text-xs text-red-500"},he={key:1,class:"space-y-2"},fe={class:"flex items-center justify-between text-xs"},ve={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},be={class:"mt-8 text-center text-sm text-gray-600 dark:text-gray-400"},ke={href:"/login",class:"font-semibold text-primary-600 hover:text-primary-500"},Ke=N({layout:U,__name:"reset-password",props:{email:{},token:{}},setup(p){const g=p,k=K(),c=d(!1),u=d(""),x=d(""),w=d(!1),h=d(!1),a=d({password:"",passwordConfirmation:""}),y=C(()=>a.value.passwordConfirmation?a.value.password===a.value.passwordConfirmation:!0),P=C(()=>g.email&&g.token&&a.value.password.length>=8&&y.value),B=()=>{const i=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return i?decodeURIComponent(i[1]):""},L=async()=>{if(!(!P.value||c.value)){u.value="",x.value="",c.value=!0;try{const s=await(await fetch("/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":B()},body:JSON.stringify({email:g.email,token:g.token,password:a.value.password})})).json();s.success?(x.value=s.message||"Password berhasil direset!",k.success(s.message||"Password berhasil direset!"),setTimeout(()=>{window.location.href="/login"},2e3)):(u.value=s.message||"Gagal mereset password",k.error(s.message||"Gagal mereset password"))}catch(i){console.error("Reset password error:",i),u.value="Terjadi kesalahan, silakan coba lagi",k.error("Terjadi kesalahan, silakan coba lagi")}finally{c.value=!1}}},M=()=>{window.location.href="/forgot-password"};return(i,s)=>{const r=z,f=F,j=V;return n(),l("div",$,[t(" Left Side - Decorative "),e("div",I,[t(" Background Pattern "),s[9]||(s[9]=e("div",{class:"absolute inset-0 opacity-10"},[e("div",{class:"absolute top-20 left-20 w-72 h-72 bg-white rounded-full blur-3xl"}),e("div",{class:"absolute bottom-20 right-20 w-96 h-96 bg-white rounded-full blur-3xl"}),e("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-white rounded-full blur-2xl"})],-1)),t(" Content "),e("div",E,[t(" Logo "),e("div",O,[o(r,{name:"i-heroicons-bolt",class:"w-14 h-14 text-white"})]),s[7]||(s[7]=e("h1",{class:"text-4xl font-bold mb-4 text-center"},"Buat Password Baru",-1)),s[8]||(s[8]=e("p",{class:"text-xl text-white/80 mb-12 text-center"},"Langkah terakhir untuk mengamankan akun Anda",-1)),t(" Security Tips "),e("div",X,[e("div",A,[e("div",D,[o(r,{name:"i-heroicons-check-circle",class:"w-6 h-6"})]),s[4]||(s[4]=e("div",null,[e("div",{class:"font-semibold"},"Minimal 8 Karakter"),e("div",{class:"text-sm text-white/70"},"Password yang lebih panjang lebih aman")],-1))]),e("div",G,[e("div",J,[o(r,{name:"i-heroicons-shield-check",class:"w-6 h-6"})]),s[5]||(s[5]=e("div",null,[e("div",{class:"font-semibold"},"Kombinasi Unik"),e("div",{class:"text-sm text-white/70"},"Gunakan huruf, angka, dan simbol")],-1))]),e("div",H,[e("div",W,[o(r,{name:"i-heroicons-eye-slash",class:"w-6 h-6"})]),s[6]||(s[6]=e("div",null,[e("div",{class:"font-semibold"},"Jaga Kerahasiaan"),e("div",{class:"text-sm text-white/70"},"Jangan bagikan password kepada siapapun")],-1))])])])]),t(" Right Side - Form "),e("div",q,[e("div",Q,[t(" Mobile Logo "),e("div",Y,[e("div",Z,[o(r,{name:"i-heroicons-bolt",class:"w-9 h-9 text-white"})]),s[10]||(s[10]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Reset Password",-1))]),t(" Invalid Token Warning "),!p.email||!p.token?(n(),l("div",ee,[e("div",se,[o(r,{name:"i-heroicons-exclamation-triangle",class:"w-10 h-10 text-red-500"})]),s[12]||(s[12]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Link Tidak Valid ",-1)),s[13]||(s[13]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Link reset password tidak valid atau sudah kadaluarsa. Silakan minta link baru. ",-1)),o(f,{color:"primary",size:"lg",class:"rounded-xl bg-linear-to-r from-purple-500 to-pink-600",onClick:M},{default:v(()=>[o(r,{name:"i-heroicons-arrow-path",class:"w-5 h-5 mr-2"}),s[11]||(s[11]=_(" Minta Link Baru ",-1))]),_:1})])):(n(),l(S,{key:1},[t(" Reset Password Form "),e("div",null,[t(" Header "),e("div",te,[e("div",ae,[o(r,{name:"i-heroicons-lock-closed",class:"w-10 h-10 text-green-600 dark:text-green-400"})]),s[14]||(s[14]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Buat Password Baru ",-1)),s[15]||(s[15]=e("p",{class:"mt-2 text-gray-600 dark:text-gray-400"}," Masukkan password baru untuk akun ",-1)),e("p",oe,b(p.email),1)]),t(" Success Message "),x.value?(n(),l("div",re,[e("div",le,[e("div",ne,[o(r,{name:"i-heroicons-check-circle",class:"w-5 h-5 text-green-500"})]),e("div",null,[e("span",ie,b(x.value),1),s[16]||(s[16]=e("p",{class:"text-xs text-green-600 dark:text-green-500 mt-1"},"Mengalihkan ke halaman login...",-1))])])])):(n(),l(S,{key:1},[t(" Form "),e("form",{onSubmit:R(L,["prevent"]),class:"space-y-6"},[t(" Error Alert "),u.value?(n(),l("div",de,[e("div",ce,[e("div",ue,[o(r,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-red-500"})]),e("span",me,b(u.value),1)])])):t("v-if",!0),t(" New Password "),e("div",pe,[s[17]||(s[17]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Password Baru",-1)),o(j,{modelValue:a.value.password,"onUpdate:modelValue":s[1]||(s[1]=m=>a.value.password=m),type:w.value?"text":"password",placeholder:"Minimal 8 karakter",icon:"i-heroicons-lock-closed",size:"lg",class:"w-full",autocomplete:"new-password",ui:{rounded:"rounded-xl"}},{trailing:v(()=>[o(f,{icon:w.value?"i-heroicons-eye-slash":"i-heroicons-eye",color:"neutral",variant:"ghost",size:"xs",onClick:s[0]||(s[0]=m=>w.value=!w.value)},null,8,["icon"])]),_:1},8,["modelValue","type"]),a.value.password&&a.value.password.length<8?(n(),l("p",ge," Password minimal 8 karakter ")):t("v-if",!0)]),t(" Confirm Password "),e("div",xe,[s[18]||(s[18]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Konfirmasi Password",-1)),o(j,{modelValue:a.value.passwordConfirmation,"onUpdate:modelValue":s[3]||(s[3]=m=>a.value.passwordConfirmation=m),type:h.value?"text":"password",placeholder:"Ulangi password baru",icon:"i-heroicons-lock-closed",size:"lg",class:"w-full",autocomplete:"new-password",color:y.value?void 0:"error",ui:{rounded:"rounded-xl"}},{trailing:v(()=>[o(f,{icon:h.value?"i-heroicons-eye-slash":"i-heroicons-eye",color:"neutral",variant:"ghost",size:"xs",onClick:s[2]||(s[2]=m=>h.value=!h.value)},null,8,["icon"])]),_:1},8,["modelValue","type","color"]),y.value?t("v-if",!0):(n(),l("p",we," Password tidak cocok "))]),t(" Password Strength Indicator "),a.value.password?(n(),l("div",he,[e("div",fe,[s[19]||(s[19]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Kekuatan Password",-1)),e("span",{class:T([a.value.password.length>=12?"text-green-500":a.value.password.length>=8?"text-amber-500":"text-red-500"])},b(a.value.password.length>=12?"Kuat":a.value.password.length>=8?"Sedang":"Lemah"),3)]),e("div",ve,[e("div",{class:T(["h-full transition-all rounded-full",[a.value.password.length>=12?"bg-green-500 w-full":a.value.password.length>=8?"bg-amber-500 w-2/3":"bg-red-500 w-1/3"]])},null,2)])])):t("v-if",!0),t(" Submit Button "),o(f,{type:"submit",color:"primary",size:"lg",block:"",loading:c.value,disabled:!P.value||c.value,class:"rounded-xl h-12 bg-linear-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700"},{default:v(()=>[o(r,{name:"i-heroicons-check-circle",class:"w-5 h-5 mr-2"}),s[20]||(s[20]=_(" Reset Password ",-1))]),_:1},8,["loading","disabled"])],32)],2112)),t(" Back to Login "),e("p",be,[e("a",ke,[o(r,{name:"i-heroicons-arrow-left",class:"w-4 h-4 inline mr-1"}),s[21]||(s[21]=_(" Kembali ke Login ",-1))])])])],2112))])])])}}});export{Ke as default};
