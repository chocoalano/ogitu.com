import{A as J}from"./admin-BzR6vrex.js";import{_ as R,a as V}from"./Button-CI_-soaG.js";import{d as j,c as S,a as i,F as y,r as I,e as L,w as q,j as t,b as e,n as f,f as n,t as c,u as x,m as T,o as r,k as U,h as $,q as N,x as Q,J as E}from"./app-CyjtdGoI.js";import{_ as W}from"./Badge-DfumusWV.js";import"./ColorModeButton-Bf7Nr8w3.js";import"./Tooltip-BrTR-Vq7.js";const H=m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(m),F=m=>new Intl.NumberFormat("id-ID").format(m),K=m=>{const s=new Date(m),l=new Date().getTime()-s.getTime(),d=Math.floor(l/6e4),o=Math.floor(l/36e5),h=Math.floor(l/864e5);return d<1?"Baru saja":d<60?`${d} menit lalu`:o<24?`${o} jam lalu`:h<7?`${h} hari lalu`:s.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})},X=m=>({pending:"warning",pending_payment:"warning",paid:"info",processing:"primary",shipped:"secondary",delivered:"success",completed:"success",cancelled:"error",refunded:"neutral",failed:"error"})[m]||"neutral",Y=m=>({pending:"Pending",pending_payment:"Menunggu Pembayaran",paid:"Dibayar",processing:"Diproses",shipped:"Dikirim",delivered:"Selesai",completed:"Selesai",cancelled:"Dibatalkan",refunded:"Refund",failed:"Gagal"})[m]||m,Z={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},ee={class:"relative"},te={class:"flex items-start justify-between"},se={class:"mt-4"},ae={class:"text-sm text-slate-500 dark:text-slate-400"},oe={class:"text-2xl font-bold text-slate-900 dark:text-white mt-1"},re={class:"text-xs text-slate-400 mt-1"},le=j({__name:"DashboardStatsCards",props:{stats:{}},setup(m){const s=m,a=S(()=>[{label:"Total Produk",value:F(s.stats.totalProducts),subValue:`${F(s.stats.activeProducts)} produk aktif`,icon:"i-heroicons-cube",gradient:"from-violet-500 to-purple-600",bgGradient:"from-violet-500/10 to-purple-600/10",to:"/admin/products"},{label:"Total Pesanan",value:F(s.stats.totalOrders),subValue:`${F(s.stats.pendingOrders)} perlu diproses`,icon:"i-heroicons-shopping-cart",gradient:"from-fuchsia-500 to-pink-600",bgGradient:"from-fuchsia-500/10 to-pink-600/10",to:"/admin/orders"},{label:"Total Pendapatan",value:H(s.stats.totalRevenue),subValue:"Sepanjang waktu",icon:"i-heroicons-wallet",gradient:"from-emerald-500 to-teal-600",bgGradient:"from-emerald-500/10 to-teal-600/10",to:"/admin/finance"},{label:"Bulan Ini",value:H(s.stats.monthlyRevenue),subValue:"Pendapatan bulan ini",icon:"i-heroicons-chart-bar-square",gradient:"from-amber-500 to-orange-600",bgGradient:"from-amber-500/10 to-orange-600/10",to:"/admin/analytics"}]);return(l,d)=>{const o=R;return r(),i("div",Z,[(r(!0),i(y,null,I(a.value,h=>(r(),L(x(T),{key:h.label,href:h.to,class:"group relative p-5 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 hover:border-violet-300 dark:hover:border-violet-700 hover:shadow-xl hover:shadow-violet-500/10 transition-all overflow-hidden"},{default:q(()=>[t(" Background gradient overlay "),e("div",{class:f(["absolute inset-0 bg-linear-to-br opacity-0 group-hover:opacity-100 transition-opacity",h.bgGradient])},null,2),e("div",ee,[e("div",te,[e("div",{class:f(["w-12 h-12 rounded-xl flex items-center justify-center bg-linear-to-br shadow-lg",h.gradient])},[n(o,{name:h.icon,class:"w-6 h-6 text-white"},null,8,["name"])],2),n(o,{name:"i-heroicons-arrow-up-right",class:"w-5 h-5 text-slate-400 group-hover:text-violet-500 transition-colors"})]),e("div",se,[e("p",ae,c(h.label),1),e("p",oe,c(h.value),1),e("p",re,c(h.subValue),1)])])]),_:2},1032,["href"]))),128))])}}}),ne={class:"grid grid-cols-2 lg:grid-cols-4 gap-4"},ie={class:"relative flex flex-col items-center text-center"},de={class:"font-semibold text-slate-900 dark:text-white"},ce={class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},ue=j({__name:"DashboardQuickActions",setup(m){const s=[{label:"Tambah Produk Baru",description:"Device, liquid, atau aksesoris",icon:"i-heroicons-plus-circle",to:"/admin/products/create",gradient:"from-violet-600 to-fuchsia-600"},{label:"Proses Pesanan",description:"Lihat pesanan masuk",icon:"i-heroicons-inbox-stack",to:"/admin/orders?status=paid",gradient:"from-blue-600 to-cyan-600"},{label:"Buat Promo",description:"Diskon & voucher toko",icon:"i-heroicons-tag",to:"/admin/promotions",gradient:"from-pink-600 to-rose-600"},{label:"Tarik Saldo",description:"Cairkan pendapatan",icon:"i-heroicons-banknotes",to:"/admin/finance/withdraw",gradient:"from-emerald-600 to-teal-600"}];return(a,l)=>{const d=R;return r(),i("div",ne,[(r(),i(y,null,I(s,o=>n(x(T),{key:o.label,href:o.to,class:"group relative p-5 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 hover:border-transparent hover:shadow-xl transition-all overflow-hidden"},{default:q(()=>[t(" Hover gradient border effect "),e("div",{class:f(["absolute inset-0 bg-linear-to-br opacity-0 group-hover:opacity-100 transition-opacity -z-10",o.gradient]),style:{margin:"-1px","border-radius":"inherit"}},null,2),l[0]||(l[0]=e("div",{class:"absolute inset-px bg-white dark:bg-slate-900 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),e("div",ie,[e("div",{class:f(["w-14 h-14 rounded-2xl flex items-center justify-center mb-3 bg-linear-to-br transition-transform group-hover:scale-110",o.gradient])},[n(d,{name:o.icon,class:"w-7 h-7 text-white"},null,8,["name"])],2),e("span",de,c(o.label),1),e("span",ce,c(o.description),1)])]),_:2},1032,["href"])),64))])}}}),me={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800"},he={class:"flex items-center justify-between p-5 border-b border-slate-200 dark:border-slate-800"},pe={class:"flex items-center gap-3"},ve={class:"w-10 h-10 rounded-xl bg-linear-to-br from-violet-500 to-fuchsia-600 flex items-center justify-center"},fe={key:0,class:"divide-y divide-slate-100 dark:divide-slate-800"},xe={class:"flex items-center gap-4"},be={class:"w-10 h-10 bg-linear-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-800 rounded-xl flex items-center justify-center overflow-hidden"},ge=["src","alt"],_e={class:"font-medium text-slate-900 dark:text-white"},ye={class:"flex items-center gap-2 text-sm text-slate-500"},ke={class:"text-right"},we={class:"font-semibold text-slate-900 dark:text-white"},$e={class:"flex items-center gap-2 justify-end mt-1"},Se={class:"text-xs text-slate-400 mt-1"},Ce={class:"p-12 text-center"},je={class:"w-20 h-20 bg-linear-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-2xl flex items-center justify-center mx-auto mb-4"},Pe=j({__name:"DashboardRecentOrders",props:{orders:{}},setup(m){return(s,a)=>{const l=R,d=W;return r(),i("div",me,[t(" Header "),e("div",he,[e("div",pe,[e("div",ve,[n(l,{name:"i-heroicons-shopping-cart",class:"w-5 h-5 text-white"})]),a[0]||(a[0]=e("h2",{class:"font-semibold text-slate-900 dark:text-white"},"Pesanan Terbaru",-1))]),n(x(T),{href:"/admin/orders",class:"text-sm text-violet-600 hover:text-violet-500 font-medium flex items-center gap-1"},{default:q(()=>[a[1]||(a[1]=U(" Lihat Semua ",-1)),n(l,{name:"i-heroicons-arrow-right",class:"w-4 h-4"})]),_:1})]),t(" Orders List "),m.orders&&m.orders.length>0?(r(),i("div",fe,[(r(!0),i(y,null,I(m.orders,o=>(r(),L(x(T),{key:o.id,href:`/admin/orders/${o.id}`,class:"flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},{default:q(()=>[e("div",xe,[t(" Customer Avatar "),e("div",be,[o.customerAvatar?(r(),i("img",{key:0,src:o.customerAvatar,alt:o.customerName,class:"w-full h-full object-cover"},null,8,ge)):(r(),L(l,{key:1,name:"i-heroicons-user",class:"w-5 h-5 text-slate-400"}))]),e("div",null,[e("p",_e,c(o.orderNumber),1),e("div",ye,[e("span",null,c(o.customerName),1),a[2]||(a[2]=e("span",{class:"w-1 h-1 bg-slate-300 rounded-full"},null,-1)),e("span",null,c(o.itemCount)+" item",1)])])]),e("div",ke,[e("p",we,c(x(H)(o.total)),1),e("div",$e,[n(d,{color:x(X)(o.status),variant:"subtle",size:"xs"},{default:q(()=>[U(c(x(Y)(o.status)),1)]),_:2},1032,["color"])]),e("p",Se,c(x(K)(o.createdAt)),1)])]),_:2},1032,["href"]))),128))])):(r(),i(y,{key:1},[t(" Empty State "),e("div",Ce,[e("div",je,[n(l,{name:"i-heroicons-inbox",class:"w-10 h-10 text-slate-400"})]),a[3]||(a[3]=e("p",{class:"text-slate-500 dark:text-slate-400 font-medium"},"Belum ada pesanan",-1)),a[4]||(a[4]=e("p",{class:"text-sm text-slate-400 mt-1"},"Pesanan baru akan muncul di sini",-1))])],2112))])}}}),De={class:"p-5 bg-linear-to-br from-violet-500/10 to-fuchsia-500/10 border border-violet-500/20 rounded-2xl"},Be={class:"flex items-start gap-3"},Me={class:"w-10 h-10 rounded-xl bg-linear-to-br from-violet-500 to-fuchsia-600 flex items-center justify-center shrink-0"},Ae={class:"text-sm text-violet-600 dark:text-violet-400 mt-1"},qe=j({__name:"DashboardTipsCard",setup(m){const s=["Upload foto produk dengan background bersih dan pencahayaan yang baik","Lengkapi spesifikasi produk seperti wattage, kapasitas tank, dan coil resistance","Berikan deskripsi rasa liquid secara detail untuk membantu customer","Pastikan stok selalu update untuk menghindari pembatalan pesanan",'Tambahkan label "Best Seller" pada produk terlaris untuk menarik pembeli',"Respond chat pembeli dalam waktu 15 menit untuk rating yang lebih baik","Gunakan foto produk asli untuk meningkatkan kepercayaan pembeli","Update harga secara berkala agar tetap kompetitif di pasar"],a=S(()=>{const d=new Date().toDateString().split("").reduce((o,h)=>o+h.charCodeAt(0),0);return s[d%s.length]});return(l,d)=>{const o=R;return r(),i("div",De,[e("div",Be,[e("div",Me,[n(o,{name:"i-heroicons-light-bulb",class:"w-5 h-5 text-white"})]),e("div",null,[d[0]||(d[0]=e("p",{class:"font-semibold text-violet-700 dark:text-violet-300"},"ðŸ’¡ Tips Admin",-1)),e("p",Ae,c(a.value),1)])])])}}}),Re={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-5"},Ie={class:"grid grid-cols-2 gap-2"},Oe={key:0,class:"flex justify-center"},Te={class:"flex justify-center"},Fe={class:"flex justify-center"},Le={class:"flex justify-center"},Ue={class:"text-xs text-slate-600 dark:text-slate-400 mt-2 group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors font-medium"},ze=j({__name:"DashboardProductCategories",setup(m){const s=[{label:"Device/Mod",to:"/admin/products?category=device",color:"from-violet-500 to-purple-600"},{label:"Liquid",to:"/admin/products?category=liquid",color:"from-blue-500 to-cyan-600"},{label:"Coil",to:"/admin/products?category=coil",color:"from-orange-500 to-red-600"},{label:"Aksesoris",to:"/admin/products?category=accessories",color:"from-emerald-500 to-teal-600"}];return(a,l)=>(r(),i("div",Re,[l[4]||(l[4]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3"},"Kategori Produk",-1)),e("div",Ie,[(r(),i(y,null,I(s,d=>n(x(T),{key:d.label,href:d.to,class:"p-3 rounded-xl bg-slate-100 dark:bg-slate-800 hover:bg-violet-100 dark:hover:bg-violet-900/20 transition-all text-center group"},{default:q(()=>[t(" Device/Mod Icon - Vape Box Mod "),d.label==="Device/Mod"?(r(),i("div",Oe,[e("div",{class:f(["w-10 h-10 rounded-xl bg-linear-to-br flex items-center justify-center group-hover:scale-110 transition-transform",d.color])},[...l[0]||(l[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t(" Vape mod body "),e("rect",{x:"7",y:"2",width:"10",height:"20",rx:"2",ry:"2"}),t(" Screen "),e("rect",{x:"9",y:"5",width:"6",height:"4",rx:"1"}),t(" Fire button "),e("circle",{cx:"12",cy:"13",r:"2"}),t(" Battery indicator "),e("line",{x1:"10",y1:"18",x2:"14",y2:"18"})],-1)])],2)])):d.label==="Liquid"?(r(),i(y,{key:1},[t(" Liquid Icon - E-Liquid Bottle "),e("div",Te,[e("div",{class:f(["w-10 h-10 rounded-xl bg-linear-to-br flex items-center justify-center group-hover:scale-110 transition-transform",d.color])},[...l[1]||(l[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t(" Bottle body "),e("path",{d:"M10 2h4v4l2 2v12a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V8l2-2V2z"}),t(" Dropper tip "),e("path",{d:"M10 2h4v2h-4z"}),t(" Liquid level "),e("path",{d:"M8 14h8"}),t(" Droplet "),e("circle",{cx:"12",cy:"17",r:"1"})],-1)])],2)])],2112)):d.label==="Coil"?(r(),i(y,{key:2},[t(" Coil Icon - Heating Coil "),e("div",Fe,[e("div",{class:f(["w-10 h-10 rounded-xl bg-linear-to-br flex items-center justify-center group-hover:scale-110 transition-transform",d.color])},[...l[2]||(l[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t(" Coil spiral "),e("path",{d:"M12 4c-2 0-4 1-4 3s2 3 4 3 4 1 4 3-2 3-4 3"}),t(" Heat waves "),e("path",{d:"M8 2v2"}),e("path",{d:"M16 2v2"}),e("path",{d:"M8 20v2"}),e("path",{d:"M16 20v2"}),t(" Center pin "),e("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),e("line",{x1:"12",y1:"2",x2:"12",y2:"4"})],-1)])],2)])],2112)):(r(),i(y,{key:3},[t(" Accessories Icon - Tools/Parts "),e("div",Le,[e("div",{class:f(["w-10 h-10 rounded-xl bg-linear-to-br flex items-center justify-center group-hover:scale-110 transition-transform",d.color])},[...l[3]||(l[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t(" Battery "),e("rect",{x:"4",y:"8",width:"16",height:"8",rx:"2"}),e("line",{x1:"22",y1:"10",x2:"22",y2:"14"}),t(" Plus sign "),e("line",{x1:"8",y1:"12",x2:"10",y2:"12"}),t(" Minus sign "),e("line",{x1:"14",y1:"12",x2:"16",y2:"12"})],-1)])],2)])],2112)),e("p",Ue,c(d.label),1)]),_:2},1032,["href"])),64))])]))}}),He={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},Ve={class:"p-4 border-b border-slate-200 dark:border-slate-800"},Ne={class:"flex items-center justify-between"},Qe={class:"flex items-center gap-2"},Ee={class:"w-8 h-8 rounded-lg bg-linear-to-br from-cyan-500 to-blue-600 flex items-center justify-center"},Ge={class:"flex items-center gap-2"},Je={class:"p-4 space-y-4"},We={key:0,class:"flex items-center justify-center py-8"},Ke={class:"flex flex-col items-center justify-center py-6 text-center"},Xe={class:"text-sm text-slate-500 dark:text-slate-400"},Ye={class:"space-y-2"},Ze={class:"flex items-center gap-3"},et={class:"font-medium text-sm text-slate-900 dark:text-white"},tt={class:"text-xs text-slate-500 dark:text-slate-400"},st={class:"text-right"},at={key:0,class:"text-xs text-slate-400 mt-1"},ot={class:"grid grid-cols-2 gap-3"},rt={class:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},lt={class:"flex items-center gap-2 mb-2"},nt={class:"flex items-end gap-2"},it={class:"text-lg font-bold text-slate-900 dark:text-white"},dt={class:"text-xs text-slate-400 mb-0.5"},ct={class:"mt-2 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},ut={class:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},mt={class:"flex items-center gap-2 mb-2"},ht={class:"flex items-end gap-2"},pt={class:"text-lg font-bold text-slate-900 dark:text-white"},vt=j({__name:"DashboardHealthWidget",setup(m){const s=$(null),a=$(!0),l=$(null);let d=null;const o=async()=>{try{l.value=null;const p=await(await fetch("/admin/api/health")).json();p.success?s.value=p.data:l.value=p.message||"Failed to fetch health data"}catch{l.value="Failed to connect to server"}finally{a.value=!1}},h=async()=>{await o()},w=S(()=>{if(!s.value)return"unknown";const k=Object.values(s.value.services);return k.some(p=>p.status==="unhealthy")?"unhealthy":k.some(p=>p.status==="degraded")?"degraded":"healthy"}),A={healthy:{color:"text-emerald-500",bg:"bg-emerald-500/10",border:"border-emerald-500/20",icon:"i-heroicons-check-circle",label:"Sehat"},degraded:{color:"text-amber-500",bg:"bg-amber-500/10",border:"border-amber-500/20",icon:"i-heroicons-exclamation-triangle",label:"Degradasi"},unhealthy:{color:"text-red-500",bg:"bg-red-500/10",border:"border-red-500/20",icon:"i-heroicons-x-circle",label:"Tidak Sehat"},unknown:{color:"text-gray-500",bg:"bg-gray-500/10",border:"border-gray-500/20",icon:"i-heroicons-question-mark-circle",label:"Unknown"}},v=k=>A[k]||A.unknown,P=k=>{const p=Math.floor(k/86400),g=Math.floor(k%86400/3600),C=Math.floor(k%3600/60);return p>0?`${p}h ${g}j ${C}m`:g>0?`${g}j ${C}m`:`${C}m`},z=S(()=>s.value?[{key:"database",name:"Database",icon:"i-heroicons-circle-stack",...s.value.services.database},{key:"redis",name:"Redis",icon:"i-heroicons-server",...s.value.services.redis},{key:"queue",name:"Queue",icon:"i-heroicons-queue-list",...s.value.services.queue}]:[]);return N(()=>{o(),d=setInterval(o,3e4)}),Q(()=>{d&&clearInterval(d)}),(k,p)=>{const g=R,C=V;return r(),i("div",He,[t(" Header "),e("div",Ve,[e("div",Ne,[e("div",Qe,[e("div",Ee,[n(g,{name:"i-heroicons-heart",class:"w-4 h-4 text-white"})]),p[0]||(p[0]=e("h3",{class:"font-semibold text-slate-900 dark:text-white"},"System Health",-1))]),e("div",Ge,[t(" Overall status badge "),s.value?(r(),i("span",{key:0,class:f(["inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",v(w.value).bg,v(w.value).color])},[n(g,{name:v(w.value).icon,class:"w-3 h-3"},null,8,["name"]),U(" "+c(v(w.value).label),1)],2)):t("v-if",!0),n(C,{icon:"i-heroicons-arrow-path",color:"neutral",variant:"ghost",size:"xs",loading:a.value,onClick:h},null,8,["loading"])])])]),t(" Content "),e("div",Je,[t(" Loading state "),a.value&&!s.value?(r(),i("div",We,[n(g,{name:"i-heroicons-arrow-path",class:"w-6 h-6 text-slate-400 animate-spin"})])):l.value?(r(),i(y,{key:1},[t(" Error state "),e("div",Ke,[n(g,{name:"i-heroicons-exclamation-circle",class:"w-10 h-10 text-red-400 mb-2"}),e("p",Xe,c(l.value),1),n(C,{label:"Coba Lagi",color:"primary",variant:"ghost",size:"xs",class:"mt-2",onClick:h})])],2112)):s.value?(r(),i(y,{key:2},[t(" Health data "),t(" Services Status "),e("div",Ye,[(r(!0),i(y,null,I(z.value,_=>(r(),i("div",{key:_.key,class:f(["flex items-center justify-between p-3 rounded-xl",v(_.status).bg,"border",v(_.status).border])},[e("div",Ze,[n(g,{name:_.icon,class:f(["w-5 h-5",v(_.status).color])},null,8,["name","class"]),e("div",null,[e("p",et,c(_.name),1),e("p",tt,c(_.message),1)])]),e("div",st,[n(g,{name:v(_.status).icon,class:f(["w-5 h-5",v(_.status).color])},null,8,["name","class"]),_.latency?(r(),i("p",at,c(_.latency)+"ms ",1)):t("v-if",!0)])],2))),128))]),t(" Memory & Uptime "),e("div",ot,[t(" Memory "),e("div",rt,[e("div",lt,[n(g,{name:"i-heroicons-cpu-chip",class:"w-4 h-4 text-slate-400"}),p[1]||(p[1]=e("span",{class:"text-xs font-medium text-slate-500 dark:text-slate-400"},"Memory",-1))]),e("div",nt,[e("span",it,c(s.value.memory.percentage)+"% ",1),e("span",dt,c(s.value.memory.used)+"MB / "+c(s.value.memory.total)+"MB ",1)]),e("div",ct,[e("div",{class:f(["h-full rounded-full transition-all",s.value.memory.percentage>80?"bg-red-500":s.value.memory.percentage>60?"bg-amber-500":"bg-emerald-500"]),style:E({width:`${s.value.memory.percentage}%`})},null,6)])]),t(" Uptime "),e("div",ut,[e("div",mt,[n(g,{name:"i-heroicons-clock",class:"w-4 h-4 text-slate-400"}),p[2]||(p[2]=e("span",{class:"text-xs font-medium text-slate-500 dark:text-slate-400"},"Uptime",-1))]),e("div",ht,[e("span",pt,c(P(s.value.uptime)),1)]),p[3]||(p[3]=e("p",{class:"text-xs text-slate-400 mt-2"},"Server aktif",-1))])])],64)):t("v-if",!0)])])}}}),ft={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},xt={class:"p-4 border-b border-slate-200 dark:border-slate-800"},bt={class:"flex items-center justify-between"},gt={class:"flex items-center gap-2"},_t={class:"w-8 h-8 rounded-lg bg-linear-to-br from-violet-500 to-purple-600 flex items-center justify-center"},yt={class:"flex items-center gap-2"},kt={class:"p-4 space-y-4"},wt={key:0,class:"flex items-center justify-center py-8"},$t={class:"flex flex-col items-center justify-center py-6 text-center"},St={class:"text-sm text-slate-500 dark:text-slate-400"},Ct={class:"grid grid-cols-3 gap-2"},jt={class:"p-3 bg-blue-50 dark:bg-blue-500/10 rounded-xl text-center"},Pt={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},Dt={class:"p-3 bg-violet-50 dark:bg-violet-500/10 rounded-xl text-center"},Bt={class:"text-2xl font-bold text-violet-600 dark:text-violet-400"},Mt={class:"p-3 bg-emerald-50 dark:bg-emerald-500/10 rounded-xl text-center"},At={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},qt={class:"grid grid-cols-2 gap-3"},Rt={class:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl"},It={class:"flex items-center justify-between"},Ot={class:"mt-2 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},Tt={class:"p-3 bg-red-50 dark:bg-red-500/10 rounded-xl"},Ft={class:"flex items-center justify-between"},Lt={class:"text-sm font-bold text-red-500"},Ut={class:"text-xs text-slate-400 mt-2"},zt={key:0,class:"space-y-3 pt-2 border-t border-slate-200 dark:border-slate-700"},Ht={class:"flex flex-wrap gap-2"},Vt={key:0,class:"mt-3 space-y-2 max-h-48 overflow-y-auto"},Nt={class:"flex items-start justify-between gap-2"},Qt={class:"flex-1 min-w-0"},Et={class:"font-medium text-slate-700 dark:text-slate-300 truncate"},Gt={class:"text-red-500 truncate"},Jt={class:"text-slate-400"},Wt={class:"flex items-center gap-1 shrink-0"},Kt={key:1,class:"text-sm text-slate-400 text-center py-2"},Xt=j({__name:"DashboardQueueWidget",props:{isSuperAdmin:{type:Boolean}},setup(m){const s=m,a=$(null),l=$([]),d=$(!0),o=$(!1),h=$(null),w=$(!1);let A=null;const v=async()=>{try{h.value=null;const u=await(await fetch("/admin/api/queue-stats")).json();u.success?a.value=u.data:h.value=u.message||"Failed to fetch queue stats"}catch{h.value="Failed to connect to server"}finally{d.value=!1}},P=async()=>{try{const u=await(await fetch("/admin/queue/email/failed")).json();u.success&&(l.value=u.data)}catch(b){console.error("Failed to fetch failed jobs:",b)}},z=async b=>{if(s.isSuperAdmin){o.value=!0;try{(await(await fetch(`/admin/queue/email/retry/${b}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json()).success&&(await v(),await P())}catch(u){console.error("Failed to retry job:",u)}finally{o.value=!1}}},k=async b=>{if(s.isSuperAdmin){o.value=!0;try{(await(await fetch(`/admin/queue/email/job/${b}`,{method:"DELETE"})).json()).success&&(await v(),await P())}catch(u){console.error("Failed to remove job:",u)}finally{o.value=!1}}},p=async()=>{if(!s.isSuperAdmin||!a.value)return;o.value=!0;const b=a.value.email.isPaused?"resume":"pause";try{(await(await fetch(`/admin/queue/email/${b}`,{method:"POST"})).json()).success&&await v()}catch(u){console.error(`Failed to ${b} queue:`,u)}finally{o.value=!1}},g=async()=>{if(s.isSuperAdmin){o.value=!0;try{(await(await fetch("/admin/queue/email/clean",{method:"POST"})).json()).success&&(await v(),await P())}catch(b){console.error("Failed to clean queue:",b)}finally{o.value=!1}}},C=S(()=>a.value?a.value.email.isPaused?"paused":a.value.email.failed>0?"warning":a.value.email.active>0?"processing":"idle":"unknown"),_={processing:{color:"text-blue-500",bg:"bg-blue-500/10",border:"border-blue-500/20",icon:"i-heroicons-arrow-path",label:"Processing",animate:!0},idle:{color:"text-emerald-500",bg:"bg-emerald-500/10",border:"border-emerald-500/20",icon:"i-heroicons-check-circle",label:"Idle",animate:!1},warning:{color:"text-amber-500",bg:"bg-amber-500/10",border:"border-amber-500/20",icon:"i-heroicons-exclamation-triangle",label:"Warning",animate:!1},paused:{color:"text-orange-500",bg:"bg-orange-500/10",border:"border-orange-500/20",icon:"i-heroicons-pause-circle",label:"Paused",animate:!1},unknown:{color:"text-gray-500",bg:"bg-gray-500/10",border:"border-gray-500/20",icon:"i-heroicons-question-mark-circle",label:"Unknown",animate:!1}},O=S(()=>_[C.value]||_.unknown);return N(()=>{v(),s.isSuperAdmin&&P(),A=setInterval(()=>{v(),s.isSuperAdmin&&w.value&&P()},15e3)}),Q(()=>{A&&clearInterval(A)}),(b,u)=>{const D=R,B=V;return r(),i("div",ft,[t(" Header "),e("div",xt,[e("div",bt,[e("div",gt,[e("div",_t,[n(D,{name:"i-heroicons-queue-list",class:"w-4 h-4 text-white"})]),u[1]||(u[1]=e("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Email Queue",-1))]),e("div",yt,[t(" Status badge "),a.value?(r(),i("span",{key:0,class:f(["inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",O.value.bg,O.value.color])},[n(D,{name:O.value.icon,class:f(["w-3 h-3",O.value.animate?"animate-spin":""])},null,8,["name","class"]),U(" "+c(O.value.label),1)],2)):t("v-if",!0),n(B,{icon:"i-heroicons-arrow-path",color:"neutral",variant:"ghost",size:"xs",loading:d.value,onClick:v},null,8,["loading"])])])]),t(" Content "),e("div",kt,[t(" Loading state "),d.value&&!a.value?(r(),i("div",wt,[n(D,{name:"i-heroicons-arrow-path",class:"w-6 h-6 text-slate-400 animate-spin"})])):h.value?(r(),i(y,{key:1},[t(" Error state "),e("div",$t,[n(D,{name:"i-heroicons-exclamation-circle",class:"w-10 h-10 text-red-400 mb-2"}),e("p",St,c(h.value),1),n(B,{label:"Coba Lagi",color:"primary",variant:"ghost",size:"xs",class:"mt-2",onClick:v})])],2112)):a.value?(r(),i(y,{key:2},[t(" Queue Stats "),t(" Stats Grid "),e("div",Ct,[e("div",jt,[e("p",Pt,c(a.value.email.waiting),1),u[2]||(u[2]=e("p",{class:"text-xs text-blue-500/80 dark:text-blue-400/80"},"Menunggu",-1))]),e("div",Dt,[e("p",Bt,c(a.value.email.active),1),u[3]||(u[3]=e("p",{class:"text-xs text-violet-500/80 dark:text-violet-400/80"},"Aktif",-1))]),e("div",Mt,[e("p",At,c(a.value.email.completed),1),u[4]||(u[4]=e("p",{class:"text-xs text-emerald-500/80 dark:text-emerald-400/80"},"Selesai",-1))])]),t(" Additional stats "),e("div",qt,[e("div",Rt,[e("div",It,[u[5]||(u[5]=e("span",{class:"text-sm text-slate-600 dark:text-slate-400"},"Success Rate",-1)),e("span",{class:f(["text-sm font-bold",a.value.totals.successRate>=90?"text-emerald-500":a.value.totals.successRate>=70?"text-amber-500":"text-red-500"])},c(a.value.totals.successRate)+"% ",3)]),e("div",Ot,[e("div",{class:f(["h-full rounded-full transition-all",a.value.totals.successRate>=90?"bg-emerald-500":a.value.totals.successRate>=70?"bg-amber-500":"bg-red-500"]),style:E({width:`${a.value.totals.successRate}%`})},null,6)])]),e("div",Tt,[e("div",Ft,[u[6]||(u[6]=e("span",{class:"text-sm text-slate-600 dark:text-slate-400"},"Failed",-1)),e("span",Lt,c(a.value.email.failed),1)]),e("p",Ut,c(a.value.email.delayed)+" tertunda ",1)])]),t(" SuperAdmin Actions "),m.isSuperAdmin?(r(),i("div",zt,[u[7]||(u[7]=e("p",{class:"text-xs font-medium text-slate-500 uppercase"},"Queue Management",-1)),e("div",Ht,[n(B,{icon:a.value.email.isPaused?"i-heroicons-play":"i-heroicons-pause",label:a.value.email.isPaused?"Resume":"Pause",color:a.value.email.isPaused?"success":"warning",variant:"soft",size:"xs",loading:o.value,onClick:p},null,8,["icon","label","color","loading"]),n(B,{icon:"i-heroicons-trash",label:"Clean",color:"neutral",variant:"soft",size:"xs",loading:o.value,onClick:g},null,8,["loading"]),a.value.email.failed>0?(r(),L(B,{key:0,icon:"i-heroicons-eye",label:`Failed (${a.value.email.failed})`,color:"error",variant:"soft",size:"xs",onClick:u[0]||(u[0]=M=>w.value=!w.value)},null,8,["label"])):t("v-if",!0)]),t(" Failed Jobs List "),w.value&&l.value.length>0?(r(),i("div",Vt,[(r(!0),i(y,null,I(l.value,M=>(r(),i("div",{key:M.id,class:"p-2 bg-red-50 dark:bg-red-500/10 rounded-lg text-xs"},[e("div",Nt,[e("div",Qt,[e("p",Et,c(M.name),1),e("p",Gt,c(M.failedReason),1),e("p",Jt,"Attempts: "+c(M.attemptsMade),1)]),e("div",Wt,[n(B,{icon:"i-heroicons-arrow-path",color:"primary",variant:"ghost",size:"xs",loading:o.value,onClick:G=>z(M.id)},null,8,["loading","onClick"]),n(B,{icon:"i-heroicons-trash",color:"error",variant:"ghost",size:"xs",loading:o.value,onClick:G=>k(M.id)},null,8,["loading","onClick"])])])]))),128))])):w.value&&l.value.length===0?(r(),i("p",Kt," Tidak ada job yang gagal ")):t("v-if",!0)])):t("v-if",!0)],64)):t("v-if",!0)])])}}}),Yt={class:"space-y-6"},Zt={class:"flex items-center justify-between"},es={class:"text-gray-500 dark:text-gray-400"},ts={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ss={class:"lg:col-span-2 space-y-6"},as={class:"space-y-6"},cs=j({layout:J,__name:"dashboard",props:{user:{default:()=>({id:0,fullName:"Admin",email:"",role:"admin"})},stats:{default:()=>({totalProducts:0,totalOrders:0,totalCustomers:0,totalCategories:0,pendingReviews:0,monthlyRevenue:0,ordersByStatus:{}})},recentOrders:{default:()=>[]}},setup(m){const s=m,a=S(()=>s.user.role==="superadmin"),l=S(()=>({totalProducts:s.stats.totalProducts,activeProducts:s.stats.totalProducts,draftProducts:0,outOfStockProducts:0,totalOrders:s.stats.totalOrders,pendingOrders:s.stats.ordersByStatus?.pending||0,processingOrders:s.stats.ordersByStatus?.processing||0,shippedOrders:s.stats.ordersByStatus?.shipped||0,deliveredOrders:s.stats.ordersByStatus?.delivered||0,cancelledOrders:s.stats.ordersByStatus?.cancelled||0,totalRevenue:s.stats.monthlyRevenue,monthlyRevenue:s.stats.monthlyRevenue,weeklyRevenue:0,todayRevenue:0})),d=S(()=>s.recentOrders.map(o=>({...o,customerAvatar:null,itemCount:1})));return(o,h)=>(r(),i("div",Yt,[t(" Page Header "),e("div",Zt,[e("div",null,[h[0]||(h[0]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Dashboard",-1)),e("p",es," Selamat datang kembali, "+c(s.user.fullName),1)])]),t(" Stats Cards "),n(x(le),{stats:l.value},null,8,["stats"]),t(" Quick Actions "),n(x(ue)),t(" Content Grid "),e("div",ts,[t(" Left Column - Recent Orders "),e("div",ss,[t(" Recent Orders "),n(x(Pe),{orders:d.value},null,8,["orders"])]),t(" Right Column - System Info & Tips "),e("div",as,[t(" System Health Widget "),n(x(vt)),t(" Queue Widget "),n(x(Xt),{"is-super-admin":a.value},null,8,["is-super-admin"]),t(" Tips Card "),n(x(qe)),t(" Product Categories "),n(x(ze))])])]))}});export{cs as default};
