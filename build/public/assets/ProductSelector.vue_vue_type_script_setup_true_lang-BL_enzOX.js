import{a as H,_ as M}from"./Button-CI_-soaG.js";import{_ as O}from"./Checkbox-9qpvU9Db.js";import{_ as Q}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as R}from"./Badge-DfumusWV.js";import{_ as q}from"./Switch-sBWkdoVy.js";import{d as G,h as v,y as b,c as w,a as i,j as n,b as s,f as c,F as _,t as f,w as h,k as I,r as C,e as A,D as P,n as J,o as l}from"./app-CyjtdGoI.js";const K={class:"space-y-4"},X={class:"flex items-center justify-between p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Y={key:0,class:"space-y-2"},Z={class:"flex items-center justify-between"},ee={class:"font-medium text-gray-900 dark:text-white"},te={class:"flex flex-wrap gap-2"},se={class:"mr-1"},ae={class:"space-y-3"},oe={class:"flex items-center gap-2"},le={class:"max-h-64 overflow-y-auto space-y-2 border border-gray-200 dark:border-gray-700 rounded-lg p-3"},re=["onClick"],ne=["src","alt"],ie={class:"flex-1 min-w-0"},de={class:"font-medium text-gray-900 dark:text-white truncate text-sm"},ce={class:"text-xs text-gray-500 dark:text-gray-400"},ue={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},he=G({__name:"ProductSelector",props:{products:{},selectedIds:{},appliesToAll:{type:Boolean}},emits:["update:selectedIds","update:appliesToAll"],setup(y,{emit:S}){const r=y,d=S,u=v(""),a=v([...r.selectedIds]),m=v(r.appliesToAll);b(()=>r.selectedIds,e=>{a.value=[...e]}),b(()=>r.appliesToAll,e=>{m.value=e});const k=w(()=>u.value?r.products.filter(e=>e.name.toLowerCase().includes(u.value.toLowerCase())):r.products),p=w(()=>r.products.filter(e=>a.value.includes(e.id))),x=e=>a.value.includes(e),T=e=>{const t=a.value.indexOf(e);t===-1?a.value.push(e):a.value.splice(t,1),d("update:selectedIds",a.value)},U=e=>{a.value=a.value.filter(t=>t!==e),d("update:selectedIds",a.value)},B=()=>{a.value=r.products.map(e=>e.id),d("update:selectedIds",a.value)},V=()=>{a.value=[],d("update:selectedIds",a.value)},$=e=>{m.value=e,d("update:appliesToAll",e),e&&(a.value=[],d("update:selectedIds",[]))},N=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),D=e=>!e||e==="/images/placeholder.png"?"https://placehold.co/100x100/1a1a2e/ffffff?text=No+Image":(e.startsWith("http://")||e.startsWith("https://"),e);return(e,t)=>{const j=q,g=H,z=R,F=Q,L=O,W=M;return l(),i("div",K,[n(" Applies to all toggle "),s("div",X,[t[2]||(t[2]=s("div",null,[s("p",{class:"font-medium text-gray-900 dark:text-white"},"Berlaku untuk semua produk"),s("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Promosi akan berlaku untuk semua produk di platform ")],-1)),c(j,{"model-value":m.value,"onUpdate:modelValue":$},null,8,["model-value"])]),n(" Product selection (only shown when not applies to all) "),m.value?n("v-if",!0):(l(),i(_,{key:0},[n(" Selected products summary "),p.value.length>0?(l(),i("div",Y,[s("div",Z,[s("p",ee,f(p.value.length)+" produk dipilih ",1),c(g,{size:"xs",color:"neutral",variant:"ghost",onClick:V},{default:h(()=>[...t[3]||(t[3]=[I(" Hapus Semua ",-1)])]),_:1})]),s("div",te,[(l(!0),i(_,null,C(p.value,o=>(l(),A(z,{key:o.id,color:"primary",variant:"soft",class:"pr-1"},{default:h(()=>[s("span",se,f(o.name),1),c(g,{size:"2xs",color:"primary",variant:"ghost",icon:"i-heroicons-x-mark",padded:!1,onClick:P(E=>U(o.id),["stop"])},null,8,["onClick"])]),_:2},1024))),128))])])):n("v-if",!0),n(" Search and product list "),s("div",ae,[s("div",oe,[c(F,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),placeholder:"Cari produk...",icon:"i-heroicons-magnifying-glass",class:"flex-1"},null,8,["modelValue"]),p.value.length<y.products.length?(l(),A(g,{key:0,size:"sm",color:"neutral",variant:"ghost",onClick:B},{default:h(()=>[...t[4]||(t[4]=[I(" Pilih Semua ",-1)])]),_:1})):n("v-if",!0)]),s("div",le,[(l(!0),i(_,null,C(k.value,o=>(l(),i("div",{key:o.id,class:J(["flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors",{"bg-primary-50 dark:bg-primary-900/20":x(o.id)}]),onClick:E=>T(o.id)},[c(L,{"model-value":x(o.id),onClick:t[1]||(t[1]=P(()=>{},["stop"]))},null,8,["model-value"]),s("img",{src:D(o.image),alt:o.name,class:"w-10 h-10 rounded object-cover bg-gray-100 dark:bg-gray-800"},null,8,ne),s("div",ie,[s("p",de,f(o.name),1),s("p",ce,f(N(o.price)),1)])],10,re))),128)),k.value.length===0?(l(),i("div",ue,[c(W,{name:"i-heroicons-inbox",class:"w-8 h-8 mx-auto mb-2"}),t[5]||(t[5]=s("p",null,"Tidak ada produk ditemukan",-1))])):n("v-if",!0)])])],64))])}}});export{he as _};
