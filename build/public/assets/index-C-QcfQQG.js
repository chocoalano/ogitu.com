import{_ as z}from"./Card-BjL1m_sW.js";import{a as H,_ as I}from"./Button-CI_-soaG.js";import{_ as M}from"./DropdownMenu-DxuVXSbh.js";import{_ as E}from"./Switch-sBWkdoVy.js";import{_ as K}from"./Badge-DfumusWV.js";import{d as O,h as u,a as m,j as i,b as t,f as o,w as c,k as b,u as w,m as $,o as f,F as Q,r as q,t as d,l as v}from"./app-CyjtdGoI.js";import{A as G}from"./admin-BzR6vrex.js";import{_ as J,a as R,b as W,c as X}from"./DeleteConfirmModal.vue_vue_type_script_setup_true_lang-D464v-fQ.js";import{_ as Y}from"./PromotionStatusBadge.vue_vue_type_script_setup_true_lang-DYYiyx6A.js";import"./ColorModeButton-Bf7Nr8w3.js";import"./Label-yeknIWsP.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Tooltip-BrTR-Vq7.js";import"./SelectMenu-DKAhKU-v.js";import"./index-v4g8wp86.js";import"./Modal-Bgd8PL5Y.js";const Z={class:"p-6 space-y-6"},tt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},et={class:"overflow-x-auto"},at={class:"w-full"},st={class:"divide-y divide-gray-200 dark:divide-gray-700"},ot={class:"px-4 py-4"},lt={class:"font-medium text-gray-900 dark:text-white"},it={class:"text-sm text-gray-500 dark:text-gray-400"},nt={class:"px-4 py-4"},rt={class:"px-4 py-4"},dt={class:"font-semibold text-gray-900 dark:text-white"},ut={class:"px-4 py-4"},ct={class:"text-sm"},pt={class:"text-gray-900 dark:text-white"},mt={class:"text-gray-500 dark:text-gray-400"},ft={class:"px-4 py-4"},gt={class:"text-sm"},yt={class:"text-gray-900 dark:text-white"},xt={key:0,class:"text-gray-500 dark:text-gray-400"},vt={class:"px-4 py-4"},_t={class:"px-4 py-4"},ht={class:"flex items-center justify-end gap-2"},kt={key:0},bt={colspan:"7",class:"px-4 py-12 text-center"},Dt={class:"flex flex-col items-center"},wt={key:0,class:"px-4 pb-4"},Kt=O({layout:G,__name:"index",props:{discounts:{},pagination:{},stats:{},filters:{}},setup(l){const _=l,n=u(_.filters.status||"all"),p=u(_.filters.search),r=u(_.filters.type||"all"),y=u(!1),x=u(!1),g=u(null),h=u(!1),S=[{label:"Semua Tipe",value:"all"},{label:"Persentase",value:"percentage"},{label:"Nominal",value:"fixed"}],P=s=>[[{label:"Lihat Detail",icon:"i-heroicons-eye",to:`/admin/promotions/discounts/${s.id}`},{label:"Edit",icon:"i-heroicons-pencil",to:`/admin/promotions/discounts/${s.id}/edit`}],[{label:"Hapus",icon:"i-heroicons-trash",color:"error",onSelect:()=>A(s)}]],U=()=>{y.value=!0;const s={};n.value&&n.value!=="all"&&(s.status=n.value),p.value&&(s.search=p.value),r.value&&r.value!=="all"&&(s.type=r.value),v.get("/admin/promotions/discounts",s,{preserveState:!0,preserveScroll:!0,onFinish:()=>{y.value=!1}})},B=s=>{y.value=!0;const e={page:s};n.value&&n.value!=="all"&&(e.status=n.value),p.value&&(e.search=p.value),r.value&&r.value!=="all"&&(e.type=r.value),v.get("/admin/promotions/discounts",e,{preserveState:!0,preserveScroll:!0,onFinish:()=>{y.value=!1}})},C=s=>{v.post(`/admin/promotions/discounts/${s.id}/toggle`,{},{preserveScroll:!0})},A=s=>{g.value=s,x.value=!0},F=()=>{g.value&&(h.value=!0,v.delete(`/admin/promotions/discounts/${g.value.id}`,{preserveScroll:!0,onFinish:()=>{h.value=!1,x.value=!1,g.value=null}}))},D=s=>new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});return(s,e)=>{const k=H,L=K,T=E,N=M,V=I,j=z;return f(),m("div",Z,[i(" Header "),t("div",tt,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Diskon Produk"),t("p",{class:"text-gray-500 dark:text-gray-400"}," Kelola diskon yang berlaku untuk customer di seluruh platform ")],-1)),o(w($),{href:"/admin/promotions/discounts/create"},{default:c(()=>[o(k,{icon:"i-heroicons-plus",color:"primary"},{default:c(()=>[...e[4]||(e[4]=[b(" Buat Diskon ",-1)])]),_:1})]),_:1})]),i(" Stats "),o(J,{stats:l.stats,type:"discount"},null,8,["stats"]),i(" Filters "),o(R,{status:n.value,"onUpdate:status":e[0]||(e[0]=a=>n.value=a),search:p.value,"onUpdate:search":e[1]||(e[1]=a=>p.value=a),type:r.value,"onUpdate:type":e[2]||(e[2]=a=>r.value=a),"show-type-filter":"","type-options":S,onFilter:U},null,8,["status","search","type"]),i(" Discounts Table "),o(j,{ui:{body:{padding:""}}},{default:c(()=>[t("div",et,[t("table",at,[e[8]||(e[8]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Nama Diskon "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Tipe "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Nilai "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Periode "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Penggunaan "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Status "),t("th",{class:"px-4 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400"}," Aksi ")])],-1)),t("tbody",st,[(f(!0),m(Q,null,q(l.discounts,a=>(f(),m("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/50"},[t("td",ot,[t("div",null,[t("p",lt,d(a.name),1),t("p",it,d(a.appliesToAll?"Semua produk":`${a.productCount} produk`),1)])]),t("td",nt,[o(L,{color:a.type==="percentage"?"primary":"info",variant:"soft",size:"sm"},{default:c(()=>[b(d(a.typeLabel),1)]),_:2},1032,["color"])]),t("td",rt,[t("span",dt,d(a.valueDisplay),1)]),t("td",ut,[t("div",ct,[t("p",pt,d(D(a.startDate)),1),t("p",mt," s/d "+d(D(a.endDate)),1)])]),t("td",ft,[t("div",gt,[t("p",yt,d(a.usageCount)+" kali ",1),a.usageLimit?(f(),m("p",xt," dari "+d(a.usageLimit),1)):i("v-if",!0)])]),t("td",vt,[o(Y,{status:a.status},null,8,["status"])]),t("td",_t,[t("div",ht,[o(T,{"model-value":!!a.isActive,size:"sm","onUpdate:modelValue":$t=>C(a)},null,8,["model-value","onUpdate:modelValue"]),o(N,{items:P(a)},{default:c(()=>[o(k,{icon:"i-heroicons-ellipsis-vertical",color:"neutral",variant:"ghost",size:"sm"})]),_:1},8,["items"])])])]))),128)),l.discounts.length===0?(f(),m("tr",kt,[t("td",bt,[t("div",Dt,[o(V,{name:"i-heroicons-tag",class:"w-12 h-12 text-gray-300 dark:text-gray-600 mb-4"}),e[7]||(e[7]=t("p",{class:"text-gray-500 dark:text-gray-400 mb-4"},"Belum ada diskon",-1)),o(w($),{href:"/admin/promotions/discounts/create"},{default:c(()=>[o(k,{icon:"i-heroicons-plus",color:"primary",variant:"soft"},{default:c(()=>[...e[6]||(e[6]=[b(" Buat Diskon Pertama ",-1)])]),_:1})]),_:1})])])])):i("v-if",!0)])])]),i(" Pagination "),l.discounts.length>0?(f(),m("div",wt,[o(W,{"current-page":l.pagination.currentPage,"last-page":l.pagination.lastPage,total:l.pagination.total,"per-page":l.pagination.perPage,onPageChange:B},null,8,["current-page","last-page","total","per-page"])])):i("v-if",!0)]),_:1}),i(" Delete Modal "),o(X,{show:x.value,title:"Hapus Diskon",message:`Apakah Anda yakin ingin menghapus diskon '${g.value?.name}'? Tindakan ini tidak dapat dibatalkan.`,loading:h.value,onClose:e[3]||(e[3]=a=>x.value=!1),onConfirm:F},null,8,["show","message","loading"])])}}});export{Kt as default};
