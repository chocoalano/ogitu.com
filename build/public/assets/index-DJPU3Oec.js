import{_ as A,a as O,b as H}from"./Button-CI_-soaG.js";import{_ as M}from"./Badge-DfumusWV.js";import{d as P,c as N,a as h,j as s,b as e,f as r,w as p,k as y,t as g,F as z,r as j,J as S,n as E,o as u,h as b,y as K,L as q,e as B,l as V,q as G,x as J,u as Q}from"./app-CyjtdGoI.js";import{A as W}from"./admin-BzR6vrex.js";import{_ as X}from"./SelectMenu-DKAhKU-v.js";import{_ as Y}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as Z}from"./Modal-Bgd8PL5Y.js";import{_ as ee}from"./FormField-qFQ_28ZO.js";import{_ as te}from"./Textarea-CZyY9J1c.js";import{_ as ae}from"./Pagination-97jdZAo5.js";import{_ as se}from"./Select-D6kv-Jzs.js";import{a as re}from"./use_transmit-DG2L_GE5.js";import"./Tooltip-BrTR-Vq7.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./index-v4g8wp86.js";import"./Label-yeknIWsP.js";const le={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 h-full"},oe={class:"group relative bg-linear-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden"},ie={class:"relative z-10"},ne={class:"flex items-start justify-between mb-3"},de={class:"p-3 rounded-lg bg-white/20 backdrop-blur-sm"},ue={class:"text-3xl font-bold text-white mb-1"},ce={class:"group relative bg-linear-to-br from-yellow-400 to-orange-500 dark:from-yellow-500 dark:to-orange-600 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden"},ge={class:"relative z-10"},me={class:"flex items-start justify-between mb-3"},ve={class:"p-3 rounded-lg bg-white/20 backdrop-blur-sm"},he={class:"flex gap-0.5"},fe={class:"text-3xl font-bold text-white mb-1"},xe={class:"group relative bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 border border-gray-200 dark:border-gray-700"},we={class:"relative z-10"},pe={class:"flex items-start justify-between mb-3"},ye={class:"p-3 rounded-lg bg-orange-100 dark:bg-orange-900/30 group-hover:scale-110 transition-transform duration-300"},be={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1"},ke={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"},_e={class:"group relative bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 border border-gray-200 dark:border-gray-700"},$e={class:"relative z-10"},Re={class:"flex items-start justify-between mb-3"},Se={class:"p-3 rounded-lg bg-green-100 dark:bg-green-900/30 group-hover:scale-110 transition-transform duration-300"},Pe={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1"},Ce={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"},ze=P({__name:"ReviewStatsCards",props:{stats:{}},setup(t){const o=t,n=N(()=>o.stats.total===0?0:(o.stats.approved/o.stats.total*100).toFixed(1)),i=N(()=>o.stats.total===0?0:(o.stats.pending/o.stats.total*100).toFixed(0));return(f,l)=>{const m=A,d=M;return u(),h("div",le,[s(" Total Reviews with gradient "),e("div",oe,[s(" Background decoration "),l[2]||(l[2]=e("div",{class:"absolute -right-8 -bottom-8 w-32 h-32 bg-white/10 rounded-full group-hover:scale-110 transition-transform duration-300"},null,-1)),l[3]||(l[3]=e("div",{class:"absolute -right-4 -top-4 w-24 h-24 bg-white/5 rounded-full group-hover:scale-110 transition-transform duration-300"},null,-1)),e("div",ie,[e("div",ne,[e("div",de,[r(m,{name:"i-heroicons-chat-bubble-left-right",class:"w-6 h-6 text-white"})]),r(d,{color:"white",variant:"solid",size:"xs",class:"text-blue-600"},{default:p(()=>[...l[0]||(l[0]=[y(" Total ",-1)])]),_:1})]),e("div",null,[e("p",ue,g(t.stats.total.toLocaleString()),1),l[1]||(l[1]=e("p",{class:"text-sm text-blue-100"},"Total Review",-1))])])]),s(" Average Rating with stars "),e("div",ce,[s(" Background decoration "),l[5]||(l[5]=e("div",{class:"absolute -right-8 -bottom-8 w-32 h-32 bg-white/10 rounded-full group-hover:scale-110 transition-transform duration-300"},null,-1)),l[6]||(l[6]=e("div",{class:"absolute -right-4 -top-4 w-24 h-24 bg-white/5 rounded-full group-hover:scale-110 transition-transform duration-300"},null,-1)),e("div",ge,[e("div",me,[e("div",ve,[r(m,{name:"i-heroicons-star-solid",class:"w-6 h-6 text-white"})]),e("div",he,[(u(),h(z,null,j(5,w=>r(m,{key:w,name:"i-heroicons-star-solid",class:E(["w-3 h-3",w<=Math.round(t.stats.averageRating)?"text-white":"text-white/30"])},null,8,["class"])),64))])]),e("div",null,[e("p",fe,g(t.stats.averageRating.toFixed(1)),1),l[4]||(l[4]=e("p",{class:"text-sm text-orange-100"},"Rating Rata-rata",-1))])])]),s(" Pending Reviews with progress "),e("div",xe,[e("div",we,[e("div",pe,[e("div",ye,[r(m,{name:"i-heroicons-clock",class:"w-6 h-6 text-orange-600 dark:text-orange-400"})]),r(d,{color:"orange",variant:"soft",size:"xs"},{default:p(()=>[y(g(i.value)+"% ",1)]),_:1})]),e("div",null,[e("p",be,g(t.stats.pending),1),l[7]||(l[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-3"},"Menunggu Persetujuan",-1)),s(" Progress bar "),e("div",ke,[e("div",{class:"h-full bg-linear-to-r from-orange-400 to-orange-600 rounded-full transition-all duration-500",style:S({width:`${i.value}%`})},null,4)])])])]),s(" Approved Reviews with success indicator "),e("div",_e,[e("div",$e,[e("div",Re,[e("div",Se,[r(m,{name:"i-heroicons-check-circle",class:"w-6 h-6 text-green-600 dark:text-green-400"})]),r(d,{color:"green",variant:"soft",size:"xs"},{default:p(()=>[y(g(n.value)+"% ",1)]),_:1})]),e("div",null,[e("p",Pe,g(t.stats.approved),1),l[8]||(l[8]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-3"},"Telah Disetujui",-1)),s(" Progress bar "),e("div",Ce,[e("div",{class:"h-full bg-linear-to-r from-green-400 to-green-600 rounded-full transition-all duration-500",style:S({width:`${n.value}%`})},null,4)])])])])])}}}),Ie={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700 h-full flex flex-col"},Ue={class:"space-y-1.5 flex-1 flex flex-col justify-center"},Be={class:"flex items-center gap-2"},Ae={class:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Ve={class:"text-xs text-gray-600 dark:text-gray-400 w-6 text-right"},je={class:"flex items-center gap-2"},Fe={class:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Me={class:"text-xs text-gray-600 dark:text-gray-400 w-6 text-right"},De={class:"flex items-center gap-2"},Te={class:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Ne={class:"text-xs text-gray-600 dark:text-gray-400 w-6 text-right"},Le={class:"flex items-center gap-2"},Oe={class:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Ee={class:"text-xs text-gray-600 dark:text-gray-400 w-6 text-right"},Ke={class:"flex items-center gap-2"},He={class:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},qe={class:"text-xs text-gray-600 dark:text-gray-400 w-6 text-right"},Ge=P({__name:"ReviewRatingDistribution",props:{stats:{}},setup(t){const o=(n,i)=>i===0?0:Math.round(n/i*100);return(n,i)=>{const f=A;return u(),h("div",Ie,[i[5]||(i[5]=e("h3",{class:"font-semibold text-gray-900 dark:text-white mb-3 text-sm"},"Distribusi Rating",-1)),e("div",Ue,[s(" 5 Stars "),e("div",Be,[i[0]||(i[0]=e("span",{class:"text-xs text-gray-600 dark:text-gray-400 w-4"},"5",-1)),r(f,{name:"i-heroicons-star-solid",class:"w-3.5 h-3.5 text-yellow-500"}),e("div",Ae,[e("div",{class:"h-full bg-yellow-500 rounded-full transition-all duration-300",style:S({width:`${o(t.stats.fiveStars,t.stats.total)}%`})},null,4)]),e("span",Ve,g(t.stats.fiveStars),1)]),s(" 4 Stars "),e("div",je,[i[1]||(i[1]=e("span",{class:"text-xs text-gray-600 dark:text-gray-400 w-4"},"4",-1)),r(f,{name:"i-heroicons-star-solid",class:"w-3.5 h-3.5 text-yellow-500"}),e("div",Fe,[e("div",{class:"h-full bg-yellow-500 rounded-full transition-all duration-300",style:S({width:`${o(t.stats.fourStars,t.stats.total)}%`})},null,4)]),e("span",Me,g(t.stats.fourStars),1)]),s(" 3 Stars "),e("div",De,[i[2]||(i[2]=e("span",{class:"text-xs text-gray-600 dark:text-gray-400 w-4"},"3",-1)),r(f,{name:"i-heroicons-star-solid",class:"w-3.5 h-3.5 text-yellow-500"}),e("div",Te,[e("div",{class:"h-full bg-yellow-500 rounded-full transition-all duration-300",style:S({width:`${o(t.stats.threeStars,t.stats.total)}%`})},null,4)]),e("span",Ne,g(t.stats.threeStars),1)]),s(" 2 Stars "),e("div",Le,[i[3]||(i[3]=e("span",{class:"text-xs text-gray-600 dark:text-gray-400 w-4"},"2",-1)),r(f,{name:"i-heroicons-star-solid",class:"w-3.5 h-3.5 text-yellow-500"}),e("div",Oe,[e("div",{class:"h-full bg-yellow-500 rounded-full transition-all duration-300",style:S({width:`${o(t.stats.twoStars,t.stats.total)}%`})},null,4)]),e("span",Ee,g(t.stats.twoStars),1)]),s(" 1 Star "),e("div",Ke,[i[4]||(i[4]=e("span",{class:"text-xs text-gray-600 dark:text-gray-400 w-4"},"1",-1)),r(f,{name:"i-heroicons-star-solid",class:"w-3.5 h-3.5 text-yellow-500"}),e("div",He,[e("div",{class:"h-full bg-yellow-500 rounded-full transition-all duration-300",style:S({width:`${o(t.stats.oneStar,t.stats.total)}%`})},null,4)]),e("span",qe,g(t.stats.oneStar),1)])])])}}}),Je={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Qe={class:"flex flex-col lg:flex-row gap-4"},We={class:"flex-1"},Xe={class:"flex flex-wrap gap-3"},Ye=P({__name:"ReviewFilters",props:{products:{},status:{},rating:{},search:{},productId:{}},emits:["filter"],setup(t,{emit:o}){const n=t,i=c=>{if(c==null||c==="")return null;const x=typeof c=="string"?parseInt(c,10):c;return isNaN(x)?null:x},f=o,l=b(n.status),m=b(i(n.rating)),d=b(n.search),w=b(i(n.productId)),$=[{label:"Semua Status",value:"all"},{label:"Menunggu Persetujuan",value:"pending"},{label:"Disetujui",value:"approved"},{label:"Sudah Dibalas",value:"replied"}],I=[{label:"Semua Rating",value:null},{label:"5 Bintang",value:5},{label:"4 Bintang",value:4},{label:"3 Bintang",value:3},{label:"2 Bintang",value:2},{label:"1 Bintang",value:1}],U=[{label:"Semua Produk",value:null},...n.products.map(c=>({label:`${c.name} (${c.reviewCount})`,value:c.id}))];K([l,m,w],()=>{f("filter",{status:l.value,rating:m.value,search:d.value,productId:w.value})});const v=()=>{f("filter",{status:l.value,rating:m.value,search:d.value,productId:w.value})},a=()=>{l.value="all",m.value=null,d.value="",w.value=null,f("filter",{status:"all",rating:null,search:"",productId:null})};return(c,x)=>{const C=Y,_=X,F=O;return u(),h("div",Je,[e("div",Qe,[s(" Search "),e("div",We,[r(C,{modelValue:d.value,"onUpdate:modelValue":x[0]||(x[0]=R=>d.value=R),placeholder:"Cari review, produk, atau pelanggan...",icon:"i-heroicons-magnifying-glass",onKeyup:q(v,["enter"]),class:"w-full"},null,8,["modelValue"])]),s(" Filters "),e("div",Xe,[r(_,{modelValue:l.value,"onUpdate:modelValue":x[1]||(x[1]=R=>l.value=R),items:$,"value-key":"value",placeholder:"Status",class:"w-full sm:w-44"},null,8,["modelValue"]),r(_,{modelValue:m.value,"onUpdate:modelValue":x[2]||(x[2]=R=>m.value=R),items:I,"value-key":"value",placeholder:"Rating",class:"w-full sm:w-36"},null,8,["modelValue"]),r(_,{modelValue:w.value,"onUpdate:modelValue":x[3]||(x[3]=R=>w.value=R),items:U,"value-key":"value",placeholder:"Produk",class:"w-full sm:w-48"},null,8,["modelValue"]),r(F,{color:"neutral",variant:"ghost",icon:"i-heroicons-x-mark",onClick:a},{default:p(()=>[...x[4]||(x[4]=[y(" Reset ",-1)])]),_:1})])])])}}}),Ze={class:"flex items-center gap-0.5"},L=P({__name:"ReviewStars",props:{rating:{},size:{}},setup(t){const o=n=>{switch(n){case"xs":return"w-3 h-3";case"sm":return"w-4 h-4";case"lg":return"w-6 h-6";default:return"w-5 h-5"}};return(n,i)=>{const f=A;return u(),h("div",Ze,[(u(),h(z,null,j(5,l=>r(f,{key:l,name:l<=t.rating?"i-heroicons-star-solid":"i-heroicons-star",class:E([o(t.size||"md"),l<=t.rating?"text-yellow-500":"text-gray-300 dark:text-gray-600"])},null,8,["name","class"])),64))])}}}),et={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},tt={class:"p-4 sm:p-6"},at={class:"flex flex-col sm:flex-row sm:items-start gap-4"},st={class:"flex items-center gap-3 flex-1 min-w-0"},rt=["src","alt"],lt={class:"min-w-0"},ot={class:"font-medium text-gray-900 dark:text-white truncate"},it={class:"text-sm text-gray-500 dark:text-gray-400"},nt={class:"flex items-center gap-2 shrink-0"},dt={class:"space-y-3"},ut={class:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4"},ct={class:"flex items-center gap-2"},gt={class:"font-medium text-gray-900 dark:text-white"},mt={class:"flex items-center gap-2"},vt={class:"text-sm text-gray-500 dark:text-gray-400"},ht={key:0,class:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},ft={key:1,class:"text-gray-400 dark:text-gray-500 italic"},xt={key:2,class:"flex flex-wrap gap-2"},wt=["onClick"],pt=["src","alt"],yt={class:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity"},bt={key:3,class:"text-sm text-gray-500 dark:text-gray-400"},kt={key:0,class:"mt-4 p-4 rounded-lg bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800"},_t={class:"flex items-start justify-between gap-2"},$t={class:"flex items-center gap-2 mb-2"},Rt={key:0,class:"text-xs text-primary-500 dark:text-primary-400"},St={class:"text-sm text-primary-700 dark:text-primary-300 whitespace-pre-wrap"},Pt={class:"mt-4 flex flex-wrap items-center gap-2"},Ct={class:"p-6 max-h-[85vh] overflow-y-auto"},zt={class:"mb-4 p-3 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700"},It={class:"flex items-center gap-2 mb-2"},Ut={class:"text-sm text-gray-500 dark:text-gray-400"},Bt={class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3"},At={class:"mt-6 flex justify-end gap-3"},Vt={class:"p-2 max-h-[85vh] overflow-y-auto"},jt=["src"],Ft=P({__name:"ReviewCard",props:{review:{}},setup(t){const o=t,n=b(!1),i=b(o.review.adminReply||""),f=b(!1),l=b(!1),m=b(""),d=v=>new Date(v).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),w=v=>{m.value=v,l.value=!0},$=()=>{V.patch(`/admin/reviews/${o.review.id}/approve`,{},{preserveScroll:!0})},I=()=>{i.value.trim()&&(f.value=!0,V.post(`/admin/reviews/${o.review.id}/reply`,{reply:i.value},{preserveScroll:!0,onFinish:()=>{f.value=!1,n.value=!1}}))},U=()=>{V.delete(`/admin/reviews/${o.review.id}/reply`,{preserveScroll:!0})};return(v,a)=>{const c=A,x=M,C=H,_=O,F=te,R=ee,D=Z;return u(),h("div",et,[e("div",tt,[s(" Header "),e("div",at,[s(" Product Info "),e("div",st,[e("img",{src:t.review.product.image,alt:t.review.product.name,class:"w-14 h-14 rounded-lg object-cover bg-gray-100 dark:bg-gray-700 shrink-0"},null,8,rt),e("div",lt,[e("p",ot,g(t.review.product.name),1),e("p",it," SKU: "+g(t.review.product.sku),1)])]),s(" Status Badges "),e("div",nt,[t.review.isVerifiedPurchase?(u(),B(x,{key:0,color:"success",variant:"soft",size:"xs"},{default:p(()=>[r(c,{name:"i-heroicons-check-badge",class:"w-3 h-3 mr-1"}),a[6]||(a[6]=y(" Terverifikasi ",-1))]),_:1})):s("v-if",!0),r(x,{color:t.review.isApproved?"success":"warning",variant:"soft",size:"xs"},{default:p(()=>[y(g(t.review.isApproved?"Disetujui":"Menunggu"),1)]),_:1},8,["color"])])]),s(" Divider "),a[11]||(a[11]=e("div",{class:"my-4 border-t border-gray-200 dark:border-gray-700"},null,-1)),s(" Review Content "),e("div",dt,[s(" Customer & Rating "),e("div",ut,[e("div",ct,[r(C,{src:t.review.customer.avatar||void 0,alt:t.review.customer.name,size:"sm"},null,8,["src","alt"]),e("span",gt,g(t.review.customer.name),1)]),e("div",mt,[r(L,{rating:t.review.rating,size:"sm"},null,8,["rating"]),e("span",vt,g(d(t.review.createdAt)),1)])]),s(" Comment "),t.review.comment?(u(),h("p",ht,g(t.review.comment),1)):(u(),h("p",ft," Tidak ada komentar ")),s(" Images "),t.review.images&&t.review.images.length>0?(u(),h("div",xt,[(u(!0),h(z,null,j(t.review.images,(k,T)=>(u(),h("button",{key:T,class:"relative group",onClick:Qt=>w(k)},[e("img",{src:k,alt:`Review image ${T+1}`,class:"w-16 h-16 rounded-lg object-cover bg-gray-100 dark:bg-gray-700 cursor-pointer hover:opacity-80 transition-opacity"},null,8,pt),e("div",yt,[r(c,{name:"i-heroicons-magnifying-glass-plus",class:"w-5 h-5 text-white"})])],8,wt))),128))])):s("v-if",!0),s(" Order Info "),t.review.order?(u(),h("div",bt," Order: #"+g(t.review.order.orderNumber),1)):s("v-if",!0)]),s(" Admin Reply "),t.review.adminReply?(u(),h("div",kt,[e("div",_t,[e("div",$t,[r(c,{name:"i-heroicons-chat-bubble-left-right",class:"w-4 h-4 text-primary-600 dark:text-primary-400"}),a[7]||(a[7]=e("span",{class:"text-sm font-medium text-primary-700 dark:text-primary-300"},"Balasan Anda",-1)),t.review.adminRepliedAt?(u(),h("span",Rt,g(d(t.review.adminRepliedAt)),1)):s("v-if",!0)]),r(_,{size:"xs",color:"error",variant:"ghost",icon:"i-heroicons-trash",onClick:U})]),e("p",St,g(t.review.adminReply),1)])):s("v-if",!0),s(" Actions "),e("div",Pt,[t.review.isApproved?s("v-if",!0):(u(),B(_,{key:0,size:"sm",color:"success",variant:"soft",icon:"i-heroicons-check",onClick:$},{default:p(()=>[...a[8]||(a[8]=[y(" Setujui ",-1)])]),_:1})),t.review.adminReply?(u(),B(_,{key:2,size:"sm",color:"neutral",variant:"soft",icon:"i-heroicons-pencil",onClick:a[1]||(a[1]=k=>n.value=!0)},{default:p(()=>[...a[10]||(a[10]=[y(" Edit Balasan ",-1)])]),_:1})):(u(),B(_,{key:1,size:"sm",color:"primary",variant:"soft",icon:"i-heroicons-chat-bubble-left-right",onClick:a[0]||(a[0]=k=>n.value=!0)},{default:p(()=>[...a[9]||(a[9]=[y(" Balas ",-1)])]),_:1}))])]),s(" Reply Modal "),r(D,{open:n.value,"onUpdate:open":a[4]||(a[4]=k=>n.value=k),title:t.review.adminReply?"Edit Balasan":"Balas Review",description:`Balas review dari ${t.review.customer.name}`,ui:{overlay:"z-[100]",content:"z-[100]"}},{content:p(()=>[e("div",Ct,[e("div",zt,[e("div",It,[r(L,{rating:t.review.rating,size:"sm"},null,8,["rating"]),e("span",Ut," oleh "+g(t.review.customer.name),1)]),e("p",Bt,g(t.review.comment||"Tidak ada komentar"),1)]),r(R,{label:"Balasan Anda"},{default:p(()=>[r(F,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=k=>i.value=k),placeholder:"Tulis balasan untuk review ini...",rows:4,class:"w-full"},null,8,["modelValue"])]),_:1}),e("div",At,[r(_,{color:"neutral",variant:"ghost",onClick:a[3]||(a[3]=k=>n.value=!1)},{default:p(()=>[...a[12]||(a[12]=[y(" Batal ",-1)])]),_:1}),r(_,{color:"primary",loading:f.value,disabled:!i.value.trim(),onClick:I},{default:p(()=>[...a[13]||(a[13]=[y(" Simpan Balasan ",-1)])]),_:1},8,["loading","disabled"])])])]),_:1},8,["open","title","description"]),s(" Image Modal "),r(D,{open:l.value,"onUpdate:open":a[5]||(a[5]=k=>l.value=k),title:"Gambar Review",description:"Lihat gambar review dalam ukuran penuh",ui:{overlay:"z-[100]",content:"z-[100]",width:"max-w-4xl"}},{content:p(()=>[e("div",Vt,[e("img",{src:m.value,alt:"Review image",class:"max-w-full max-h-[80vh] object-contain rounded-lg"},null,8,jt)])]),_:1},8,["open"])])}}}),Mt={key:0,class:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"},Dt={class:"text-sm text-gray-500 dark:text-gray-400"},Tt={class:"flex items-center gap-4"},Nt=P({__name:"ReviewPagination",props:{meta:{}},emits:["pageChange","perPageChange"],setup(t,{emit:o}){const n=o,i=[{label:"10",value:10},{label:"20",value:20},{label:"50",value:50}],f=l=>{n("perPageChange",Number(l))};return(l,m)=>{const d=se,w=ae;return t.meta.total>0?(u(),h("div",Mt,[e("div",Dt," Menampilkan "+g((t.meta.currentPage-1)*t.meta.perPage+1)+" - "+g(Math.min(t.meta.currentPage*t.meta.perPage,t.meta.total))+" dari "+g(t.meta.total)+" review ",1),e("div",Tt,[r(d,{"model-value":t.meta.perPage,items:i,"value-key":"value",size:"sm",class:"w-20","onUpdate:modelValue":f},null,8,["model-value"]),r(w,{"model-value":t.meta.currentPage,total:t.meta.total,"items-per-page":t.meta.perPage,size:"sm","onUpdate:modelValue":m[0]||(m[0]=$=>n("pageChange",$))},null,8,["model-value","total","items-per-page"])])])):s("v-if",!0)}}}),Lt={class:"p-6 space-y-6"},Ot={class:"grid grid-cols-1 xl:grid-cols-4 gap-6"},Et={class:"xl:col-span-3"},Kt={class:"xl:col-span-1"},Ht={key:0,class:"fixed bottom-4 right-4 z-50"},qt={key:1,class:"flex items-center justify-center py-12"},Gt={class:"space-y-4"},Jt={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center"},ma=P({layout:W,__name:"index",props:{admin:{default:()=>({id:0,storeName:"Admin"})},reviews:{default:()=>[]},meta:{default:()=>({total:0,perPage:10,currentPage:1,lastPage:1,firstPage:1})},stats:{default:()=>({total:0,pending:0,approved:0,averageRating:0,fiveStars:0,fourStars:0,threeStars:0,twoStars:0,oneStar:0})},products:{default:()=>[]},filters:{default:()=>({status:"all",rating:null,search:"",productId:null,dateFrom:"",dateTo:""})}},setup(t){const o=t,n=b(Array.isArray(o.reviews)?[...o.reviews]:[]);K(()=>o.reviews,v=>{n.value=Array.isArray(v)?[...v]:[]},{deep:!0});const{isConnected:i,onReplyReceived:f}=re();let l=null;G(()=>{l=f(v=>{const a=n.value.findIndex(c=>c.id===v.reviewId);a!==-1&&(n.value[a]={...n.value[a],adminReply:v.adminReply,adminRepliedAt:v.adminRepliedAt})})}),J(()=>{l&&l()});const m=b(!1),d=b({...o.filters}),w=v=>{d.value={...d.value,...v},$()},$=(v=1,a=o.meta.perPage)=>{m.value=!0;const c={page:v,perPage:a};d.value.status&&d.value.status!=="all"&&(c.status=d.value.status),d.value.rating&&(c.rating=d.value.rating),d.value.search&&(c.search=d.value.search),d.value.productId&&(c.productId=d.value.productId),V.get("/admin/reviews",c,{preserveState:!0,preserveScroll:!0,onFinish:()=>{m.value=!1}})},I=v=>{$(v)},U=v=>{$(1,v)};return(v,a)=>{const c=M,x=A;return u(),h("div",Lt,[s(" Header "),a[3]||(a[3]=e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Review Produk"),e("p",{class:"text-gray-500 dark:text-gray-400"}," Kelola ulasan pelanggan untuk produk Anda ")])],-1)),s(" Stats Section "),e("div",Ot,[e("div",Et,[r(ze,{stats:o.stats},null,8,["stats"])]),e("div",Kt,[r(Ge,{stats:o.stats},null,8,["stats"])])]),s(" Filters "),r(Ye,{products:o.products,status:d.value.status,rating:d.value.rating,search:d.value.search,"product-id":d.value.productId,onFilter:w},null,8,["products","status","rating","search","product-id"]),s(" Realtime Connection Status "),Q(i)?(u(),h("div",Ht,[r(c,{color:"success",variant:"soft",size:"xs",class:"flex items-center gap-1"},{default:p(()=>[...a[0]||(a[0]=[e("span",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},null,-1),y(" Realtime ",-1)])]),_:1})])):s("v-if",!0),s(" Loading State "),m.value?(u(),h("div",qt,[r(x,{name:"i-heroicons-arrow-path",class:"w-8 h-8 text-primary-500 animate-spin"})])):n.value.length>0?(u(),h(z,{key:2},[s(" Reviews List "),e("div",Gt,[(u(!0),h(z,null,j(n.value,C=>(u(),B(Ft,{key:C.id,review:C},null,8,["review"]))),128))])],2112)):(u(),h(z,{key:3},[s(" Empty State "),e("div",Jt,[r(x,{name:"i-heroicons-chat-bubble-left-right",class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),a[1]||(a[1]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Belum Ada Review ",-1)),a[2]||(a[2]=e("p",{class:"text-gray-500 dark:text-gray-400 max-w-md mx-auto"}," Produk Anda belum memiliki ulasan dari pelanggan. Review akan muncul setelah pelanggan memberikan ulasan. ",-1))])],2112)),s(" Pagination "),r(Nt,{meta:o.meta,onPageChange:I,onPerPageChange:U},null,8,["meta"])])}}});export{ma as default};
