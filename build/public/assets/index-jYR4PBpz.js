import{d as U,a as h,j as o,f as e,w as v,b as t,t as u,u as b,o as f,Q as L,R as F,e as N,L as I,k as C,F as M,r as P,m as W,h as _,l as j}from"./app-CyjtdGoI.js";import{A as z}from"./admin-BzR6vrex.js";import{_ as A}from"./Card-BjL1m_sW.js";import{_ as R,a as D}from"./Button-CI_-soaG.js";import{f as S,w as K,b as E}from"./finance-XRy4NKgY.js";import{_ as q}from"./SelectMenu-DKAhKU-v.js";import{_ as H}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as J}from"./Badge-DfumusWV.js";import{_ as B}from"./WithdrawalActionModal.vue_vue_type_script_setup_true_lang-CsW_c2Z-.js";import{_ as O}from"./FinancePagination.vue_vue_type_script_setup_true_lang-D1WWecWR.js";import"./Tooltip-BrTR-Vq7.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./index-v4g8wp86.js";import"./Modal-Bgd8PL5Y.js";import"./FormField-qFQ_28ZO.js";import"./Label-yeknIWsP.js";import"./Textarea-CZyY9J1c.js";const Q={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},G={class:"flex items-center gap-3"},X={class:"p-2 rounded-lg bg-warning-100 dark:bg-warning-900/30"},Y={class:"text-xl font-bold text-gray-900 dark:text-white"},Z={class:"text-xs text-gray-400"},tt={class:"flex items-center gap-3"},et={class:"p-2 rounded-lg bg-success-100 dark:bg-success-900/30"},at={class:"text-xl font-bold text-gray-900 dark:text-white"},st={class:"text-xs text-gray-400"},ot={class:"flex items-center gap-3"},lt={class:"p-2 rounded-lg bg-error-100 dark:bg-error-900/30"},rt={class:"text-xl font-bold text-gray-900 dark:text-white"},nt={class:"flex items-center gap-3"},it={class:"p-2 rounded-lg bg-primary-100 dark:bg-primary-900/30"},dt={class:"text-xl font-bold text-gray-900 dark:text-white"},ct=U({__name:"WithdrawalStatsCards",props:{stats:{}},setup(l){return(y,a)=>{const r=R,n=A;return f(),h("div",Q,[o(" Pending "),e(n,null,{default:v(()=>[t("div",G,[t("div",X,[e(r,{name:"i-heroicons-clock",class:"w-5 h-5 text-warning-600 dark:text-warning-400"})]),t("div",null,[a[0]||(a[0]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Menunggu",-1)),t("p",Y,u(l.stats.pending),1),t("p",Z,u(b(S)(l.stats.pendingAmount)),1)])])]),_:1}),o(" Completed "),e(n,null,{default:v(()=>[t("div",tt,[t("div",et,[e(r,{name:"i-heroicons-check-circle",class:"w-5 h-5 text-success-600 dark:text-success-400"})]),t("div",null,[a[1]||(a[1]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Selesai",-1)),t("p",at,u(l.stats.completed),1),t("p",st,u(b(S)(l.stats.totalAmount)),1)])])]),_:1}),o(" Failed "),e(n,null,{default:v(()=>[t("div",ot,[t("div",lt,[e(r,{name:"i-heroicons-x-circle",class:"w-5 h-5 text-error-600 dark:text-error-400"})]),t("div",null,[a[2]||(a[2]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Ditolak",-1)),t("p",rt,u(l.stats.failed),1)])])]),_:1}),o(" Total "),e(n,null,{default:v(()=>[t("div",nt,[t("div",it,[e(r,{name:"i-heroicons-banknotes",class:"w-5 h-5 text-primary-600 dark:text-primary-400"})]),t("div",null,[a[3]||(a[3]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Request",-1)),t("p",dt,u(l.stats.total),1)])])]),_:1})])}}}),ut={class:"space-y-4"},mt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},pt={class:"flex gap-2"},xt=U({__name:"WithdrawalFilters",props:{status:{default:"all"},statusModifiers:{},search:{default:""},searchModifiers:{},dateFrom:{default:""},dateFromModifiers:{},dateTo:{default:""},dateToModifiers:{}},emits:L(["filter","reset"],["update:status","update:search","update:dateFrom","update:dateTo"]),setup(l,{emit:y}){const a=F(l,"status"),r=F(l,"search"),n=F(l,"dateFrom"),m=F(l,"dateTo"),x=y,g=()=>{x("filter")},k=()=>{a.value="all",r.value="",n.value="",m.value="",x("reset")};return(s,i)=>{const w=H,V=q,$=D,T=A;return f(),N(T,null,{default:v(()=>[t("div",ut,[t("div",mt,[o(" Search "),e(w,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=d=>r.value=d),placeholder:"Cari nama/email customer...",icon:"i-heroicons-magnifying-glass",onKeyup:I(g,["enter"])},null,8,["modelValue"]),o(" Status "),e(V,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=d=>a.value=d),items:b(K),"value-key":"value",placeholder:"Status"},null,8,["modelValue","items"]),o(" Date From "),e(w,{modelValue:n.value,"onUpdate:modelValue":i[2]||(i[2]=d=>n.value=d),type:"date",placeholder:"Dari Tanggal"},null,8,["modelValue"]),o(" Date To "),e(w,{modelValue:m.value,"onUpdate:modelValue":i[3]||(i[3]=d=>m.value=d),type:"date",placeholder:"Sampai Tanggal"},null,8,["modelValue"]),o(" Actions "),t("div",pt,[e($,{color:"primary",icon:"i-heroicons-funnel",onClick:g},{default:v(()=>[...i[4]||(i[4]=[C(" Filter ",-1)])]),_:1}),e($,{color:"neutral",variant:"ghost",icon:"i-heroicons-x-mark",onClick:k},{default:v(()=>[...i[5]||(i[5]=[C(" Reset ",-1)])]),_:1})])])])]),_:1})}}}),gt={key:0,class:"flex items-center justify-center py-12"},ft={key:1,class:"text-center py-12"},vt={key:2,class:"overflow-x-auto"},yt={class:"w-full"},_t={class:"py-3 px-4"},ht={class:"flex items-center gap-3"},kt=["src","alt"],bt={class:"font-medium text-gray-900 dark:text-white"},wt={class:"text-sm text-gray-500 dark:text-gray-400"},$t={class:"py-3 px-4"},Ft={class:"font-medium text-gray-900 dark:text-white"},Ut={class:"text-sm text-gray-500 dark:text-gray-400"},Vt={class:"text-xs text-gray-400"},Tt={class:"py-3 px-4 text-right"},Ct={class:"font-bold text-gray-900 dark:text-white"},St={class:"py-3 px-4 text-center"},At={class:"py-3 px-4"},Mt={class:"text-sm text-gray-600 dark:text-gray-300"},jt={class:"py-3 px-4"},Bt={class:"flex items-center justify-center gap-2"},Nt=U({__name:"WithdrawalTable",props:{withdrawals:{},isLoading:{type:Boolean}},emits:["approve","reject"],setup(l,{emit:y}){const a=r=>r||"https://placehold.co/40x40/1a1a2e/ffffff?text=U";return(r,n)=>{const m=R,x=J,g=D,k=A;return f(),N(k,null,{default:v(()=>[l.isLoading?(f(),h("div",gt,[e(m,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin text-gray-400"})])):l.withdrawals.length===0?(f(),h("div",ft,[e(m,{name:"i-heroicons-inbox",class:"w-12 h-12 mx-auto text-gray-400 mb-3"}),n[0]||(n[0]=t("p",{class:"text-gray-500 dark:text-gray-400"},"Tidak ada permintaan withdraw",-1))])):(f(),h("div",vt,[t("table",yt,[n[1]||(n[1]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Customer "),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Bank Info "),t("th",{class:"text-right py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Jumlah "),t("th",{class:"text-center py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Status "),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Tanggal "),t("th",{class:"text-center py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Aksi ")])],-1)),t("tbody",null,[(f(!0),h(M,null,P(l.withdrawals,s=>(f(),h("tr",{key:s.id,class:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50"},[o(" Customer "),t("td",_t,[t("div",ht,[t("img",{src:a(s.customerAvatar),alt:s.customerName,class:"w-10 h-10 rounded-full object-cover"},null,8,kt),t("div",null,[t("p",bt,u(s.customerName),1),t("p",wt,u(s.customerEmail),1)])])]),o(" Bank Info "),t("td",$t,[t("p",Ft,u(s.bankName),1),t("p",Ut,u(s.accountNumber),1),t("p",Vt,u(s.accountName),1)]),o(" Amount "),t("td",Tt,[t("p",Ct,u(b(S)(s.amount)),1)]),o(" Status "),t("td",St,[e(x,{color:s.statusColor,variant:"soft"},{default:v(()=>[C(u(s.statusLabel),1)]),_:2},1032,["color"])]),o(" Date "),t("td",At,[t("p",Mt,u(b(E)(s.createdAt)),1)]),o(" Actions "),t("td",jt,[t("div",Bt,[e(b(W),{href:`/admin/finance/withdraw/${s.id}`},{default:v(()=>[e(g,{icon:"i-heroicons-eye",color:"neutral",variant:"ghost",size:"sm"})]),_:1},8,["href"]),s.status==="pending"?(f(),h(M,{key:0},[e(g,{icon:"i-heroicons-check",color:"success",variant:"soft",size:"sm",onClick:i=>r.$emit("approve",s)},null,8,["onClick"]),e(g,{icon:"i-heroicons-x-mark",color:"error",variant:"soft",size:"sm",onClick:i=>r.$emit("reject",s)},null,8,["onClick"])],64)):o("v-if",!0)])])]))),128))])])]))]),_:1})}}}),Rt={class:"p-6 space-y-6"},ee=U({layout:z,__name:"index",props:{withdrawals:{},pagination:{},stats:{},filters:{}},setup(l){const y=l,a=_(y.filters.status||"all"),r=_(y.filters.search),n=_(y.filters.dateFrom),m=_(y.filters.dateTo),x=_(!1),g=_(!1),k=_(!1),s=_(null),i=()=>{x.value=!0,j.get("/admin/finance/withdraw",{status:a.value==="all"?"":a.value,search:r.value,dateFrom:n.value,dateTo:m.value},{preserveState:!0,preserveScroll:!0,onFinish:()=>{x.value=!1}})},w=()=>{a.value="all",r.value="",n.value="",m.value="",i()},V=d=>{x.value=!0,j.get("/admin/finance/withdraw",{status:a.value==="all"?"":a.value,search:r.value,dateFrom:n.value,dateTo:m.value,page:d},{preserveState:!0,preserveScroll:!0,onFinish:()=>{x.value=!1}})},$=d=>{s.value=d,g.value=!0},T=d=>{s.value=d,k.value=!0};return(d,c)=>(f(),h("div",Rt,[o(" Header "),c[6]||(c[6]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Permintaan Withdraw"),t("p",{class:"text-gray-500 dark:text-gray-400"}," Kelola permintaan penarikan saldo dari customer ")],-1)),o(" Stats "),e(ct,{stats:l.stats},null,8,["stats"]),o(" Filters "),e(xt,{status:a.value,"onUpdate:status":c[0]||(c[0]=p=>a.value=p),search:r.value,"onUpdate:search":c[1]||(c[1]=p=>r.value=p),"date-from":n.value,"onUpdate:dateFrom":c[2]||(c[2]=p=>n.value=p),"date-to":m.value,"onUpdate:dateTo":c[3]||(c[3]=p=>m.value=p),onFilter:i,onReset:w},null,8,["status","search","date-from","date-to"]),o(" Table "),e(Nt,{withdrawals:l.withdrawals,"is-loading":x.value,onApprove:$,onReject:T},null,8,["withdrawals","is-loading"]),o(" Pagination "),e(O,{pagination:l.pagination,onPageChange:V},null,8,["pagination"]),o(" Modals "),e(B,{modelValue:g.value,"onUpdate:modelValue":c[4]||(c[4]=p=>g.value=p),withdrawal:s.value,type:"approve"},null,8,["modelValue","withdrawal"]),e(B,{modelValue:k.value,"onUpdate:modelValue":c[5]||(c[5]=p=>k.value=p),withdrawal:s.value,type:"reject"},null,8,["modelValue","withdrawal"])]))}});export{ee as default};
