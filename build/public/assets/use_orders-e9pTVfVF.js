import{h as f,c as h,l as g}from"./app-CyjtdGoI.js";function T(o){const{orders:a,pagination:i,filters:m,statusOptions:t}=o,c=f(m.status),n=f(!1),r=h(()=>a.length>0),e=h(()=>i.lastPage>1),l=h(()=>{const u={all:"i-heroicons-squares-2x2",pending_payment:"i-heroicons-clock",paid:"i-heroicons-check-circle",processing:"i-heroicons-cog-6-tooth",shipped:"i-heroicons-truck",delivered:"i-heroicons-check-badge",cancelled:"i-heroicons-x-circle"};return t.map(p=>({...p,icon:u[p.value]||"i-heroicons-tag"}))});return{selectedStatus:c,isLoading:n,hasOrders:r,hasPagination:e,statusOptionsWithIcons:l,filterByStatus:u=>{n.value||(c.value=u,n.value=!0,g.get("/orders",{status:u!=="all"?u:void 0},{preserveState:!0,preserveScroll:!0,onFinish:()=>{n.value=!1}}))},goToPage:u=>{n.value||(n.value=!0,g.get("/orders",{page:u,status:c.value!=="all"?c.value:void 0},{preserveState:!0,preserveScroll:!0,onFinish:()=>{n.value=!1}}))},refreshOrders:()=>{n.value=!0,g.reload({only:["orders","pagination"],onFinish:()=>{n.value=!1}})}}}function O(){return{formatPrice:t=>{const c=Number(t)||0;return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(c)},formatDate:t=>t?new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",formatShortDate:t=>t?new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-",formatRelativeTime:t=>{if(!t)return"-";const c=new Date(t),r=new Date().getTime()-c.getTime(),e=Math.floor(r/(1e3*60*60*24));return e===0?"Hari ini":e===1?"Kemarin":e<7?`${e} hari lalu`:e<30?`${Math.floor(e/7)} minggu lalu`:e<365?`${Math.floor(e/30)} bulan lalu`:`${Math.floor(e/365)} tahun lalu`}}}function S(){const o=f(!1),a=f(null),i=()=>{if(typeof document>"u")return null;const r=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return r?decodeURIComponent(r[1]):null};return{isProcessing:o,error:a,cancelOrder:async r=>{o.value=!0,a.value=null;try{const e=i(),s=await(await fetch(`/api/orders/${r}/cancel`,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest",...e&&{"X-XSRF-TOKEN":e}},credentials:"include"})).json();return s.success||(a.value=s.message||"Gagal membatalkan pesanan"),{success:s.success,message:s.message||""}}catch{return a.value="Terjadi kesalahan jaringan",{success:!1,message:a.value}}finally{o.value=!1}},confirmReceived:async r=>{o.value=!0,a.value=null;try{const e=i(),s=await(await fetch(`/api/orders/${r}/confirm-received`,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest",...e&&{"X-XSRF-TOKEN":e}},credentials:"include"})).json();return s.success||(a.value=s.message||"Gagal konfirmasi pesanan"),{success:s.success,message:s.message||""}}catch{return a.value="Terjadi kesalahan jaringan",{success:!1,message:a.value}}finally{o.value=!1}},payOrder:async r=>{o.value=!0,a.value=null;try{const e=i(),s=await(await fetch(`/api/orders/${r}/pay`,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest",...e&&{"X-XSRF-TOKEN":e}},credentials:"include"})).json();return s.success?{success:!0,message:"Token pembayaran berhasil dibuat",snapToken:s.data?.snapToken,redirectUrl:s.data?.redirectUrl}:(a.value=s.message||"Gagal memproses pembayaran",{success:!1,message:a.value})}catch{return a.value="Terjadi kesalahan jaringan",{success:!1,message:a.value}}finally{o.value=!1}},verifyPayment:async(r,e,l)=>{try{const s=i(),d=await(await fetch(`/api/orders/${r}/verify-payment`,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...s&&{"X-XSRF-TOKEN":s}},credentials:"include",body:JSON.stringify({transactionStatus:e,transactionId:l})})).json();return d.success?{success:!0,message:d.message||"",orderStatus:d.data?.orderStatus,paymentStatus:d.data?.paymentStatus}:{success:!1,message:d.message||"Gagal memverifikasi pembayaran"}}catch{return{success:!1,message:"Terjadi kesalahan jaringan"}}}}}export{S as a,T as b,O as u};
