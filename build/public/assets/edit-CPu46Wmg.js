import{_ as U,a as P}from"./Button-CI_-soaG.js";import{_ as A}from"./Switch-sBWkdoVy.js";import{_ as S}from"./Select-D6kv-Jzs.js";import{_ as j,g as $}from"./ColorModeButton-Bf7Nr8w3.js";import{d as B,h as c,c as E,a as d,j as r,b as l,f as i,w as g,u as F,m as T,t as n,D as G,k as p,l as K,o as u}from"./app-CyjtdGoI.js";import{A as L}from"./admin-BzR6vrex.js";import"./Label-yeknIWsP.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Tooltip-BrTR-Vq7.js";const M={class:"space-y-6"},D={class:"flex items-center gap-4"},I={class:"text-gray-500 dark:text-gray-400"},O={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6"},H={key:0,class:"mt-1 text-sm text-red-500"},q={key:0,class:"mt-1 text-sm text-red-500"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={key:0,class:"mt-1 text-sm text-red-500"},Q={key:0,class:"mt-1 text-sm text-red-500"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W={key:0,class:"mt-1 text-sm text-red-500"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y={class:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},Z={class:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},ee={class:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700"},me=B({layout:L,__name:"edit",props:{customer:{}},setup(w){const o=w,b=$(),a=c({fullName:o.customer.fullName,email:o.customer.email,password:"",passwordConfirmation:"",phone:o.customer.phone||"",gender:o.customer.gender||"",isActive:o.customer.isActive,isVerified:o.customer.isVerified}),v=c(!1),t=c({}),V=[{label:"Laki-laki",value:"male"},{label:"Perempuan",value:"female"}],_=E(()=>a.value.fullName!==o.customer.fullName||a.value.email!==o.customer.email||a.value.phone!==(o.customer.phone||"")||a.value.gender!==(o.customer.gender||"")||a.value.isActive!==o.customer.isActive||a.value.isVerified!==o.customer.isVerified||a.value.password!==""),h=()=>(t.value={},a.value.fullName||(t.value.fullName="Nama lengkap wajib diisi"),a.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.value.email)||(t.value.email="Format email tidak valid"):t.value.email="Email wajib diisi",a.value.password&&(a.value.password.length<8&&(t.value.password="Password minimal 8 karakter"),a.value.password!==a.value.passwordConfirmation&&(t.value.passwordConfirmation="Konfirmasi password tidak cocok")),a.value.phone&&!/^[0-9+\-\s()]+$/.test(a.value.phone)&&(t.value.phone="Format nomor telepon tidak valid"),Object.keys(t.value).length===0),y=()=>{if(!h())return;v.value=!0;const f={fullName:a.value.fullName,email:a.value.email,phone:a.value.phone||null,gender:a.value.gender||null,isActive:a.value.isActive,isVerified:a.value.isVerified};a.value.password&&(f.password=a.value.password),K.put(`/admin/customers/${o.customer.id}`,f,{onSuccess:()=>{b.success("Pelanggan berhasil diperbarui")},onError:e=>{e&&(t.value={...t.value,...e}),b.error("Gagal memperbarui pelanggan")},onFinish:()=>{v.value=!1}})};return(f,e)=>{const N=U,m=j,C=S,x=A,k=P;return u(),d("div",M,[r(" Page Header "),l("div",D,[i(F(T),{href:"/admin/customers",class:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"},{default:g(()=>[i(N,{name:"i-heroicons-arrow-left",class:"w-5 h-5 text-slate-600 dark:text-slate-400"})]),_:1}),l("div",null,[e[8]||(e[8]=l("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Edit Pelanggan",-1)),l("p",I," Edit data pelanggan "+n(o.customer.fullName),1)])]),r(" Form "),l("div",O,[l("form",{onSubmit:G(y,["prevent"]),class:"space-y-6"},[r(" Full Name "),l("div",null,[e[9]||(e[9]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[p(" Nama Lengkap "),l("span",{class:"text-red-500"},"*")],-1)),i(m,{modelValue:a.value.fullName,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.fullName=s),placeholder:"Masukkan nama lengkap",error:!!t.value.fullName},null,8,["modelValue","error"]),t.value.fullName?(u(),d("p",H,n(t.value.fullName),1)):r("v-if",!0)]),r(" Email "),l("div",null,[e[10]||(e[10]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[p(" Email "),l("span",{class:"text-red-500"},"*")],-1)),i(m,{modelValue:a.value.email,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.email=s),type:"email",placeholder:"Masukkan email",error:!!t.value.email},null,8,["modelValue","error"]),t.value.email?(u(),d("p",q,n(t.value.email),1)):r("v-if",!0)]),r(" Password (optional) "),l("div",z,[l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Password Baru ",-1)),i(m,{modelValue:a.value.password,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.password=s),type:"password",placeholder:"Kosongkan jika tidak ingin mengubah",error:!!t.value.password},null,8,["modelValue","error"]),t.value.password?(u(),d("p",J,n(t.value.password),1)):r("v-if",!0)]),l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Konfirmasi Password Baru ",-1)),i(m,{modelValue:a.value.passwordConfirmation,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.passwordConfirmation=s),type:"password",placeholder:"Konfirmasi password baru",error:!!t.value.passwordConfirmation},null,8,["modelValue","error"]),t.value.passwordConfirmation?(u(),d("p",Q,n(t.value.passwordConfirmation),1)):r("v-if",!0)])]),r(" Phone & Gender "),l("div",R,[l("div",null,[e[13]||(e[13]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Nomor Telepon ",-1)),i(m,{modelValue:a.value.phone,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.phone=s),placeholder:"Contoh: 081234567890",error:!!t.value.phone},null,8,["modelValue","error"]),t.value.phone?(u(),d("p",W,n(t.value.phone),1)):r("v-if",!0)]),l("div",null,[e[14]||(e[14]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Gender ",-1)),i(C,{modelValue:a.value.gender,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.gender=s),items:V,placeholder:"Pilih Gender"},null,8,["modelValue"])])]),r(" Status Toggles "),l("div",X,[l("div",Y,[e[15]||(e[15]=l("div",null,[l("p",{class:"font-medium text-slate-900 dark:text-white"},"Status Aktif"),l("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Pelanggan dapat login dan berbelanja")],-1)),i(x,{modelValue:a.value.isActive,"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.isActive=s)},null,8,["modelValue"])]),l("div",Z,[e[16]||(e[16]=l("div",null,[l("p",{class:"font-medium text-slate-900 dark:text-white"},"Email Terverifikasi"),l("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tandai email sebagai terverifikasi")],-1)),i(x,{modelValue:a.value.isVerified,"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.isVerified=s)},null,8,["modelValue"])])]),r(" Submit "),l("div",ee,[i(k,{color:"neutral",variant:"outline",to:"/admin/customers"},{default:g(()=>[...e[17]||(e[17]=[p(" Batal ",-1)])]),_:1}),i(k,{type:"submit",color:"primary",loading:v.value,disabled:!_.value},{default:g(()=>[...e[18]||(e[18]=[p(" Simpan Perubahan ",-1)])]),_:1},8,["loading","disabled"])])],32)])])}}});export{me as default};
