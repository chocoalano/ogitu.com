import{_ as oe}from"./SelectMenu-DKAhKU-v.js";import{_ as ie}from"./Textarea-CZyY9J1c.js";import{_ as ne,g as re}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as de,a as ce}from"./Button-CI_-soaG.js";import{_ as ue}from"./Badge-DfumusWV.js";import{d as me,h as u,c as _,y as F,q as pe,a as y,j as c,b as a,f as n,w as k,k as p,t as v,e as q,l as ve,o as g}from"./app-CyjtdGoI.js";import{A as ge}from"./admin-BzR6vrex.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./index-v4g8wp86.js";import"./Tooltip-BrTR-Vq7.js";const fe={class:"space-y-6"},ke={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},be={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden"},xe={class:"relative h-48 bg-linear-to-r from-violet-500 to-fuchsia-500"},he=["src"],ye={class:"absolute top-4 right-4 flex gap-2"},we={class:"absolute -bottom-12 left-6"},Ne={class:"relative"},Ie={class:"w-24 h-24 rounded-xl overflow-hidden border-4 border-white dark:border-slate-800 shadow-lg bg-white dark:bg-slate-700"},_e=["src"],je={key:1,class:"w-full h-full bg-linear-to-br from-violet-500 to-fuchsia-600 flex items-center justify-center text-white font-bold text-2xl"},Te={class:"absolute -bottom-2 -right-2 flex gap-1"},Ce={class:"pt-16 px-6 pb-6"},Ae={class:"flex flex-wrap items-center gap-6 mb-6"},Se={class:"text-xl font-bold text-slate-900 dark:text-white"},Ue={class:"text-sm text-slate-500 dark:text-slate-400"},Pe={class:"flex gap-6 ml-auto"},Re={class:"text-center"},Ee={class:"flex items-center gap-1 text-lg font-bold text-slate-900 dark:text-white"},Le={class:"text-center"},Xe={class:"text-lg font-bold text-slate-900 dark:text-white"},Be={class:"text-center"},Ve={class:"text-lg font-bold text-slate-900 dark:text-white"},De={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6"},Fe={class:"space-y-6"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$e={class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},Me={class:"border-t border-slate-200 dark:border-slate-700 pt-6"},Ke={class:"text-base font-semibold text-slate-900 dark:text-white mb-1"},Oe={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ze={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ge={class:"md:col-span-2"},He={class:"h-11 px-4 flex items-center bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700 text-sm text-slate-600 dark:text-slate-400"},We={key:0},Je={key:1,class:"text-slate-400"},Qe={class:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700"},Ye={class:"bg-violet-50 dark:bg-violet-900/20 rounded-xl border border-violet-200 dark:border-violet-800 p-6"},Ze={class:"flex gap-4"},ea={class:"w-10 h-10 rounded-lg bg-violet-100 dark:bg-violet-900/50 flex items-center justify-center shrink-0"},ma=me({layout:ge,__name:"profile",props:{admin:{default:()=>({id:0,storeName:"",slug:"",description:null,logo:null,banner:null,phone:null,email:null,address:null,cityId:null,cityName:null,districtId:null,districtName:null,provinceId:null,provinceName:null,postalCode:null,status:"",rating:0,totalReviews:0,totalSales:0,createdAt:""})}},setup(b){const l=b,r=re(),t=u({storeName:l.admin.storeName,description:l.admin.description||"",phone:l.admin.phone||"",email:l.admin.email||"",address:l.admin.address||"",cityId:l.admin.cityId||"",cityName:l.admin.cityName||"",districtId:l.admin.districtId||"",districtName:l.admin.districtName||"",provinceId:l.admin.provinceId||"",provinceName:l.admin.provinceName||"",postalCode:l.admin.postalCode||""}),w=u(l.admin.logo),x=u(l.admin.banner),C=u(!1),A=u(!1),S=u([]),N=u([]),h=u([]),U=u(!1),P=u(!1),R=u(!1),E=u(!1),L=u(!1),X=u(!1),B=u(!1),V=u(!1),j=u(null),T=u(null),I=()=>{const s=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return s?decodeURIComponent(s[1]):""},G=s=>{if(!s)return"??";const e=s.trim().split(/\s+/);return e.length>=2?(e[0].charAt(0)+e[1].charAt(0)).toUpperCase():s.slice(0,2).toUpperCase()},$=_(()=>t.value.storeName!==l.admin.storeName||t.value.description!==(l.admin.description||"")||t.value.phone!==(l.admin.phone||"")||t.value.email!==(l.admin.email||"")||t.value.address!==(l.admin.address||"")||t.value.cityId!==(l.admin.cityId||"")||t.value.cityName!==(l.admin.cityName||"")||t.value.districtId!==(l.admin.districtId||"")||t.value.districtName!==(l.admin.districtName||"")||t.value.provinceId!==(l.admin.provinceId||"")||t.value.provinceName!==(l.admin.provinceName||"")||t.value.postalCode!==(l.admin.postalCode||"")),M=_(()=>({active:{label:"Aktif",color:"success"},pending:{label:"Pending",color:"warning"},suspended:{label:"Ditangguhkan",color:"error"},inactive:{label:"Tidak Aktif",color:"neutral"}})[l.admin.status]||{label:l.admin.status,color:"neutral"}),H=s=>new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),W=async()=>{U.value=!0;try{const e=await(await fetch("/api/location/provinces",{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"})).json();e.success&&Array.isArray(e.data)&&(S.value=e.data.map(i=>({id:String(i.province_id||i.id),name:i.province||i.name})))}catch(s){console.error("Fetch provinces error:",s)}finally{U.value=!1}},K=async s=>{if(!s){N.value=[];return}P.value=!0;try{const i=await(await fetch(`/api/location/cities?provinceId=${s}`,{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"})).json();i.success&&Array.isArray(i.data)&&(N.value=i.data.map(o=>({id:String(o.city_id||o.id),name:o.city_name||(o.type?`${o.type} ${o.city}`:o.name)})))}catch(e){console.error("Fetch cities error:",e)}finally{P.value=!1}},O=async s=>{if(!s){h.value=[];return}R.value=!0;try{const i=await(await fetch(`/api/location/districts?cityId=${s}`,{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"})).json();i.success&&Array.isArray(i.data)&&(h.value=i.data.map(o=>({id:String(o.subdistrict_id||o.district_id||o.id),name:o.subdistrict_name||o.district_name||o.name})))}catch(e){console.error("Fetch districts error:",e)}finally{R.value=!1}},J=_(()=>S.value.map(s=>({label:s.name,value:s.id}))),Q=_(()=>N.value.map(s=>({label:s.name,value:s.id}))),Y=_(()=>h.value.map(s=>({label:s.name,value:s.id})));F(()=>t.value.provinceId,(s,e)=>{if(s&&s!==e){const i=S.value.find(o=>o.id===s);t.value.provinceName=i?.name||"",t.value.cityId="",t.value.cityName="",t.value.districtId="",t.value.districtName="",N.value=[],h.value=[],K(s)}}),F(()=>t.value.cityId,(s,e)=>{if(s&&s!==e){const i=N.value.find(o=>o.id===s);t.value.cityName=i?.name||"",t.value.districtId="",t.value.districtName="",h.value=[],O(s)}}),F(()=>t.value.districtId,s=>{if(s){const e=h.value.find(i=>i.id===s);t.value.districtName=e?.name||""}}),pe(async()=>{await W(),l.admin.provinceId&&await K(l.admin.provinceId),l.admin.cityId&&await O(l.admin.cityId)});const Z=async()=>{if(!t.value.storeName.trim()){r.error("Error","Nama toko tidak boleh kosong");return}if(t.value.storeName.trim().length<3){r.error("Error","Nama toko minimal 3 karakter");return}E.value=!0;try{const e=await(await fetch("/admin/settings/profile",{method:"PUT",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":I()},credentials:"include",body:JSON.stringify(t.value)})).json();e.success?(r.success("Berhasil",e.message),ve.reload({only:["admin"]})):r.error("Gagal",e.message)}catch(s){console.error("Save profile error:",s),r.error("Error","Terjadi kesalahan saat menyimpan profil")}finally{E.value=!1}},ee=async s=>{const i=s.target.files?.[0];if(i){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(i.type)){r.error("Error","Format file harus JPG, PNG, atau WebP");return}if(i.size>2*1024*1024){r.error("Error","Ukuran file maksimal 2MB");return}L.value=!0;try{const o=new FormData;o.append("logo",i);const m=await(await fetch("/admin/settings/logo",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":I()},credentials:"include",body:o})).json();m.success?(w.value=m.data.logo,C.value=!1,r.success("Berhasil",m.message)):r.error("Gagal",m.message)}catch(o){console.error("Upload logo error:",o),r.error("Error","Terjadi kesalahan saat upload logo")}finally{L.value=!1,j.value&&(j.value.value="")}}},ae=async s=>{const i=s.target.files?.[0];if(i){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(i.type)){r.error("Error","Format file harus JPG, PNG, atau WebP");return}if(i.size>5*1024*1024){r.error("Error","Ukuran file maksimal 5MB");return}X.value=!0;try{const o=new FormData;o.append("banner",i);const m=await(await fetch("/admin/settings/banner",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":I()},credentials:"include",body:o})).json();m.success?(x.value=m.data.banner,A.value=!1,r.success("Berhasil",m.message)):r.error("Gagal",m.message)}catch(o){console.error("Upload banner error:",o),r.error("Error","Terjadi kesalahan saat upload banner")}finally{X.value=!1,T.value&&(T.value.value="")}}},te=async()=>{if(confirm("Apakah Anda yakin ingin menghapus logo?")){B.value=!0;try{const e=await(await fetch("/admin/settings/logo",{method:"DELETE",headers:{"X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":I()},credentials:"include"})).json();e.success?(w.value=null,r.success("Berhasil",e.message)):r.error("Gagal",e.message)}catch(s){console.error("Delete logo error:",s),r.error("Error","Terjadi kesalahan saat menghapus logo")}finally{B.value=!1}}},se=async()=>{if(confirm("Apakah Anda yakin ingin menghapus banner?")){V.value=!0;try{const e=await(await fetch("/admin/settings/banner",{method:"DELETE",headers:{"X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":I()},credentials:"include"})).json();e.success?(x.value=null,r.success("Berhasil",e.message)):r.error("Gagal",e.message)}catch(s){console.error("Delete banner error:",s),r.error("Error","Terjadi kesalahan saat menghapus banner")}finally{V.value=!1}}},le=()=>{t.value={storeName:l.admin.storeName,description:l.admin.description||"",phone:l.admin.phone||"",email:l.admin.email||"",address:l.admin.address||"",cityId:l.admin.cityId||"",cityName:l.admin.cityName||"",districtId:l.admin.districtId||"",districtName:l.admin.districtName||"",provinceId:l.admin.provinceId||"",provinceName:l.admin.provinceName||"",postalCode:l.admin.postalCode||""}};return(s,e)=>{const i=ue,o=de,f=ce,m=ne,z=ie,D=oe;return g(),y("div",fe,[c(" Page Header "),a("div",ke,[e[13]||(e[13]=a("div",null,[a("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Profil Toko"),a("p",{class:"text-sm text-slate-500 dark:text-slate-400 mt-1"}," Kelola informasi dan tampilan toko Anda ")],-1)),n(i,{color:M.value.color,size:"lg"},{default:k(()=>[p(v(M.value.label),1)]),_:1},8,["color"])]),c(" Store Info Card "),a("div",be,[c(" Banner Section "),a("div",xe,[x.value&&!A.value?(g(),y("img",{key:0,src:x.value,alt:"Store Banner",class:"w-full h-full object-cover",onError:e[0]||(e[0]=d=>A.value=!0)},null,40,he)):c("v-if",!0),e[14]||(e[14]=a("div",{class:"absolute inset-0 bg-black/20"},null,-1)),c(" Banner Actions "),a("div",ye,[a("input",{ref_key:"bannerInput",ref:T,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",class:"hidden",onChange:ae},null,544),n(f,{color:"white",variant:"solid",size:"sm",loading:X.value,onClick:e[1]||(e[1]=d=>T.value?.click())},{default:k(()=>[n(o,{name:"i-heroicons-camera",class:"w-4 h-4 mr-1"}),p(" "+v(x.value?"Ganti":"Upload")+" Banner ",1)]),_:1},8,["loading"]),x.value?(g(),q(f,{key:0,color:"error",variant:"soft",size:"sm",loading:V.value,onClick:se},{default:k(()=>[n(o,{name:"i-heroicons-trash",class:"w-4 h-4"})]),_:1},8,["loading"])):c("v-if",!0)]),c(" Logo Section "),a("div",we,[a("div",Ne,[a("div",Ie,[w.value&&!C.value?(g(),y("img",{key:0,src:w.value,alt:"Store Logo",class:"w-full h-full object-cover",onError:e[2]||(e[2]=d=>C.value=!0)},null,40,_e)):(g(),y("div",je,v(G(t.value.storeName)),1))]),c(" Logo Actions "),a("div",Te,[a("input",{ref_key:"logoInput",ref:j,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",class:"hidden",onChange:ee},null,544),n(f,{color:"primary",size:"xs",class:"rounded-full shadow-lg",loading:L.value,onClick:e[3]||(e[3]=d=>j.value?.click())},{default:k(()=>[n(o,{name:"i-heroicons-camera",class:"w-3 h-3"})]),_:1},8,["loading"]),w.value?(g(),q(f,{key:0,color:"error",size:"xs",class:"rounded-full shadow-lg",loading:B.value,onClick:te},{default:k(()=>[n(o,{name:"i-heroicons-trash",class:"w-3 h-3"})]),_:1},8,["loading"])):c("v-if",!0)])])])]),c(" Store Stats "),a("div",Ce,[a("div",Ae,[a("div",null,[a("h2",Se,v(t.value.storeName),1),a("p",Ue," Bergabung sejak "+v(H(b.admin.createdAt)),1)]),a("div",Pe,[a("div",Re,[a("div",Ee,[n(o,{name:"i-heroicons-star-solid",class:"w-5 h-5 text-amber-400"}),p(" "+v(Number(b.admin.rating||0).toFixed(1)),1)]),e[15]||(e[15]=a("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Rating",-1))]),a("div",Le,[a("p",Xe,v(b.admin.totalReviews||0),1),e[16]||(e[16]=a("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Ulasan",-1))]),a("div",Be,[a("p",Ve,v(b.admin.totalSales||0),1),e[17]||(e[17]=a("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Terjual",-1))])])])])]),c(" Profile Form "),a("div",De,[e[32]||(e[32]=a("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white mb-6"},"Informasi Toko",-1)),a("div",Fe,[c(" Store Name "),a("div",qe,[a("div",null,[e[18]||(e[18]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},[p(" Nama Toko "),a("span",{class:"text-red-500"},"*")],-1)),n(m,{modelValue:t.value.storeName,"onUpdate:modelValue":e[4]||(e[4]=d=>t.value.storeName=d),placeholder:"Masukkan nama toko",size:"lg",class:"w-full"},null,8,["modelValue"]),a("p",$e," URL Toko: ogitu.com/store/"+v(b.admin.slug),1)]),a("div",null,[e[19]||(e[19]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Email Toko ",-1)),n(m,{modelValue:t.value.email,"onUpdate:modelValue":e[5]||(e[5]=d=>t.value.email=d),type:"email",placeholder:"email@toko.com",size:"lg",class:"w-full"},null,8,["modelValue"])])]),c(" Phone "),a("div",null,[e[20]||(e[20]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Nomor Telepon ",-1)),n(m,{modelValue:t.value.phone,"onUpdate:modelValue":e[6]||(e[6]=d=>t.value.phone=d),placeholder:"08xxxxxxxxxx",size:"lg",class:"w-full md:w-1/2"},null,8,["modelValue"])]),c(" Description "),a("div",null,[e[21]||(e[21]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Deskripsi Toko ",-1)),n(z,{modelValue:t.value.description,"onUpdate:modelValue":e[7]||(e[7]=d=>t.value.description=d),placeholder:"Ceritakan tentang toko Anda...",rows:4,class:"w-full"},null,8,["modelValue"])]),c(" Address "),a("div",null,[e[22]||(e[22]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Alamat Lengkap ",-1)),n(z,{modelValue:t.value.address,"onUpdate:modelValue":e[8]||(e[8]=d=>t.value.address=d),placeholder:"Alamat lengkap toko",rows:2,class:"w-full"},null,8,["modelValue"])]),c(" Location Section Header "),a("div",Me,[a("h4",Ke,[n(o,{name:"i-heroicons-map-pin",class:"w-5 h-5 inline-block mr-2 text-violet-600"}),e[23]||(e[23]=p(" Alamat Pickup ",-1))]),e[24]||(e[24]=a("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"}," Alamat ini digunakan untuk perhitungan ongkos kirim dan pickup barang ",-1))]),c(" Location Dropdowns "),a("div",Oe,[a("div",null,[e[25]||(e[25]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},[p(" Provinsi "),a("span",{class:"text-red-500"},"*")],-1)),n(D,{modelValue:t.value.provinceId,"onUpdate:modelValue":e[9]||(e[9]=d=>t.value.provinceId=d),items:J.value,placeholder:"Pilih provinsi",loading:U.value,"value-key":"value",class:"w-full"},null,8,["modelValue","items","loading"])]),a("div",null,[e[26]||(e[26]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},[p(" Kota/Kabupaten "),a("span",{class:"text-red-500"},"*")],-1)),n(D,{modelValue:t.value.cityId,"onUpdate:modelValue":e[10]||(e[10]=d=>t.value.cityId=d),items:Q.value,placeholder:"Pilih kota/kabupaten",loading:P.value,disabled:!t.value.provinceId,"value-key":"value",class:"w-full"},null,8,["modelValue","items","loading","disabled"])]),a("div",null,[e[27]||(e[27]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},[p(" Kecamatan "),a("span",{class:"text-red-500"},"*")],-1)),n(D,{modelValue:t.value.districtId,"onUpdate:modelValue":e[11]||(e[11]=d=>t.value.districtId=d),items:Y.value,placeholder:"Pilih kecamatan",loading:R.value,disabled:!t.value.cityId,"value-key":"value",class:"w-full"},null,8,["modelValue","items","loading","disabled"])])]),c(" Postal Code "),a("div",ze,[a("div",null,[e[28]||(e[28]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Kode Pos ",-1)),n(m,{modelValue:t.value.postalCode,"onUpdate:modelValue":e[12]||(e[12]=d=>t.value.postalCode=d),placeholder:"12345",size:"lg",class:"w-full"},null,8,["modelValue"])]),a("div",Ge,[e[29]||(e[29]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Lokasi Saat Ini ",-1)),a("div",He,[n(o,{name:"i-heroicons-map-pin",class:"w-4 h-4 mr-2 text-slate-400"}),t.value.districtName&&t.value.cityName&&t.value.provinceName?(g(),y("span",We,v(t.value.districtName)+", "+v(t.value.cityName)+", "+v(t.value.provinceName),1)):(g(),y("span",Je," Belum ada lokasi dipilih "))])])]),c(" Actions "),a("div",Qe,[$.value?(g(),q(f,{key:0,color:"neutral",variant:"outline",onClick:le},{default:k(()=>[...e[30]||(e[30]=[p(" Reset ",-1)])]),_:1})):c("v-if",!0),n(f,{color:"primary",loading:E.value,disabled:!$.value,onClick:Z},{default:k(()=>[n(o,{name:"i-heroicons-check",class:"w-4 h-4 mr-1"}),e[31]||(e[31]=p(" Simpan Perubahan ",-1))]),_:1},8,["loading","disabled"])])])]),c(" Tips Card "),a("div",Ye,[a("div",Ze,[a("div",ea,[n(o,{name:"i-heroicons-light-bulb",class:"w-5 h-5 text-violet-600 dark:text-violet-400"})]),e[33]||(e[33]=a("div",null,[a("h4",{class:"font-semibold text-violet-900 dark:text-violet-100 mb-2"},"Tips Profil Toko"),a("ul",{class:"text-sm text-violet-700 dark:text-violet-300 space-y-1"},[a("li",null,"• Gunakan logo yang jelas dan mudah dikenali"),a("li",null,"• Banner dengan ukuran 1200x300 pixel akan terlihat optimal"),a("li",null,"• Deskripsi yang lengkap membantu pembeli mengenal toko Anda"),a("li",null,[p("• "),a("strong",null,"Alamat Pickup wajib diisi"),p(" agar ongkos kirim dapat dihitung dengan akurat, "),a("strong",null,"Kami hanya akan menampilkan produk aktif untuk toko yang sudah memiliki alamat pickup!")]),a("li",null,"• Pilih kecamatan dengan benar untuk estimasi pengiriman yang tepat")])],-1))])])])}}});export{ma as default};
