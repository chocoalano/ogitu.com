import{a as M}from"./Button-CI_-soaG.js";import{d as w,h as m,q as O,a as P,j as f,b as d,f as p,w as x,u as _,m as C,t as D,l as h,o as N}from"./app-CyjtdGoI.js";import{g as A}from"./ColorModeButton-Bf7Nr8w3.js";import{A as T}from"./admin-BzR6vrex.js";import{_ as F}from"./ProductForm.vue_vue_type_script_setup_true_lang-D8Dmg0Wv.js";import"./Tooltip-BrTR-Vq7.js";import"./Switch-sBWkdoVy.js";import"./Label-yeknIWsP.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Textarea-CZyY9J1c.js";import"./SelectMenu-DKAhKU-v.js";import"./index-v4g8wp86.js";import"./FormField-qFQ_28ZO.js";const B={class:"space-y-6"},I={class:"flex items-center gap-4"},K={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},Z=w({layout:T,__name:"create",props:{categories:{default:()=>[]},admin:{default:()=>({id:0,storeName:"Admin",slug:"admin",status:"active"})},isDev:{type:Boolean,default:!1}},setup(g){const s=g,l=A(),k=()=>{const a=["Kemeja Batik Premium","Celana Jeans Slim Fit","Sepatu Sneakers Original","Tas Ransel Laptop","Jam Tangan Digital","Kaos Polos Cotton Combed","Jaket Hoodie Unisex","Sandal Kulit Asli","Topi Baseball Cap","Dompet Kulit Pria"],n=["Nike","Adidas","Puma","Zara","H&M","Uniqlo","Local Brand","Supreme","Gucci","Louis Vuitton"],o=["Produk berkualitas tinggi dengan bahan premium yang nyaman digunakan sehari-hari. Cocok untuk berbagai acara formal maupun casual.","Dibuat dengan material terbaik, produk ini memberikan kenyamanan maksimal dan tahan lama. Desain modern yang stylish.","Koleksi terbaru dengan desain eksklusif. Sangat cocok untuk Anda yang ingin tampil beda dan percaya diri."],i=a[Math.floor(Math.random()*a.length)],r=Math.floor(Math.random()*9e5)+1e5,t=Math.random()>.5,S=Math.floor(Math.random()*30)+10;return{name:i,slug:i.toLowerCase().replace(/\s+/g,"-"),sku:`SKU-${Date.now().toString(36).toUpperCase()}`,categoryId:s.categories.length>0?s.categories[Math.floor(Math.random()*s.categories.length)].id:null,description:o[Math.floor(Math.random()*o.length)],specifications:[{key:"Material",value:"Cotton 100%"},{key:"Ukuran",value:"S, M, L, XL"},{key:"Warna",value:"Hitam, Putih, Navy"}],price:r,discountPrice:t?Math.floor(r*(1-S/100)):null,stock:Math.floor(Math.random()*100)+10,minOrder:1,maxOrder:10,weight:Math.floor(Math.random()*1e3)+100,brand:n[Math.floor(Math.random()*n.length)],condition:"new",status:"draft",isFeatured:Math.random()>.7,images:[],variants:[]}},e=m({name:"",slug:"",sku:"",categoryId:null,description:"",specifications:[],price:0,discountPrice:null,stock:0,minOrder:1,maxOrder:null,weight:0,brand:"",condition:"new",status:"draft",isFeatured:!1,images:[],variants:[]});O(()=>{if(s.isDev){const a=k();e.value=a}});const u=m({}),c=m(!1),v=()=>{if(typeof document>"u")return"";const a=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return a?decodeURIComponent(a[1]):""},y=async()=>{c.value=!0,u.value={};try{const a=new FormData;a.append("name",e.value.name),e.value.slug&&a.append("slug",e.value.slug),e.value.sku&&a.append("sku",e.value.sku),e.value.categoryId&&a.append("categoryId",String(e.value.categoryId)),a.append("description",e.value.description||""),a.append("specifications",JSON.stringify(e.value.specifications)),a.append("price",String(e.value.price)),e.value.discountPrice&&a.append("discountPrice",String(e.value.discountPrice)),a.append("stock",String(e.value.stock)),a.append("minOrder",String(e.value.minOrder||1)),e.value.maxOrder&&a.append("maxOrder",String(e.value.maxOrder)),a.append("weight",String(e.value.weight)),a.append("brand",e.value.brand||""),a.append("condition",e.value.condition),a.append("status",e.value.status),a.append("isFeatured",String(e.value.isFeatured));const n=[];for(const t of e.value.images)t.file&&!t.isDeleted&&(a.append("newImages",t.file),n.push({isPrimary:t.isPrimary,sortOrder:t.sortOrder}));a.append("newImagesMeta",JSON.stringify(n));const o=e.value.variants.filter(t=>t.isActive!==!1).map(t=>({name:t.name,value:t.value,sku:t.sku,priceAdjustment:t.priceAdjustment,stock:t.stock,isActive:t.isActive}));a.append("variants",JSON.stringify(o));const r=await(await fetch("/admin/products",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":v()},body:a})).json();r.success?(l.success("Berhasil",r.message),h.visit("/admin/products")):(u.value=r.errors||{},l.error("Gagal",r.message))}catch(a){console.error("Submit error:",a),l.error("Error","Terjadi kesalahan saat menyimpan produk")}finally{c.value=!1}},b=()=>{h.visit("/admin/products")};return(a,n)=>{const o=M;return N(),P("div",B,[f(" Page Header "),d("div",I,[p(_(C),{href:"/admin/products"},{default:x(()=>[p(o,{icon:"i-heroicons-arrow-left",color:"neutral",variant:"ghost",size:"sm"})]),_:1}),d("div",null,[n[1]||(n[1]=d("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Tambah Produk",-1)),d("p",K," Tambah produk baru ke toko "+D(s.admin.storeName),1)])]),f(" Form "),p(F,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=i=>e.value=i),categories:g.categories,errors:u.value,"is-submitting":c.value,onSubmit:y,onCancel:b},null,8,["modelValue","categories","errors","is-submitting"])])}}});export{Z as default};
