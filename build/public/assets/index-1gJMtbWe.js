import{_ as H}from"./Switch-sBWkdoVy.js";import{_ as K}from"./Card-BjL1m_sW.js";import{_ as W}from"./Badge-DfumusWV.js";import{a as q,_ as J}from"./Button-CI_-soaG.js";import{d as O,c as U,h as B,a as u,f as n,b as e,u as $,i as Q,j as o,e as V,w as f,o as d,F as x,r as w,n as T,t as y,k as R,C as z,T as X,$ as Y}from"./app-CyjtdGoI.js";import{A as Z}from"./admin-BzR6vrex.js";import"./Label-yeknIWsP.js";import"./ColorModeButton-Bf7Nr8w3.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Tooltip-BrTR-Vq7.js";const ee={class:"space-y-6"},te={class:"flex items-center justify-between"},ae={key:0,class:"flex items-center gap-3"},se={class:"flex items-center justify-between"},ie={class:"flex items-center gap-4"},le={class:"text-sm text-gray-600 dark:text-gray-400"},ne={class:"space-y-6"},oe={class:"flex items-center justify-between"},re={class:"flex items-center gap-3"},de={class:"p-2 bg-primary-50 dark:bg-primary-900/20 rounded-lg"},ce={class:"font-semibold text-gray-900 dark:text-white"},ue={class:"text-sm text-gray-500 dark:text-gray-400"},me={class:"flex items-center gap-2"},pe={class:"text-sm text-gray-500 dark:text-gray-400"},ye={class:"divide-y divide-gray-200 dark:divide-gray-700"},ge={class:"flex items-center justify-between gap-4"},ve={class:"flex items-center gap-3"},be={class:"flex-1"},fe={class:"font-medium text-gray-900 dark:text-white"},ke={class:"text-sm text-gray-500 dark:text-gray-400"},xe={class:"flex items-center gap-6"},_e={class:"text-xs text-gray-400"},he={key:0,class:"fixed bottom-4 left-4 right-4 md:hidden bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 z-50"},we={class:"flex items-center justify-between"},Ee={class:"flex gap-2"},Ge=O({layout:Z,__name:"index",props:{settings:{}},setup(j){const m=j,A=U(()=>[...m.settings.orders,...m.settings.payments,...m.settings.promotions,...m.settings.system]),E={orders:{label:"Pesanan",icon:"i-heroicons-shopping-bag",description:"Notifikasi terkait status dan aktivitas pesanan"},payments:{label:"Pembayaran",icon:"i-heroicons-credit-card",description:"Notifikasi terkait transaksi dan pembayaran"},promotions:{label:"Promosi",icon:"i-heroicons-megaphone",description:"Notifikasi terkait promosi dan penawaran"},system:{label:"Sistem",icon:"i-heroicons-cog-6-tooth",description:"Notifikasi terkait sistem dan keamanan"}},G=U(()=>[{key:"orders",notifications:m.settings.orders},{key:"payments",notifications:m.settings.payments},{key:"promotions",notifications:m.settings.promotions},{key:"system",notifications:m.settings.system}]),g=B(!1),r=B(new Map),F=(t,a)=>{const i=t[a];t[a]=!i,r.value.has(t.id)||r.value.set(t.id,{id:t.id});const l=r.value.get(t.id);l[a]=t[a],g.value=!0},_=B(!1),S=async()=>{if(r.value.size===0)return;_.value=!0;const t=Array.from(r.value.values());z({notifications:t}).post("/admin/settings/notifications/bulk",{onSuccess:()=>{g.value=!1,r.value.clear()},onFinish:()=>{_.value=!1}})},P=()=>{window.location.reload()},h=[{key:"emailEnabled",label:"Email",icon:"i-heroicons-envelope",available:!0},{key:"pushEnabled",label:"Push",icon:"i-heroicons-bell",available:!0},{key:"whatsappEnabled",label:"WhatsApp",icon:"i-heroicons-chat-bubble-left-right",available:!1}],v=t=>!!t.emailEnabled||!!t.pushEnabled||!!t.whatsappEnabled,L=(t,a)=>!!t[a],D=t=>{const i=!v(t);h.forEach(l=>{if(l.available){t[l.key]=i,r.value.has(t.id)||r.value.set(t.id,{id:t.id});const p=r.value.get(t.id);p[l.key]=i}}),g.value=!0},C=t=>t.every(a=>v(a)),I=t=>{const a=t.filter(i=>v(i)).length;return a>0&&a<t.length},M=t=>{const i=!C(t);t.forEach(l=>{h.forEach(p=>{if(p.available){l[p.key]=i,r.value.has(l.id)||r.value.set(l.id,{id:l.id});const k=r.value.get(l.id);k[p.key]=i}})}),g.value=!0};return(t,a)=>{const i=q,l=J,p=W,k=K,N=H;return d(),u(x,null,[n($(Q),{title:"Pengaturan Notifikasi"}),e("div",ee,[o(" Header "),e("div",te,[a[2]||(a[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Pengaturan Notifikasi"),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Kelola preferensi notifikasi untuk berbagai event ")],-1)),o(" Save Button "),g.value?(d(),u("div",ae,[a[1]||(a[1]=e("span",{class:"text-sm text-amber-600 dark:text-amber-400"}," Ada perubahan yang belum disimpan ",-1)),n(i,{color:"neutral",variant:"outline",label:"Batal",onClick:P}),n(i,{color:"primary",label:"Simpan Perubahan",loading:_.value,onClick:S},null,8,["loading"])])):o("v-if",!0)]),o(" Channel Legend "),n(k,null,{default:f(()=>[e("div",se,[a[4]||(a[4]=e("div",null,[e("h3",{class:"font-medium text-gray-900 dark:text-white"},"Saluran Notifikasi"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Pilih saluran yang ingin digunakan untuk setiap jenis notifikasi ")],-1)),e("div",ie,[(d(),u(x,null,w(h,s=>e("div",{key:s.key,class:T(["flex items-center gap-2",[s.available?"":"opacity-50"]])},[n(l,{name:s.icon,class:"w-5 h-5 text-gray-400"},null,8,["name"]),e("span",le,y(s.label),1),s.available?o("v-if",!0):(d(),V(p,{key:0,size:"xs",color:"neutral",variant:"soft"},{default:f(()=>[...a[3]||(a[3]=[R(" Segera ",-1)])]),_:1}))],2)),64))])])]),_:1}),o(" Notification Groups "),e("div",ne,[(d(!0),u(x,null,w(G.value,s=>(d(),u("div",{key:s.key},[n(k,null,{header:f(()=>[e("div",oe,[e("div",re,[e("div",de,[n(l,{name:E[s.key]?.icon||"i-heroicons-bell",class:"w-5 h-5 text-primary-500"},null,8,["name"])]),e("div",null,[e("h2",ce,y(E[s.key]?.label||s.key),1),e("p",ue,y(E[s.key]?.description),1)])]),o(" Group Toggle "),e("div",me,[e("span",pe,y(C(s.notifications)?"Aktif":"Nonaktif"),1),n(N,{"model-value":C(s.notifications),indeterminate:I(s.notifications),"onUpdate:modelValue":c=>M(s.notifications)},null,8,["model-value","indeterminate","onUpdate:modelValue"])])])]),default:f(()=>[e("div",ye,[(d(!0),u(x,null,w(s.notifications,c=>(d(),u("div",{key:c.id,class:T(["py-4 first:pt-0 last:pb-0",{"opacity-50":!v(c)}])},[e("div",ge,[o(" Enable/Disable Toggle "),e("div",ve,[n(N,{"model-value":v(c),size:"lg","onUpdate:modelValue":b=>D(c)},null,8,["model-value","onUpdate:modelValue"]),e("div",be,[e("h4",fe,y(c.eventName),1),e("p",ke,y(c.description||"Tidak ada deskripsi"),1)])]),o(" Channel Toggles "),e("div",xe,[(d(),u(x,null,w(h,b=>e("div",{key:b.key,class:"flex flex-col items-center gap-1"},[n(N,{"model-value":L(c,b.key),disabled:!b.available||!v(c),"onUpdate:modelValue":Ce=>F(c,b.key)},null,8,["model-value","disabled","onUpdate:modelValue"]),e("span",_e,y(b.label),1)])),64))])])],2))),128))])]),_:2},1024)]))),128))]),o(" Empty State "),A.value.length===0?(d(),V(k,{key:0,class:"text-center py-12"},{default:f(()=>[n(l,{name:"i-heroicons-bell-slash",class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a[5]||(a[5]=e("h3",{class:"font-medium text-gray-900 dark:text-white mb-2"}," Tidak ada pengaturan notifikasi ",-1)),a[6]||(a[6]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," Pengaturan notifikasi belum diinisialisasi ",-1)),n(i,{color:"primary",label:"Inisialisasi Notifikasi",onClick:a[0]||(a[0]=s=>$(z)({}).post("/admin/settings/notifications/initialize"))})]),_:1})):o("v-if",!0),o(" Floating Save Button (Mobile) "),(d(),V(Y,{to:"body"},[n(X,{"enter-active-class":"transform transition duration-200 ease-out","enter-from-class":"translate-y-full opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transform transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-full opacity-0"},{default:f(()=>[g.value?(d(),u("div",he,[e("div",we,[a[7]||(a[7]=e("span",{class:"text-sm text-amber-600 dark:text-amber-400"}," Perubahan belum disimpan ",-1)),e("div",Ee,[n(i,{size:"sm",color:"neutral",variant:"outline",label:"Batal",onClick:P}),n(i,{size:"sm",color:"primary",label:"Simpan",loading:_.value,onClick:S},null,8,["loading"])])])])):o("v-if",!0)]),_:1})]))])],64)}}});export{Ge as default};
