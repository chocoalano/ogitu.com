import{_ as S,a as h}from"./Button-CI_-soaG.js";import{_ as U}from"./Select-D6kv-Jzs.js";import{_ as j,g as P}from"./ColorModeButton-Bf7Nr8w3.js";import{d as B,h as b,c as E,a as u,j as t,b as l,f as i,w as k,u as $,m as A,t as n,D as F,k as d,l as K,o as m}from"./app-CyjtdGoI.js";import{A as M}from"./admin-BzR6vrex.js";import"./useFormControl-D_pV87FU.js";import"./Tooltip-BrTR-Vq7.js";const D={class:"space-y-6"},I={class:"flex items-center gap-4"},L={class:"text-gray-500 dark:text-gray-400"},O={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6"},R={key:0,class:"mt-1 text-sm text-red-500"},T={key:0,class:"mt-1 text-sm text-red-500"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={key:0,class:"mt-1 text-sm text-red-500"},q={key:0,class:"mt-1 text-sm text-red-500"},z={class:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700"},ae=B({layout:M,__name:"edit",props:{user:{}},setup(g){const o=g,x=P(),a=b({fullName:o.user.fullName||"",email:o.user.email,password:"",passwordConfirmation:"",role:o.user.role}),f=b(!1),s=b({}),w=[{label:"Admin",value:"admin"},{label:"Super Admin",value:"superadmin"}],N=E(()=>a.value.fullName!==(o.user.fullName||"")||a.value.email!==o.user.email||a.value.role!==o.user.role||a.value.password!==""),_=()=>(s.value={},a.value.fullName||(s.value.fullName="Nama lengkap wajib diisi"),a.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.value.email)||(s.value.email="Format email tidak valid"):s.value.email="Email wajib diisi",a.value.password&&(a.value.password.length<8&&(s.value.password="Password minimal 8 karakter"),a.value.password!==a.value.passwordConfirmation&&(s.value.passwordConfirmation="Konfirmasi password tidak cocok")),Object.keys(s.value).length===0),y=()=>{if(!_())return;f.value=!0;const v={fullName:a.value.fullName,email:a.value.email,role:a.value.role};a.value.password&&(v.password=a.value.password),K.put(`/admin/users/${o.user.id}`,v,{onSuccess:()=>{x.success("Pengguna berhasil diperbarui")},onError:e=>{e&&(s.value={...s.value,...e}),x.error("Gagal memperbarui pengguna")},onFinish:()=>{f.value=!1}})};return(v,e)=>{const V=S,p=j,C=U,c=h;return m(),u("div",D,[t(" Page Header "),l("div",I,[i($(A),{href:"/admin/users",class:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"},{default:k(()=>[i(V,{name:"i-heroicons-arrow-left",class:"w-5 h-5 text-slate-600 dark:text-slate-400"})]),_:1}),l("div",null,[e[5]||(e[5]=l("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Edit Pengguna",-1)),l("p",L," Edit data pengguna "+n(o.user.fullName||o.user.email),1)])]),t(" Form "),l("div",O,[l("form",{onSubmit:F(y,["prevent"]),class:"space-y-6"},[t(" Full Name "),l("div",null,[e[6]||(e[6]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[d(" Nama Lengkap "),l("span",{class:"text-red-500"},"*")],-1)),i(p,{modelValue:a.value.fullName,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.fullName=r),placeholder:"Masukkan nama lengkap",error:!!s.value.fullName},null,8,["modelValue","error"]),s.value.fullName?(m(),u("p",R,n(s.value.fullName),1)):t("v-if",!0)]),t(" Email "),l("div",null,[e[7]||(e[7]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[d(" Email "),l("span",{class:"text-red-500"},"*")],-1)),i(p,{modelValue:a.value.email,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.email=r),type:"email",placeholder:"Masukkan email",error:!!s.value.email},null,8,["modelValue","error"]),s.value.email?(m(),u("p",T,n(s.value.email),1)):t("v-if",!0)]),t(" Password (optional) "),l("div",G,[l("div",null,[e[8]||(e[8]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Password Baru ",-1)),i(p,{modelValue:a.value.password,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.password=r),type:"password",placeholder:"Kosongkan jika tidak ingin mengubah",error:!!s.value.password},null,8,["modelValue","error"]),s.value.password?(m(),u("p",H,n(s.value.password),1)):t("v-if",!0)]),l("div",null,[e[9]||(e[9]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Konfirmasi Password Baru ",-1)),i(p,{modelValue:a.value.passwordConfirmation,"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.passwordConfirmation=r),type:"password",placeholder:"Konfirmasi password baru",error:!!s.value.passwordConfirmation},null,8,["modelValue","error"]),s.value.passwordConfirmation?(m(),u("p",q,n(s.value.passwordConfirmation),1)):t("v-if",!0)])]),t(" Role "),l("div",null,[e[10]||(e[10]=l("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[d(" Role "),l("span",{class:"text-red-500"},"*")],-1)),i(C,{modelValue:a.value.role,"onUpdate:modelValue":e[4]||(e[4]=r=>a.value.role=r),items:w},null,8,["modelValue"]),e[11]||(e[11]=l("p",{class:"mt-1 text-sm text-slate-500 dark:text-slate-400"}," Super Admin memiliki akses penuh ke semua fitur termasuk manajemen pengguna ",-1))]),t(" Submit "),l("div",z,[i(c,{color:"neutral",variant:"outline",to:"/admin/users"},{default:k(()=>[...e[12]||(e[12]=[d(" Batal ",-1)])]),_:1}),i(c,{type:"submit",color:"primary",loading:f.value,disabled:!N.value},{default:k(()=>[...e[13]||(e[13]=[d(" Simpan Perubahan ",-1)])]),_:1},8,["loading","disabled"])])],32)])])}}});export{ae as default};
