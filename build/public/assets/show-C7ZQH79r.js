import{A as q}from"./admin-BzR6vrex.js";import{a as M,_ as R}from"./Button-CI_-soaG.js";import{d as $,a as u,b as t,f as o,u as f,m as A,w as p,t as i,k as d,o as l,j as c,e as D,n as I,c as H,F as j,r as X,h as S,l as U,Q as z,R as J}from"./app-CyjtdGoI.js";import{_ as O}from"./Badge-DfumusWV.js";import{b as K,g as F,a as B,f as C}from"./types-B2pfy8Mo.js";import{_ as V}from"./Modal-Bgd8PL5Y.js";import{g as G}from"./ColorModeButton-Bf7Nr8w3.js";import"./Tooltip-BrTR-Vq7.js";const W={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Q={class:"flex items-center gap-4"},Y={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},Z={class:"flex items-center gap-2"},tt=$({__name:"ProductShowHeader",props:{productName:{},productId:{}},emits:["delete"],setup(e){return(k,a)=>{const n=M;return l(),u("div",W,[t("div",Q,[o(f(A),{href:"/admin/products"},{default:p(()=>[o(n,{icon:"i-heroicons-arrow-left",color:"neutral",variant:"ghost",size:"sm"})]),_:1}),t("div",null,[a[1]||(a[1]=t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Detail Produk",-1)),t("p",Y,i(e.productName),1)])]),t("div",Z,[o(f(A),{href:`/admin/products/${e.productId}/edit`},{default:p(()=>[o(n,{icon:"i-heroicons-pencil",color:"primary",variant:"outline"},{default:p(()=>[...a[2]||(a[2]=[d(" Edit ",-1)])]),_:1})]),_:1},8,["href"]),o(n,{icon:"i-heroicons-trash",color:"error",variant:"outline",onClick:a[0]||(a[0]=m=>k.$emit("delete"))},{default:p(()=>[...a[3]||(a[3]=[d(" Hapus ",-1)])]),_:1})])])}}}),et={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6"},st={class:"flex flex-col sm:flex-row gap-6"},at={class:"w-full sm:w-48 h-48 rounded-xl bg-slate-100 dark:bg-slate-700 overflow-hidden shrink-0"},ot=["src","alt"],it={key:1,class:"w-full h-full flex items-center justify-center"},nt={class:"flex-1 min-w-0"},lt={class:"flex items-center gap-2 mb-2 flex-wrap"},rt={class:"text-xl font-bold text-slate-900 dark:text-white mb-2"},dt={class:"flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400 mb-4 flex-wrap"},ct={key:0},ut={key:1},mt={class:"flex items-baseline gap-3 mb-4 flex-wrap"},pt={class:"text-2xl font-bold text-violet-600 dark:text-violet-400"},ft={key:0,class:"text-lg text-slate-400 line-through"},kt={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},xt={class:"font-semibold text-slate-900 dark:text-white"},gt={class:"flex items-center gap-1"},vt={class:"font-semibold text-slate-900 dark:text-white"},ht={class:"text-xs text-slate-500"},bt={class:"font-semibold text-slate-900 dark:text-white"},wt=$({__name:"ProductShowInfo",props:{product:{},primaryImage:{}},setup(e){return(k,a)=>{const n=R,m=O;return l(),u("div",et,[t("div",st,[c(" Image "),t("div",at,[e.primaryImage?.url?(l(),u("img",{key:0,src:e.primaryImage.url,alt:e.product.name,class:"w-full h-full object-cover"},null,8,ot)):(l(),u("div",it,[o(n,{name:"i-heroicons-photo",class:"w-16 h-16 text-slate-400"})]))]),c(" Info "),t("div",nt,[t("div",lt,[o(m,{color:f(K)(e.product.status).color,variant:"subtle"},{default:p(()=>[d(i(f(K)(e.product.status).label),1)]),_:1},8,["color"]),o(m,{color:f(F)(e.product.condition).color,variant:"subtle"},{default:p(()=>[d(i(f(F)(e.product.condition).label),1)]),_:1},8,["color"]),e.product.isFeatured?(l(),D(m,{key:0,color:"warning",variant:"subtle"},{default:p(()=>[o(n,{name:"i-heroicons-star",class:"w-3 h-3 mr-0.5"}),a[0]||(a[0]=d(" Featured ",-1))]),_:1})):c("v-if",!0)]),t("h2",rt,i(e.product.name),1),t("div",dt,[t("span",null,"SKU: "+i(e.product.sku),1),e.product.category?(l(),u("span",ct,"• "+i(e.product.category.name),1)):c("v-if",!0),e.product.brand?(l(),u("span",ut,"• "+i(e.product.brand),1)):c("v-if",!0)]),t("div",mt,[t("span",pt,i(f(B)(e.product.discountPrice||e.product.price)),1),e.product.discountPrice?(l(),u("span",ft,i(f(B)(e.product.price)),1)):c("v-if",!0)]),t("div",kt,[t("div",null,[a[1]||(a[1]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Stok",-1)),t("p",{class:I(["font-semibold",e.product.stock===0?"text-red-500":e.product.stock<=10?"text-amber-500":"text-slate-900 dark:text-white"])},i(f(C)(e.product.stock)),3)]),t("div",null,[a[2]||(a[2]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Terjual",-1)),t("p",xt,i(f(C)(e.product.totalSold)),1)]),t("div",null,[a[3]||(a[3]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Rating",-1)),t("div",gt,[o(n,{name:"i-heroicons-star-solid",class:"w-4 h-4 text-amber-400"}),t("span",vt,i(Number(e.product.rating||0).toFixed(1)),1),t("span",ht,"("+i(e.product.totalReviews)+")",1)])]),t("div",null,[a[4]||(a[4]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Dilihat",-1)),t("p",bt,i(f(C)(e.product.viewCount)),1)])])])])])}}}),$t={key:0,class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6"},yt={class:"prose prose-slate dark:prose-invert max-w-none text-sm"},_t={class:"whitespace-pre-wrap"},St=$({__name:"ProductShowDescription",props:{description:{}},setup(e){return(k,a)=>e.description?(l(),u("div",$t,[a[0]||(a[0]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3"},"Deskripsi",-1)),t("div",yt,[t("p",_t,i(e.description),1)])])):c("v-if",!0)}}),jt={key:0,class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6"},Pt={key:0,class:"overflow-x-auto"},Nt={class:"w-full text-sm"},Ct={class:"divide-y divide-slate-200 dark:divide-slate-700"},Dt={class:"py-2 pr-4 text-slate-500 dark:text-slate-400 capitalize font-medium w-1/3"},Tt={class:"py-2 text-slate-900 dark:text-white"},At={class:"prose prose-slate dark:prose-invert max-w-none text-sm"},It={class:"whitespace-pre-wrap"},Ut=$({__name:"ProductShowSpecifications",props:{specifications:{}},setup(e){const k=e,a=H(()=>{if(!k.specifications)return null;try{return typeof k.specifications=="object"?k.specifications:JSON.parse(k.specifications)}catch{return null}});return(n,m)=>e.specifications?(l(),u("div",jt,[m[0]||(m[0]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3"},"Spesifikasi",-1)),c(" If specifications is valid JSON object, show as table "),a.value?(l(),u("div",Pt,[t("table",Nt,[t("tbody",Ct,[(l(!0),u(j,null,X(a.value,(r,v)=>(l(),u("tr",{key:v,class:"hover:bg-slate-50 dark:hover:bg-slate-900/30"},[t("td",Dt,i(String(v).replace(/_/g," ")),1),t("td",Tt,i(r),1)]))),128))])])])):(l(),u(j,{key:1},[c(" Fallback: show as raw text if not valid JSON "),t("div",At,[t("p",It,i(e.specifications),1)])],2112))])):c("v-if",!0)}}),Bt={key:0,class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6"},Mt={class:"font-semibold text-slate-900 dark:text-white mb-3"},Rt={class:"grid grid-cols-4 sm:grid-cols-6 gap-3"},Xt=["src","alt"],Ot={key:0,class:"absolute top-1 left-1 px-1.5 py-0.5 bg-violet-500 text-white text-[10px] rounded"},Et=$({__name:"ProductShowGallery",props:{images:{},productName:{}},setup(e){return(k,a)=>e.images&&e.images.length>0?(l(),u("div",Bt,[t("h3",Mt," Galeri Gambar ("+i(e.images.length)+") ",1),t("div",Rt,[(l(!0),u(j,null,X(e.images,n=>(l(),u("div",{key:n.id,class:"aspect-square rounded-lg bg-slate-100 dark:bg-slate-700 overflow-hidden relative"},[t("img",{src:n.url,alt:n.alt||e.productName,class:"w-full h-full object-cover"},null,8,Xt),n.isPrimary?(l(),u("div",Ot," Utama ")):c("v-if",!0)]))),128))])])):c("v-if",!0)}}),Kt={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6"},Ft={class:"space-y-3 text-sm"},Ht={class:"flex justify-between"},Vt={class:"font-medium text-slate-900 dark:text-white"},Gt={class:"flex justify-between"},Lt={class:"font-medium text-slate-900 dark:text-white"},qt={key:0,class:"flex justify-between"},zt={class:"font-medium text-slate-900 dark:text-white"},Jt={class:"flex justify-between"},Wt={class:"font-medium text-slate-900 dark:text-white text-right"},Qt={class:"flex justify-between"},Yt={class:"font-medium text-slate-900 dark:text-white text-right"},Zt=$({__name:"ProductShowDetails",props:{product:{}},setup(e){const k=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});return(a,n)=>(l(),u("div",Kt,[n[5]||(n[5]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Detail Produk",-1)),t("dl",Ft,[t("div",Ht,[n[0]||(n[0]=t("dt",{class:"text-slate-500 dark:text-slate-400"},"Berat",-1)),t("dd",Vt,i(f(C)(e.product.weight))+" gram",1)]),t("div",Gt,[n[1]||(n[1]=t("dt",{class:"text-slate-500 dark:text-slate-400"},"Min. Pembelian",-1)),t("dd",Lt,i(e.product.minOrder),1)]),e.product.maxOrder?(l(),u("div",qt,[n[2]||(n[2]=t("dt",{class:"text-slate-500 dark:text-slate-400"},"Maks. Pembelian",-1)),t("dd",zt,i(e.product.maxOrder),1)])):c("v-if",!0),t("div",Jt,[n[3]||(n[3]=t("dt",{class:"text-slate-500 dark:text-slate-400"},"Dibuat",-1)),t("dd",Wt,i(k(e.product.createdAt)),1)]),t("div",Qt,[n[4]||(n[4]=t("dt",{class:"text-slate-500 dark:text-slate-400"},"Diperbarui",-1)),t("dd",Yt,i(k(e.product.updatedAt)),1)])])]))}}),te={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6"},ee={class:"space-y-2"},se={class:"p-6"},ae={class:"flex items-center gap-4 mb-4"},oe={class:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},ie={class:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4 mb-4"},ne={class:"font-semibold text-slate-900 dark:text-white"},le={class:"text-sm text-slate-600 dark:text-slate-400 mb-6 space-y-2"},re={class:"flex items-center gap-2"},de={class:"flex items-center gap-2"},ce={class:"flex items-center gap-2"},ue={class:"flex items-center gap-2"},me={class:"flex justify-end gap-3"},pe={class:"p-6"},fe={class:"flex items-center gap-4 mb-4"},ke={class:"text-lg font-semibold text-slate-900 dark:text-white"},xe={class:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4 mb-4"},ge={class:"text-sm text-slate-600 dark:text-slate-400 mb-2"},ve={class:"font-semibold text-slate-900 dark:text-white"},he={class:"text-sm text-slate-600 dark:text-slate-400 mb-6 space-y-2"},be={key:0,class:"flex items-start gap-2"},we={key:1,class:"flex items-start gap-2"},$e={class:"flex items-center gap-2"},ye={class:"flex justify-end gap-3"},_e=$({__name:"ProductShowActions",props:{productId:{},productName:{},status:{}},emits:["delete"],setup(e,{emit:k}){const a=e,n=k,m=G(),r=S(!1),v=S(!1),h=S(!1),g=()=>{if(typeof document>"u")return null;const b=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return b?decodeURIComponent(b[1]):null},_=async()=>{r.value=!0;try{const b=g(),x=await(await fetch(`/admin/products/${a.productId}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...b&&{"X-XSRF-TOKEN":b}}})).json();x.success?(m.success("Berhasil",x.message),v.value=!1,U.visit(`/admin/products/${x.productId}/edit`)):m.error("Gagal",x.message)}catch{m.error("Error","Terjadi kesalahan saat menduplikasi produk. Silakan coba lagi.")}finally{r.value=!1}},P=async()=>{r.value=!0;try{const b=g(),x=await(await fetch(`/admin/products/${a.productId}/status`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...b&&{"X-XSRF-TOKEN":b}}})).json();x.success?(m.success("Berhasil",x.message),h.value=!1,U.reload()):m.error("Gagal",x.message)}catch{m.error("Error","Terjadi kesalahan saat mengubah status produk. Silakan coba lagi.")}finally{r.value=!1}},T=a.status==="active"?"menonaktifkan":"mengaktifkan",N=a.status==="active"?"Nonaktif":"Aktif";return(b,s)=>{const x=M,w=R,E=V,L=O;return l(),u(j,null,[t("div",te,[s[13]||(s[13]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Aksi Cepat",-1)),t("div",ee,[o(f(A),{href:`/admin/products/${e.productId}/edit`,class:"block"},{default:p(()=>[o(x,{icon:"i-heroicons-pencil",color:"primary",variant:"outline",class:"w-full justify-start"},{default:p(()=>[...s[8]||(s[8]=[d(" Edit Produk ",-1)])]),_:1})]),_:1},8,["href"]),o(x,{icon:"i-heroicons-document-duplicate",color:"primary",variant:"outline",class:"w-full justify-start",onClick:s[0]||(s[0]=y=>v.value=!0)},{default:p(()=>[...s[9]||(s[9]=[d(" Duplikat Produk ",-1)])]),_:1}),e.status==="active"?(l(),D(x,{key:0,icon:"i-heroicons-pause-circle",color:"warning",variant:"outline",class:"w-full justify-start",onClick:s[1]||(s[1]=y=>h.value=!0)},{default:p(()=>[...s[10]||(s[10]=[d(" Nonaktifkan ",-1)])]),_:1})):(l(),D(x,{key:1,icon:"i-heroicons-check-circle",color:"success",variant:"outline",class:"w-full justify-start",onClick:s[2]||(s[2]=y=>h.value=!0)},{default:p(()=>[...s[11]||(s[11]=[d(" Aktifkan ",-1)])]),_:1})),o(x,{icon:"i-heroicons-trash",color:"error",variant:"outline",class:"w-full justify-start",onClick:s[3]||(s[3]=y=>n("delete"))},{default:p(()=>[...s[12]||(s[12]=[d(" Hapus Produk ",-1)])]),_:1})])]),c(" Duplicate Confirmation Modal "),o(E,{open:v.value,"onUpdate:open":s[5]||(s[5]=y=>v.value=y),title:"Duplikat Produk",description:"Konfirmasi duplikasi produk"},{content:p(()=>[t("div",se,[t("div",ae,[t("div",oe,[o(w,{name:"i-heroicons-document-duplicate",class:"w-6 h-6 text-blue-500"})]),s[14]||(s[14]=t("div",null,[t("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Duplikat Produk"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Konfirmasi duplikasi produk ")],-1))]),t("div",ie,[s[15]||(s[15]=t("p",{class:"text-sm text-slate-600 dark:text-slate-400 mb-2"}," Anda akan menduplikasi produk: ",-1)),t("p",ne,i(e.productName),1)]),t("div",le,[t("p",re,[o(w,{name:"i-heroicons-check-circle",class:"w-4 h-4 text-green-500"}),s[16]||(s[16]=d(" Produk baru akan dibuat dengan status ",-1)),s[17]||(s[17]=t("strong",null,"Draft",-1))]),t("p",de,[o(w,{name:"i-heroicons-check-circle",class:"w-4 h-4 text-green-500"}),s[18]||(s[18]=d(" SKU baru akan digenerate secara otomatis ",-1))]),t("p",ce,[o(w,{name:"i-heroicons-check-circle",class:"w-4 h-4 text-green-500"}),s[19]||(s[19]=d(" Varian produk akan ikut diduplikasi ",-1))]),t("p",ue,[o(w,{name:"i-heroicons-exclamation-triangle",class:"w-4 h-4 text-amber-500"}),s[20]||(s[20]=d(" Gambar produk ",-1)),s[21]||(s[21]=t("strong",null,"tidak",-1)),s[22]||(s[22]=d(" akan diduplikasi ",-1))])]),t("div",me,[o(x,{color:"neutral",variant:"outline",onClick:s[4]||(s[4]=y=>v.value=!1),disabled:r.value},{default:p(()=>[...s[23]||(s[23]=[d(" Batal ",-1)])]),_:1},8,["disabled"]),o(x,{color:"primary",onClick:_,loading:r.value},{default:p(()=>[o(w,{name:"i-heroicons-document-duplicate",class:"w-4 h-4 mr-1"}),s[24]||(s[24]=d(" Duplikat Sekarang ",-1))]),_:1},8,["loading"])])])]),_:1},8,["open"]),c(" Toggle Status Confirmation Modal "),o(E,{open:h.value,"onUpdate:open":s[7]||(s[7]=y=>h.value=y),title:e.status==="active"?"Nonaktifkan Produk":"Aktifkan Produk",description:"Konfirmasi perubahan status produk"},{content:p(()=>[t("div",pe,[t("div",fe,[t("div",{class:I(["w-12 h-12 rounded-full flex items-center justify-center",e.status==="active"?"bg-amber-100 dark:bg-amber-900/30":"bg-green-100 dark:bg-green-900/30"])},[o(w,{name:e.status==="active"?"i-heroicons-pause-circle":"i-heroicons-check-circle",class:I(["w-6 h-6",e.status==="active"?"text-amber-500":"text-green-500"])},null,8,["name","class"])],2),t("div",null,[t("h3",ke,i(e.status==="active"?"Nonaktifkan":"Aktifkan")+" Produk ",1),s[25]||(s[25]=t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Konfirmasi perubahan status produk ",-1))])]),t("div",xe,[t("p",ge," Anda akan "+i(f(T))+" produk: ",1),t("p",ve,i(e.productName),1)]),t("div",he,[e.status==="active"?(l(),u("p",be,[o(w,{name:"i-heroicons-information-circle",class:"w-4 h-4 text-blue-500 mt-0.5"}),s[26]||(s[26]=t("span",null,[d("Produk yang dinonaktifkan "),t("strong",null,"tidak akan tampil"),d(" di etalase toko dan tidak bisa dibeli oleh pelanggan.")],-1))])):(l(),u("p",we,[o(w,{name:"i-heroicons-information-circle",class:"w-4 h-4 text-blue-500 mt-0.5"}),s[27]||(s[27]=t("span",null,[d("Produk yang diaktifkan akan "),t("strong",null,"tampil di etalase toko"),d(" dan bisa dibeli oleh pelanggan.")],-1))])),t("p",$e,[o(w,{name:"i-heroicons-arrow-path",class:"w-4 h-4 text-slate-400"}),s[28]||(s[28]=d(" Status baru: ",-1)),o(L,{color:e.status==="active"?"warning":"success",variant:"subtle",size:"xs"},{default:p(()=>[d(i(f(N)),1)]),_:1},8,["color"])])]),t("div",ye,[o(x,{color:"neutral",variant:"outline",onClick:s[6]||(s[6]=y=>h.value=!1),disabled:r.value},{default:p(()=>[...s[29]||(s[29]=[d(" Batal ",-1)])]),_:1},8,["disabled"]),o(x,{color:e.status==="active"?"warning":"success",onClick:P,loading:r.value},{default:p(()=>[o(w,{name:e.status==="active"?"i-heroicons-pause-circle":"i-heroicons-check-circle",class:"w-4 h-4 mr-1"},null,8,["name"]),d(" "+i(e.status==="active"?"Nonaktifkan":"Aktifkan")+" Sekarang ",1)]),_:1},8,["color","loading"])])])]),_:1},8,["open","title"])],64)}}}),Se={key:0,class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6"},je={class:"font-semibold text-slate-900 dark:text-white mb-4"},Pe={class:"space-y-3"},Ne={class:"flex items-center justify-between"},Ce={class:"font-medium text-slate-900 dark:text-white text-sm"},De={key:0,class:"text-xs text-slate-400"},Te={class:"flex items-center justify-between mt-2 text-xs text-slate-500"},Ae={class:"font-semibold text-violet-600 dark:text-violet-400"},Ie=$({__name:"ProductShowVariants",props:{variants:{}},setup(e){const k=a=>{const n=Number(a);return isNaN(n)?"Rp0":B(n)};return(a,n)=>{const m=O;return e.variants&&e.variants.length>0?(l(),u("div",Se,[t("h3",je," Varian ("+i(e.variants.length)+") ",1),t("div",Pe,[(l(!0),u(j,null,X(e.variants,r=>(l(),u("div",{key:r.id,class:"p-3 rounded-lg bg-slate-50 dark:bg-slate-900/50"},[t("div",Ne,[t("div",null,[t("p",Ce,i(r.name||"Varian")+": "+i(r.value),1),r.sku?(l(),u("span",De,"SKU: "+i(r.sku),1)):c("v-if",!0)]),o(m,{color:r.isActive?"success":"neutral",variant:"subtle",size:"xs"},{default:p(()=>[d(i(r.isActive?"Aktif":"Nonaktif"),1)]),_:2},1032,["color"])]),t("div",Te,[t("span",Ae,i(r.priceAdjustment>0?"+":"")+i(k(r.priceAdjustment)),1),t("span",null,"Stok: "+i(r.stock??0),1)])]))),128))])])):c("v-if",!0)}}}),Ue={class:"p-6"},Be={class:"flex items-center gap-4 mb-4"},Me={class:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},Re={class:"text-sm text-slate-600 dark:text-slate-400 mb-6"},Xe={class:"flex justify-end gap-3"},Oe=$({__name:"ProductDeleteModal",props:z({productId:{},productName:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:["update:open"],setup(e){const k=e,a=J(e,"open"),n=G(),m=S(!1),r=()=>{if(typeof document>"u")return null;const h=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return h?decodeURIComponent(h[1]):null},v=async()=>{m.value=!0;try{const h=r(),_=await(await fetch(`/admin/products/${k.productId}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...h&&{"X-XSRF-TOKEN":h}}})).json();_.success?(n.success("Berhasil",_.message),U.visit("/admin/products")):n.error("Gagal",_.message)}catch{n.error("Error","Terjadi kesalahan saat menghapus produk")}finally{m.value=!1,a.value=!1}};return(h,g)=>{const _=R,P=M,T=V;return l(),D(T,{open:a.value,"onUpdate:open":g[1]||(g[1]=N=>a.value=N),title:"Hapus Produk",description:"Apakah Anda yakin ingin menghapus produk ini?"},{content:p(()=>[t("div",Ue,[t("div",Be,[t("div",Me,[o(_,{name:"i-heroicons-trash",class:"w-6 h-6 text-red-500"})]),g[2]||(g[2]=t("div",null,[t("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"},"Hapus Produk"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Apakah Anda yakin ingin menghapus produk ini? ")],-1))]),t("p",Re,[t("strong",null,i(e.productName),1),g[3]||(g[3]=d(" akan dihapus secara permanen. Tindakan ini tidak dapat dibatalkan. ",-1))]),t("div",Xe,[o(P,{color:"neutral",variant:"outline",onClick:g[0]||(g[0]=N=>a.value=!1),disabled:m.value},{default:p(()=>[...g[4]||(g[4]=[d(" Batal ",-1)])]),_:1},8,["disabled"]),o(P,{color:"error",onClick:v,loading:m.value},{default:p(()=>[...g[5]||(g[5]=[d(" Hapus ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open"])}}}),Ee={class:"space-y-6"},Ke={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Fe={class:"lg:col-span-2 space-y-6"},He={class:"space-y-6"},Ye=$({layout:q,__name:"show",props:{product:{},admin:{default:()=>({id:0,storeName:"",slug:"",status:""})}},setup(e){const k=e,a=S(!1),n=H(()=>!k.product.images||k.product.images.length===0?null:k.product.images.find(m=>m.isPrimary)||k.product.images[0]||null);return(m,r)=>(l(),u("div",Ee,[c(" Page Header "),o(f(tt),{"product-name":e.product.name,"product-id":e.product.id,onDelete:r[0]||(r[0]=v=>a.value=!0)},null,8,["product-name","product-id"]),t("div",Ke,[c(" Main Content "),t("div",Fe,[c(" Product Info "),o(f(wt),{product:e.product,"primary-image":n.value},null,8,["product","primary-image"]),c(" Description "),o(f(St),{description:e.product.description},null,8,["description"]),c(" Specifications "),o(f(Ut),{specifications:e.product.specifications},null,8,["specifications"]),c(" Images Gallery "),o(f(Et),{images:e.product.images,"product-name":e.product.name},null,8,["images","product-name"])]),c(" Sidebar "),t("div",He,[c(" Details Card "),o(f(Zt),{product:e.product},null,8,["product"]),c(" Quick Actions "),o(f(_e),{"product-id":e.product.id,"product-name":e.product.name,status:e.product.status,onDelete:r[1]||(r[1]=v=>a.value=!0)},null,8,["product-id","product-name","status"]),c(" Variants "),o(f(Ie),{variants:e.product.variants},null,8,["variants"])])]),c(" Delete Confirmation Modal "),o(f(Oe),{open:a.value,"onUpdate:open":r[2]||(r[2]=v=>a.value=v),"product-id":e.product.id,"product-name":e.product.name},null,8,["open","product-id","product-name"])]))}});export{Ye as default};
