import{_ as F}from"./Checkbox-9qpvU9Db.js";import{_ as M,a as L}from"./Button-CI_-soaG.js";import{_ as R,g as X}from"./ColorModeButton-Bf7Nr8w3.js";import{d as $,h as v,c as O,y as G,a as u,j as s,b as t,f as l,n as w,w as f,o as m,D as I,t as T,k as n,T as J}from"./app-CyjtdGoI.js";import{_ as H}from"./default.vue_vue_type_script_setup_true_lang-CxtMHnvj.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Label-yeknIWsP.js";import"./Modal-Bgd8PL5Y.js";import"./Badge-DfumusWV.js";import"./DropdownMenu-DxuVXSbh.js";const Y={class:"min-h-screen flex"},W={class:"hidden lg:flex lg:w-1/2 bg-linear-to-br from-purple-600 via-pink-600 to-orange-500 relative overflow-hidden"},q={class:"relative z-10 flex flex-col justify-center items-center text-white p-12"},Q={class:"w-24 h-24 bg-white/20 backdrop-blur-sm rounded-3xl flex items-center justify-center mb-8 shadow-2xl"},Z={class:"space-y-6 w-full max-w-sm"},ee={class:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-2xl p-4"},te={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},ae={class:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-2xl p-4"},se={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},le={class:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-2xl p-4"},oe={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},re={class:"mt-12 p-4 bg-amber-500/20 backdrop-blur-sm rounded-xl"},ie={class:"flex items-center gap-3 mb-2"},ne={class:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-gray-950 p-4 sm:p-8 overflow-y-auto"},de={class:"w-full max-w-md py-8"},ue={class:"lg:hidden text-center mb-8"},me={class:"w-16 h-16 bg-linear-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-purple-500/30"},ce={class:"flex items-center justify-center gap-3 mb-8"},pe={class:"w-12 h-1 rounded-full bg-gray-200 dark:bg-gray-700"},ve={key:"info"},xe={key:0,class:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"},fe={class:"flex items-center gap-3"},ge={class:"w-8 h-8 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},be={class:"text-sm text-red-700 dark:text-red-400"},he={class:"space-y-2"},ke={class:"space-y-2"},ye={class:"space-y-2"},we={class:"space-y-2"},_e={class:"flex items-center gap-2"},Te={key:0,class:"font-normal"},Ve={class:"space-y-2"},Pe={key:0,class:"text-xs text-amber-600"},je={class:"space-y-2"},Oe={key:0,class:"text-xs text-red-500"},De={class:"pt-2"},Ce={key:1,class:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800"},Ne={key:"otp"},Se={class:"text-center mb-8"},Ue={class:"w-20 h-20 bg-linear-to-br from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 rounded-2xl flex items-center justify-center mx-auto mb-4"},Ke={class:"font-semibold text-purple-600 dark:text-purple-400"},Ie={key:0,class:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"},Be={class:"flex items-center gap-3"},Ae={class:"w-8 h-8 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},ze={class:"text-sm text-red-700 dark:text-red-400"},Ee={class:"space-y-2"},Fe={class:"text-center"},Me={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Le={class:"font-semibold text-purple-600"},Re=["disabled"],Xe={class:"mt-8 p-4 bg-gray-100 dark:bg-gray-800 rounded-xl"},$e={class:"flex items-start gap-3"},lt=$({layout:H,__name:"register",setup(Ge){const k=v("info"),V=v(!1),P=v(!1),x=X(),d=v(!1),c=v(""),j=v(!1),g=v(""),y=v(0),b=v(null),a=v({fullName:"",email:"",phone:"",password:"",passwordConfirmation:"",birthDate:"",agreeTerms:!1}),D=O(()=>a.value.passwordConfirmation?a.value.password===a.value.passwordConfirmation:!0),C=O(()=>{if(!a.value.birthDate)return null;const i=new Date(a.value.birthDate),e=new Date;let r=e.getFullYear()-i.getFullYear();const p=e.getMonth()-i.getMonth();return(p<0||p===0&&e.getDate()<i.getDate())&&r--,r}),h=O(()=>C.value!==null&&C.value>=21),S=O(()=>a.value.fullName.trim()!==""&&a.value.email.trim()!==""&&a.value.password.length>=8&&D.value&&a.value.agreeTerms&&a.value.birthDate!==""&&h.value&&j.value);G(()=>a.value.birthDate,()=>{j.value=!1});const N=()=>{const i=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return i?decodeURIComponent(i[1]):""},U=()=>{y.value=60,b.value&&clearInterval(b.value),b.value=setInterval(()=>{y.value>0?y.value--:b.value&&clearInterval(b.value)},1e3)},B=async()=>{if(!(!S.value||d.value)){c.value="",d.value=!0;try{const e=await(await fetch("/auth/register/send-otp",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":N()},body:JSON.stringify({fullName:a.value.fullName,email:a.value.email,phone:a.value.phone||null,password:a.value.password,birthDate:a.value.birthDate})})).json();e.success?(x.success("Kode OTP telah dikirim ke email Anda"),k.value="otp",U()):(c.value=e.message||"Gagal mengirim OTP",x.error(e.message||"Gagal mengirim OTP"))}catch(i){console.error("Send OTP error:",i),c.value="Terjadi kesalahan, silakan coba lagi",x.error("Terjadi kesalahan, silakan coba lagi")}finally{d.value=!1}}},A=async()=>{if(!(g.value.length!==6||d.value)){c.value="",d.value=!0;try{const e=await(await fetch("/auth/register/verify-otp",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":N()},body:JSON.stringify({email:a.value.email,otp:g.value,fullName:a.value.fullName,phone:a.value.phone||null,password:a.value.password,birthDate:a.value.birthDate})})).json();e.success?(x.success(e.message||"Pendaftaran berhasil!"),setTimeout(()=>{window.location.href=e.redirect||"/"},500)):(c.value=e.message||"Kode OTP tidak valid",x.error(e.message||"Kode OTP tidak valid"))}catch(i){console.error("Verify OTP error:",i),c.value="Terjadi kesalahan, silakan coba lagi",x.error("Terjadi kesalahan, silakan coba lagi")}finally{d.value=!1}}},z=async()=>{if(!(y.value>0||d.value)){d.value=!0,c.value="";try{const e=await(await fetch("/auth/resend-otp",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":N()},body:JSON.stringify({email:a.value.email,type:"register"})})).json();e.success?(x.success("Kode OTP baru telah dikirim"),U(),g.value=""):x.error(e.message||"Gagal mengirim ulang OTP")}catch(i){console.error("Resend OTP error:",i),x.error("Terjadi kesalahan, silakan coba lagi")}finally{d.value=!1}}},E=()=>{k.value="info",g.value="",b.value&&clearInterval(b.value)};return(i,e)=>{const r=M,p=R,_=L,K=F;return m(),u("div",Y,[s(" Left Side - Decorative "),t("div",W,[s(" Background Pattern "),e[18]||(e[18]=t("div",{class:"absolute inset-0 opacity-10"},[t("div",{class:"absolute top-20 left-20 w-72 h-72 bg-white rounded-full blur-3xl"}),t("div",{class:"absolute bottom-20 right-20 w-96 h-96 bg-white rounded-full blur-3xl"}),t("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-white rounded-full blur-2xl"})],-1)),s(" Content "),t("div",q,[s(" Logo "),t("div",Q,[l(r,{name:"i-heroicons-bolt",class:"w-14 h-14 text-white"})]),e[16]||(e[16]=t("h1",{class:"text-4xl font-bold mb-4 text-center"},"Bergabung dengan OGITU",-1)),e[17]||(e[17]=t("p",{class:"text-xl text-white/80 mb-12 text-center"},"Nikmati pengalaman belanja vape terbaik",-1)),s(" Benefits "),t("div",Z,[t("div",ee,[t("div",te,[l(r,{name:"i-heroicons-gift",class:"w-6 h-6"})]),e[11]||(e[11]=t("div",null,[t("div",{class:"font-semibold"},"Diskon Member"),t("div",{class:"text-sm text-white/70"},"Dapatkan diskon eksklusif member")],-1))]),t("div",ae,[t("div",se,[l(r,{name:"i-heroicons-currency-dollar",class:"w-6 h-6"})]),e[12]||(e[12]=t("div",null,[t("div",{class:"font-semibold"},"Poin Rewards"),t("div",{class:"text-sm text-white/70"},"Kumpulkan poin dari setiap transaksi")],-1))]),t("div",le,[t("div",oe,[l(r,{name:"i-heroicons-bell",class:"w-6 h-6"})]),e[13]||(e[13]=t("div",null,[t("div",{class:"font-semibold"},"Notifikasi Promo"),t("div",{class:"text-sm text-white/70"},"Info flash sale & promo terbaru")],-1))])]),s(" Age Warning "),t("div",re,[t("div",ie,[l(r,{name:"i-heroicons-exclamation-triangle",class:"w-6 h-6 text-amber-300"}),e[14]||(e[14]=t("span",{class:"font-semibold text-amber-100"},"Verifikasi Usia Diperlukan",-1))]),e[15]||(e[15]=t("p",{class:"text-sm text-amber-100/80"}," Produk vape hanya untuk pengguna berusia 21 tahun ke atas. Anda akan diminta untuk memverifikasi usia saat pendaftaran. ",-1))])])]),s(" Right Side - Form "),t("div",ne,[t("div",de,[s(" Mobile Logo "),t("div",ue,[t("div",me,[l(r,{name:"i-heroicons-bolt",class:"w-9 h-9 text-white"})]),e[19]||(e[19]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Daftar OGITU",-1))]),s(" Step Indicator "),t("div",ce,[t("div",{class:w(["w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",k.value==="info"?"bg-purple-500 text-white shadow-lg shadow-purple-500/30":"bg-purple-100 text-purple-600 dark:bg-purple-900/30"])}," 1 ",2),t("div",pe,[t("div",{class:w(["h-full rounded-full bg-purple-500 transition-all",k.value==="otp"?"w-full":"w-0"])},null,2)]),t("div",{class:w(["w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",k.value==="otp"?"bg-purple-500 text-white shadow-lg shadow-purple-500/30":"bg-gray-200 text-gray-400 dark:bg-gray-700"])}," 2 ",2)]),s(" Info Step "),l(J,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 translate-x-4","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition-all duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-4",mode:"out-in"},{default:f(()=>[k.value==="info"?(m(),u("div",ve,[s(" Header "),e[29]||(e[29]=t("div",{class:"text-center mb-8"},[t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Buat Akun Baru "),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"}," Isi data diri Anda untuk mendaftar ")],-1)),s(" Form "),t("form",{onSubmit:I(B,["prevent"]),class:"space-y-4"},[s(" Error Alert "),c.value?(m(),u("div",xe,[t("div",fe,[t("div",ge,[l(r,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-red-500"})]),t("span",be,T(c.value),1)])])):s("v-if",!0),s(" Full Name "),t("div",he,[e[20]||(e[20]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},[n("Nama Lengkap "),t("span",{class:"text-red-500"},"*")],-1)),l(p,{modelValue:a.value.fullName,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.fullName=o),type:"text",placeholder:"John Doe",icon:"i-heroicons-user",size:"lg",class:"w-full",autocomplete:"name",ui:{rounded:"rounded-xl"}},null,8,["modelValue"])]),s(" Email "),t("div",ke,[e[21]||(e[21]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},[n("Email "),t("span",{class:"text-red-500"},"*")],-1)),l(p,{modelValue:a.value.email,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.email=o),type:"email",placeholder:"email@example.com",icon:"i-heroicons-envelope",size:"lg",class:"w-full",autocomplete:"email",ui:{rounded:"rounded-xl"}},null,8,["modelValue"])]),s(" Phone "),t("div",ye,[e[22]||(e[22]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Nomor Telepon",-1)),l(p,{modelValue:a.value.phone,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.phone=o),type:"tel",placeholder:"08xxxxxxxxxx",icon:"i-heroicons-phone",size:"lg",class:"w-full",autocomplete:"tel",ui:{rounded:"rounded-xl"}},null,8,["modelValue"])]),s(" Birth Date "),t("div",we,[e[23]||(e[23]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},[n("Tanggal Lahir "),t("span",{class:"text-red-500"},"*")],-1)),l(p,{modelValue:a.value.birthDate,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.birthDate=o),type:"date",icon:"i-heroicons-calendar",size:"lg",class:"w-full",max:new Date().toISOString().split("T")[0],ui:{rounded:"rounded-xl"}},null,8,["modelValue","max"]),s(" Age Verification Display "),a.value.birthDate?(m(),u("div",{key:0,class:w(["mt-2 p-3 rounded-lg",[h.value?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"]])},[t("div",_e,[l(r,{name:h.value?"i-heroicons-check-circle":"i-heroicons-x-circle",class:w(["w-5 h-5",h.value?"text-green-600":"text-red-500"])},null,8,["name","class"]),t("span",{class:w(["text-sm font-medium",h.value?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"])},[n(" Usia: "+T(C.value)+" tahun ",1),h.value?s("v-if",!0):(m(),u("span",Te," (minimal 21 tahun)"))],2)])],2)):s("v-if",!0)]),s(" Password "),t("div",Ve,[e[24]||(e[24]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},[n("Password "),t("span",{class:"text-red-500"},"*")],-1)),l(p,{modelValue:a.value.password,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.password=o),type:V.value?"text":"password",placeholder:"Minimal 8 karakter",icon:"i-heroicons-lock-closed",size:"lg",class:"w-full",autocomplete:"new-password",ui:{rounded:"rounded-xl"}},{trailing:f(()=>[l(_,{icon:V.value?"i-heroicons-eye-slash":"i-heroicons-eye",color:"neutral",variant:"ghost",size:"xs",onClick:e[4]||(e[4]=o=>V.value=!V.value)},null,8,["icon"])]),_:1},8,["modelValue","type"]),a.value.password&&a.value.password.length<8?(m(),u("p",Pe," Password minimal 8 karakter ")):s("v-if",!0)]),s(" Confirm Password "),t("div",je,[e[25]||(e[25]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},[n("Konfirmasi Password "),t("span",{class:"text-red-500"},"*")],-1)),l(p,{modelValue:a.value.passwordConfirmation,"onUpdate:modelValue":e[7]||(e[7]=o=>a.value.passwordConfirmation=o),type:P.value?"text":"password",placeholder:"Ulangi password",icon:"i-heroicons-lock-closed",size:"lg",class:"w-full",autocomplete:"new-password",color:D.value?void 0:"error",ui:{rounded:"rounded-xl"}},{trailing:f(()=>[l(_,{icon:P.value?"i-heroicons-eye-slash":"i-heroicons-eye",color:"neutral",variant:"ghost",size:"xs",onClick:e[6]||(e[6]=o=>P.value=!P.value)},null,8,["icon"])]),_:1},8,["modelValue","type","color"]),D.value?s("v-if",!0):(m(),u("p",Oe," Password tidak cocok "))]),s(" Terms Checkbox "),t("div",De,[l(K,{modelValue:a.value.agreeTerms,"onUpdate:modelValue":e[8]||(e[8]=o=>a.value.agreeTerms=o)},{label:f(()=>[...e[26]||(e[26]=[t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},[n(" Saya setuju dengan "),t("a",{href:"/terms",class:"text-primary-600 hover:text-primary-500 font-medium"},"Syarat & Ketentuan"),n(" dan "),t("a",{href:"/privacy",class:"text-primary-600 hover:text-primary-500 font-medium"},"Kebijakan Privasi")],-1)])]),_:1},8,["modelValue"])]),s(" Age Confirmation Checkbox "),h.value?(m(),u("div",Ce,[l(K,{modelValue:j.value,"onUpdate:modelValue":e[9]||(e[9]=o=>j.value=o)},{label:f(()=>[...e[27]||(e[27]=[t("span",{class:"text-sm text-amber-800 dark:text-amber-200"},[n(" Saya menyatakan dengan sesungguhnya bahwa saya berusia "),t("strong",null,"21 tahun atau lebih"),n(" dan memahami bahwa produk vape/rokok elektrik memiliki risiko kesehatan. ")],-1)])]),_:1},8,["modelValue"])])):s("v-if",!0),s(" Next Button "),l(_,{type:"submit",color:"primary",size:"lg",block:"",loading:d.value,disabled:!S.value||d.value,class:"rounded-xl h-12 mt-6 bg-linear-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700"},{default:f(()=>[e[28]||(e[28]=t("span",null,"Lanjutkan",-1)),l(r,{name:"i-heroicons-arrow-right",class:"w-5 h-5 ml-2"})]),_:1},8,["loading","disabled"])],32),s(" Login Link "),e[30]||(e[30]=t("p",{class:"mt-8 text-center text-sm text-gray-600 dark:text-gray-400"},[n(" Sudah punya akun? "),t("a",{href:"/login",class:"font-semibold text-primary-600 hover:text-primary-500 ml-1"}," Masuk di sini ")],-1))])):(m(),u("div",Ne,[s(" Header "),t("div",Se,[t("div",Ue,[l(r,{name:"i-heroicons-envelope-open",class:"w-10 h-10 text-purple-600 dark:text-purple-400"})]),e[31]||(e[31]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Verifikasi Email ",-1)),e[32]||(e[32]=t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"}," Masukkan kode OTP yang dikirim ke ",-1)),t("p",Ke,T(a.value.email),1)]),s(" OTP Form "),t("form",{onSubmit:I(A,["prevent"]),class:"space-y-6"},[s(" Error Alert "),c.value?(m(),u("div",Ie,[t("div",Be,[t("div",Ae,[l(r,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-red-500"})]),t("span",ze,T(c.value),1)])])):s("v-if",!0),s(" OTP Input "),t("div",Ee,[e[33]||(e[33]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Kode OTP (6 digit)",-1)),l(p,{modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=o=>g.value=o),type:"text",placeholder:"000000",icon:"i-heroicons-key",size:"lg",class:"w-full",maxlength:"6",pattern:"[0-9]*",inputmode:"numeric",autocomplete:"one-time-code",ui:{rounded:"rounded-xl",base:"text-center tracking-[0.5em] font-mono text-2xl"}},null,8,["modelValue"])]),s(" Timer & Resend "),t("div",Fe,[y.value>0?(m(),u("p",Me,[e[34]||(e[34]=n(" Kirim ulang kode dalam ",-1)),t("span",Le,T(y.value),1),e[35]||(e[35]=n(" detik ",-1))])):(m(),u("button",{key:1,type:"button",onClick:z,disabled:d.value,class:"text-sm font-semibold text-purple-600 hover:text-purple-500 disabled:opacity-50"}," Kirim Ulang Kode OTP ",8,Re))]),s(" Verify Button "),l(_,{type:"submit",color:"primary",size:"lg",block:"",loading:d.value,disabled:g.value.length!==6||d.value,class:"rounded-xl h-12 bg-linear-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700"},{default:f(()=>[l(r,{name:"i-heroicons-check-circle",class:"w-5 h-5 mr-2"}),e[36]||(e[36]=n(" Verifikasi & Daftar ",-1))]),_:1},8,["loading","disabled"]),s(" Back Button "),l(_,{type:"button",color:"neutral",variant:"ghost",block:"",onClick:E,class:"rounded-xl"},{default:f(()=>[l(r,{name:"i-heroicons-arrow-left",class:"w-5 h-5 mr-2"}),e[37]||(e[37]=n(" Kembali ",-1))]),_:1})],32),s(" Info "),t("div",Xe,[t("div",$e,[l(r,{name:"i-heroicons-information-circle",class:"w-5 h-5 text-gray-500 shrink-0 mt-0.5"}),e[38]||(e[38]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Kode OTP berlaku selama 5 menit. Periksa folder spam jika email tidak ditemukan di inbox. ",-1))])])]))]),_:1})])])])}}});export{lt as default};
