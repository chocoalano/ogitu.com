import{_ as E}from"./Checkbox-9qpvU9Db.js";import{_ as F,a as R}from"./Button-CI_-soaG.js";import{_ as L,g as X}from"./ColorModeButton-Bf7Nr8w3.js";import{d as $,h as d,c as G,x as D,a as g,j as a,b as t,f as s,n as O,w as v,o as x,D as S,t as w,k as f,T as J}from"./app-CyjtdGoI.js";import{_ as H}from"./default.vue_vue_type_script_setup_true_lang-CxtMHnvj.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Label-yeknIWsP.js";import"./Modal-Bgd8PL5Y.js";import"./Badge-DfumusWV.js";import"./DropdownMenu-DxuVXSbh.js";const W={class:"min-h-screen flex"},q={class:"hidden lg:flex lg:w-1/2 bg-linear-to-br from-primary-600 via-purple-600 to-pink-600 relative overflow-hidden"},Q={class:"relative z-10 flex flex-col justify-center items-center text-white p-12"},Y={class:"w-24 h-24 bg-white/20 backdrop-blur-sm rounded-3xl flex items-center justify-center mb-8 shadow-2xl"},Z={class:"space-y-6 w-full max-w-sm"},ee={class:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-2xl p-4"},te={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},ae={class:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-2xl p-4"},se={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},re={class:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-2xl p-4"},le={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},oe={class:"mt-12 flex items-center gap-3 bg-amber-500/20 backdrop-blur-sm rounded-xl px-4 py-3"},ie={class:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-gray-950 p-4 sm:p-8"},ne={class:"w-full max-w-md"},de={class:"lg:hidden text-center mb-8"},ce={class:"w-16 h-16 bg-linear-to-br from-primary-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-primary-500/30"},me={class:"flex items-center justify-center gap-3 mb-8"},ue={class:"w-12 h-1 rounded-full bg-gray-200 dark:bg-gray-700"},pe={key:"credentials"},ge={key:0,class:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"},ve={class:"flex items-center gap-3"},xe={class:"w-8 h-8 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},fe={class:"text-sm text-red-700 dark:text-red-400"},be={class:"space-y-2"},ye={class:"space-y-2"},he={class:"flex items-center justify-between"},ke={class:"grid grid-cols-2 gap-3"},we={key:"otp"},_e={class:"text-center mb-8"},Te={class:"w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-2xl flex items-center justify-center mx-auto mb-4"},Oe={class:"font-medium text-gray-900 dark:text-white"},je={key:0,class:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"},Pe={class:"flex items-center gap-3"},Ve={class:"w-8 h-8 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},Se={class:"text-sm text-red-700 dark:text-red-400"},Ce={class:"space-y-2"},Ke={class:"text-center"},Ie={key:0,class:"flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400"},Ue={class:"font-semibold text-primary-600"},Be={key:1,class:"text-amber-600 dark:text-amber-400"},Me={class:"text-center"},Ne=["disabled"],He=$({layout:H,__name:"login",props:{redirect:{}},setup(C){const K=C,b=d("credentials"),_=d(!1),c=X(),k=d(!1),i=d(!1),n=d(""),l=d({email:"",password:"",remember:!1}),p=d(""),T=d(300),m=d(null),y=d(!1),I=G(()=>K.redirect||"/"),U=o=>{const e=Math.floor(o/60),r=o%60;return`${e}:${r.toString().padStart(2,"0")}`},j=()=>{const o=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return o?decodeURIComponent(o[1]):""},V=()=>{T.value=300,y.value=!1,m.value&&clearInterval(m.value),m.value=setInterval(()=>{T.value--,T.value<=0&&(y.value=!0,m.value&&clearInterval(m.value))},1e3)};D(()=>{m.value&&clearInterval(m.value)});const B=async()=>{if(!i.value){n.value="",i.value=!0;try{const e=await(await fetch("/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":j()},body:JSON.stringify({email:l.value.email,password:l.value.password})})).json();e.success?(b.value="otp",V(),c.success(e.message||"Kode OTP telah dikirim ke email Anda")):(n.value=e.message||"Gagal mengirim OTP",c.error(e.message||"Gagal mengirim OTP"))}catch(o){console.error("Send OTP error:",o),n.value="Terjadi kesalahan, silakan coba lagi",c.error("Terjadi kesalahan, silakan coba lagi")}finally{i.value=!1}}},M=async()=>{if(!(k.value||p.value.length!==6)){n.value="",k.value=!0;try{const e=await(await fetch("/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":j()},body:JSON.stringify({email:l.value.email,otp:p.value,remember:l.value.remember,redirect:I.value})})).json();e.success?(c.success(e.message||"Login berhasil!"),setTimeout(()=>{window.location.href=e.redirect||"/"},500)):(n.value=e.message||"Verifikasi OTP gagal",c.error(e.message||"Verifikasi OTP gagal"))}catch(o){console.error("Verify OTP error:",o),n.value="Terjadi kesalahan, silakan coba lagi",c.error("Terjadi kesalahan, silakan coba lagi")}finally{k.value=!1}}},N=async()=>{if(!(!y.value||i.value)){i.value=!0;try{const e=await(await fetch("/auth/resend-otp",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":j()},body:JSON.stringify({email:l.value.email,type:"login"})})).json();e.success?(V(),p.value="",c.success(e.message||"Kode OTP baru telah dikirim")):c.error(e.message||"Gagal mengirim ulang OTP")}catch{c.error("Terjadi kesalahan, silakan coba lagi")}finally{i.value=!1}}},z=()=>{b.value="credentials",p.value="",m.value&&clearInterval(m.value)};return(o,e)=>{const r=F,P=L,h=R,A=E;return x(),g("div",W,[a(" Left Side - Decorative "),t("div",q,[a(" Background Pattern "),e[11]||(e[11]=t("div",{class:"absolute inset-0 opacity-10"},[t("div",{class:"absolute top-20 left-20 w-72 h-72 bg-white rounded-full blur-3xl"}),t("div",{class:"absolute bottom-20 right-20 w-96 h-96 bg-white rounded-full blur-3xl"}),t("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-white rounded-full blur-2xl"})],-1)),a(" Content "),t("div",Q,[a(" Logo "),t("div",Y,[s(r,{name:"i-heroicons-bolt",class:"w-14 h-14 text-white"})]),e[9]||(e[9]=t("h1",{class:"text-4xl font-bold mb-4 text-center"},"OGITU Vape",-1)),e[10]||(e[10]=t("p",{class:"text-xl text-white/80 mb-12 text-center"},"Premium Vape Marketplace",-1)),a(" Features "),t("div",Z,[t("div",ee,[t("div",te,[s(r,{name:"i-heroicons-shield-check",class:"w-6 h-6"})]),e[5]||(e[5]=t("div",null,[t("div",{class:"font-semibold"},"Keamanan Terjamin"),t("div",{class:"text-sm text-white/70"},"Verifikasi OTP untuk keamanan akun")],-1))]),t("div",ae,[t("div",se,[s(r,{name:"i-heroicons-truck",class:"w-6 h-6"})]),e[6]||(e[6]=t("div",null,[t("div",{class:"font-semibold"},"Gratis Ongkir"),t("div",{class:"text-sm text-white/70"},"Pengiriman gratis ke seluruh Indonesia")],-1))]),t("div",re,[t("div",le,[s(r,{name:"i-heroicons-sparkles",class:"w-6 h-6"})]),e[7]||(e[7]=t("div",null,[t("div",{class:"font-semibold"},"Produk Original"),t("div",{class:"text-sm text-white/70"},"100% produk asli dan berkualitas")],-1))])]),a(" Age Warning "),t("div",oe,[s(r,{name:"i-heroicons-exclamation-triangle",class:"w-5 h-5 text-amber-300"}),e[8]||(e[8]=t("span",{class:"text-sm text-amber-100"},"Khusus 21 tahun ke atas",-1))])])]),a(" Right Side - Form "),t("div",ie,[t("div",ne,[a(" Mobile Logo "),t("div",de,[t("div",ce,[s(r,{name:"i-heroicons-bolt",class:"w-9 h-9 text-white"})]),e[12]||(e[12]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"OGITU Vape",-1))]),a(" Step Indicator "),t("div",me,[t("div",{class:O(["w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",b.value==="credentials"?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-primary-100 text-primary-600 dark:bg-primary-900/30"])}," 1 ",2),t("div",ue,[t("div",{class:O(["h-full rounded-full bg-primary-500 transition-all",b.value==="otp"?"w-full":"w-0"])},null,2)]),t("div",{class:O(["w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",b.value==="otp"?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-gray-200 text-gray-400 dark:bg-gray-700"])}," 2 ",2)]),a(" Credentials Step "),s(J,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 translate-x-4","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition-all duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-4",mode:"out-in"},{default:v(()=>[b.value==="credentials"?(x(),g("div",pe,[a(" Header "),e[19]||(e[19]=t("div",{class:"text-center mb-8"},[t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Masuk ke Akun "),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"}," Masukkan email dan password Anda ")],-1)),a(" Form "),t("form",{onSubmit:S(B,["prevent"]),class:"space-y-5"},[a(" Error Alert "),n.value?(x(),g("div",ge,[t("div",ve,[t("div",xe,[s(r,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-red-500"})]),t("span",fe,w(n.value),1)])])):a("v-if",!0),a(" Email "),t("div",be,[e[13]||(e[13]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Email",-1)),s(P,{modelValue:l.value.email,"onUpdate:modelValue":e[0]||(e[0]=u=>l.value.email=u),type:"email",placeholder:"email@example.com",icon:"i-heroicons-envelope",size:"lg",class:"w-full",autocomplete:"email",ui:{rounded:"rounded-xl"}},null,8,["modelValue"])]),a(" Password "),t("div",ye,[e[14]||(e[14]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Password",-1)),s(P,{modelValue:l.value.password,"onUpdate:modelValue":e[2]||(e[2]=u=>l.value.password=u),type:_.value?"text":"password",placeholder:"••••••••",icon:"i-heroicons-lock-closed",size:"lg",class:"w-full",autocomplete:"current-password",ui:{rounded:"rounded-xl"}},{trailing:v(()=>[s(h,{icon:_.value?"i-heroicons-eye-slash":"i-heroicons-eye",color:"neutral",variant:"ghost",size:"xs",onClick:e[1]||(e[1]=u=>_.value=!_.value)},null,8,["icon"])]),_:1},8,["modelValue","type"])]),a(" Remember Me & Forgot Password "),t("div",he,[s(A,{modelValue:l.value.remember,"onUpdate:modelValue":e[3]||(e[3]=u=>l.value.remember=u),label:"Ingat saya"},null,8,["modelValue"]),e[15]||(e[15]=t("a",{href:"/forgot-password",class:"text-sm font-medium text-primary-600 hover:text-primary-500"}," Lupa password? ",-1))]),a(" Submit Button "),s(h,{type:"submit",color:"primary",size:"lg",block:"",loading:i.value,disabled:i.value||!l.value.email||!l.value.password,class:"rounded-xl h-12"},{default:v(()=>[s(r,{name:"i-heroicons-paper-airplane",class:"w-5 h-5 mr-2"}),e[16]||(e[16]=f(" Kirim Kode OTP ",-1))]),_:1},8,["loading","disabled"])],32),a(" Divider "),e[20]||(e[20]=t("div",{class:"relative my-8"},[t("div",{class:"absolute inset-0 flex items-center"},[t("div",{class:"w-full border-t border-gray-200 dark:border-gray-700"})]),t("div",{class:"relative flex justify-center text-sm"},[t("span",{class:"px-4 bg-gray-50 dark:bg-gray-950 text-gray-500"}," Atau masuk dengan ")])],-1)),a(" Social Login "),t("div",ke,[s(h,{color:"neutral",variant:"outline",size:"lg",block:"",disabled:"",class:"rounded-xl"},{default:v(()=>[s(r,{name:"i-simple-icons-google",class:"w-5 h-5 mr-2"}),e[17]||(e[17]=f(" Google ",-1))]),_:1}),s(h,{color:"neutral",variant:"outline",size:"lg",block:"",disabled:"",class:"rounded-xl"},{default:v(()=>[s(r,{name:"i-simple-icons-facebook",class:"w-5 h-5 mr-2"}),e[18]||(e[18]=f(" Facebook ",-1))]),_:1})]),a(" Register Link "),e[21]||(e[21]=t("p",{class:"mt-8 text-center text-sm text-gray-600 dark:text-gray-400"},[f(" Belum punya akun? "),t("a",{href:"/register",class:"font-semibold text-primary-600 hover:text-primary-500 ml-1"}," Daftar Sekarang ")],-1))])):(x(),g("div",we,[a(" Header "),t("div",_e,[t("div",Te,[s(r,{name:"i-heroicons-envelope-open",class:"w-8 h-8 text-primary-600 dark:text-primary-400"})]),e[22]||(e[22]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Verifikasi OTP ",-1)),e[23]||(e[23]=t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"}," Masukkan 6 digit kode yang dikirim ke ",-1)),t("p",Oe,w(l.value.email),1)]),a(" OTP Form "),t("form",{onSubmit:S(M,["prevent"]),class:"space-y-6"},[a(" Error Alert "),n.value?(x(),g("div",je,[t("div",Pe,[t("div",Ve,[s(r,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-red-500"})]),t("span",Se,w(n.value),1)])])):a("v-if",!0),a(" OTP Input "),t("div",Ce,[e[24]||(e[24]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Kode OTP",-1)),s(P,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=u=>p.value=u),type:"text",placeholder:"000000",size:"xl",class:"w-full text-center tracking-[0.5em] font-mono text-2xl",maxlength:"6",autocomplete:"one-time-code",ui:{rounded:"rounded-xl"}},null,8,["modelValue"])]),a(" Timer "),t("div",Ke,[y.value?(x(),g("div",Be," Kode OTP telah kadaluarsa ")):(x(),g("div",Ie,[s(r,{name:"i-heroicons-clock",class:"w-5 h-5"}),t("span",null,[e[25]||(e[25]=f("Kode berlaku dalam ",-1)),t("span",Ue,w(U(T.value)),1)])]))]),a(" Verify Button "),s(h,{type:"submit",color:"primary",size:"lg",block:"",loading:k.value,disabled:k.value||p.value.length!==6,class:"rounded-xl h-12"},{default:v(()=>[s(r,{name:"i-heroicons-check-badge",class:"w-5 h-5 mr-2"}),e[26]||(e[26]=f(" Verifikasi & Masuk ",-1))]),_:1},8,["loading","disabled"]),a(" Resend "),t("div",Me,[e[27]||(e[27]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Tidak menerima kode? ",-1)),t("button",{type:"button",onClick:N,disabled:!y.value||i.value,class:O(["font-semibold transition-colors",y.value?"text-primary-600 hover:text-primary-500 cursor-pointer":"text-gray-400 cursor-not-allowed"])},w(i.value?"Mengirim...":"Kirim Ulang"),11,Ne)]),a(" Back Button "),s(h,{type:"button",color:"neutral",variant:"ghost",block:"",onClick:z,class:"rounded-xl"},{default:v(()=>[s(r,{name:"i-heroicons-arrow-left",class:"w-5 h-5 mr-2"}),e[28]||(e[28]=f(" Kembali ",-1))]),_:1})],32)]))]),_:1})])])])}}});export{He as default};
