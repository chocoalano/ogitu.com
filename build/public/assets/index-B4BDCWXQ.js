import{_ as I}from"./Card-BjL1m_sW.js";import{a as M,_ as E}from"./Button-CI_-soaG.js";import{_ as K}from"./DropdownMenu-DxuVXSbh.js";import{_ as O}from"./Switch-sBWkdoVy.js";import{_ as G}from"./Badge-DfumusWV.js";import{d as Q,h as u,a as g,j as l,b as t,f as o,w as d,k as _,u as D,m as S,o as p,F as q,r as J,t as c,e as R,l as h}from"./app-CyjtdGoI.js";import{A as W}from"./admin-BzR6vrex.js";import{_ as X,a as Y,b as Z,c as tt}from"./DeleteConfirmModal.vue_vue_type_script_setup_true_lang-D464v-fQ.js";import{_ as et}from"./PromotionStatusBadge.vue_vue_type_script_setup_true_lang-DYYiyx6A.js";import"./ColorModeButton-Bf7Nr8w3.js";import"./Label-yeknIWsP.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Tooltip-BrTR-Vq7.js";import"./SelectMenu-DKAhKU-v.js";import"./index-v4g8wp86.js";import"./Modal-Bgd8PL5Y.js";const at={class:"p-6 space-y-6"},st={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ot={class:"overflow-x-auto"},lt={class:"w-full"},it={class:"divide-y divide-gray-200 dark:divide-gray-700"},rt={class:"px-4 py-4"},nt={class:"flex items-center gap-2"},dt={class:"px-2 py-1 rounded bg-gray-100 dark:bg-gray-800 text-sm font-mono text-primary-600 dark:text-primary-400"},ct={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},ut={class:"px-4 py-4"},pt={class:"px-4 py-4"},mt={class:"font-semibold text-gray-900 dark:text-white"},gt={class:"px-4 py-4"},ft={class:"text-sm"},yt={class:"text-gray-900 dark:text-white"},xt={class:"text-gray-500 dark:text-gray-400"},vt={class:"px-4 py-4"},_t={class:"text-sm"},ht={class:"text-gray-900 dark:text-white"},kt={key:0,class:"text-gray-500 dark:text-gray-400"},bt={class:"px-4 py-4"},wt={class:"flex flex-col gap-1"},$t={class:"px-4 py-4"},Dt={class:"flex items-center justify-end gap-2"},St={key:0},Vt={colspan:"7",class:"px-4 py-12 text-center"},Pt={class:"flex flex-col items-center"},Ct={key:0,class:"px-4 pb-4"},qt=Q({layout:W,__name:"index",props:{vouchers:{},pagination:{},stats:{},filters:{}},setup(i){const k=i,r=u(k.filters.status||"all"),m=u(k.filters.search),n=u(k.filters.type||"all"),y=u(!1),x=u(!1),f=u(null),b=u(!1),V=[{label:"Semua Tipe",value:"all"},{label:"Persentase",value:"percentage"},{label:"Nominal",value:"fixed"},{label:"Gratis Ongkir",value:"free_shipping"}],P=s=>[[{label:"Lihat Detail",icon:"i-heroicons-eye",to:`/admin/promotions/vouchers/${s.id}`},{label:"Edit",icon:"i-heroicons-pencil",to:`/admin/promotions/vouchers/${s.id}/edit`}],[{label:"Hapus",icon:"i-heroicons-trash",color:"error",onSelect:()=>A(s)}]],C=()=>{y.value=!0;const s={};r.value&&r.value!=="all"&&(s.status=r.value),m.value&&(s.search=m.value),n.value&&n.value!=="all"&&(s.type=n.value),h.get("/admin/promotions/vouchers",s,{preserveState:!0,preserveScroll:!0,onFinish:()=>{y.value=!1}})},U=s=>{y.value=!0;const e={page:s};r.value&&r.value!=="all"&&(e.status=r.value),m.value&&(e.search=m.value),n.value&&n.value!=="all"&&(e.type=n.value),h.get("/admin/promotions/vouchers",e,{preserveState:!0,preserveScroll:!0,onFinish:()=>{y.value=!1}})},B=s=>{h.post(`/admin/promotions/vouchers/${s.id}/toggle`,{},{preserveScroll:!0})},A=s=>{f.value=s,x.value=!0},F=()=>{f.value&&(b.value=!0,h.delete(`/admin/promotions/vouchers/${f.value.id}`,{preserveScroll:!0,onFinish:()=>{b.value=!1,x.value=!1,f.value=null}}))},L=s=>{navigator.clipboard.writeText(s)},w=s=>new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});return(s,e)=>{const v=M,$=G,T=O,N=K,z=E,j=I;return p(),g("div",at,[l(" Header "),t("div",st,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Voucher"),t("p",{class:"text-gray-500 dark:text-gray-400"}," Kelola voucher untuk pelanggan Anda ")],-1)),o(D(S),{href:"/admin/promotions/vouchers/create"},{default:d(()=>[o(v,{icon:"i-heroicons-plus",color:"primary"},{default:d(()=>[...e[4]||(e[4]=[_(" Buat Voucher ",-1)])]),_:1})]),_:1})]),l(" Stats "),o(X,{stats:i.stats,type:"voucher"},null,8,["stats"]),l(" Filters "),o(Y,{status:r.value,"onUpdate:status":e[0]||(e[0]=a=>r.value=a),search:m.value,"onUpdate:search":e[1]||(e[1]=a=>m.value=a),type:n.value,"onUpdate:type":e[2]||(e[2]=a=>n.value=a),"show-type-filter":"","type-options":V,onFilter:C},null,8,["status","search","type"]),l(" Vouchers Table "),o(j,{ui:{body:{padding:""}}},{default:d(()=>[t("div",ot,[t("table",lt,[e[9]||(e[9]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Kode & Nama "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Tipe "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Nilai "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Periode "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Penggunaan "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400"}," Status "),t("th",{class:"px-4 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400"}," Aksi ")])],-1)),t("tbody",it,[(p(!0),g(q,null,J(i.vouchers,a=>(p(),g("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/50"},[t("td",rt,[t("div",null,[t("div",nt,[t("code",dt,c(a.code),1),o(v,{icon:"i-heroicons-clipboard-document",color:"neutral",variant:"ghost",size:"xs",onClick:H=>L(a.code)},null,8,["onClick"])]),t("p",ct,c(a.name),1)])]),t("td",ut,[o($,{color:a.type==="free_shipping"?"success":a.type==="percentage"?"primary":"info",variant:"soft",size:"sm"},{default:d(()=>[_(c(a.typeLabel),1)]),_:2},1032,["color"])]),t("td",pt,[t("span",mt,c(a.valueDisplay),1)]),t("td",gt,[t("div",ft,[t("p",yt,c(w(a.startDate)),1),t("p",xt," s/d "+c(w(a.endDate)),1)])]),t("td",vt,[t("div",_t,[t("p",ht,c(a.usageCount)+" kali ",1),a.usageLimit?(p(),g("p",kt," dari "+c(a.usageLimit),1)):l("v-if",!0)])]),t("td",bt,[t("div",wt,[o(et,{status:a.status},null,8,["status"]),a.isPublic?(p(),R($,{key:0,color:"info",variant:"soft",size:"xs"},{default:d(()=>[...e[6]||(e[6]=[_(" Publik ",-1)])]),_:1})):l("v-if",!0)])]),t("td",$t,[t("div",Dt,[o(T,{"model-value":!!a.isActive,size:"sm","onUpdate:modelValue":H=>B(a)},null,8,["model-value","onUpdate:modelValue"]),o(N,{items:P(a)},{default:d(()=>[o(v,{icon:"i-heroicons-ellipsis-vertical",color:"neutral",variant:"ghost",size:"sm"})]),_:1},8,["items"])])])]))),128)),i.vouchers.length===0?(p(),g("tr",St,[t("td",Vt,[t("div",Pt,[o(z,{name:"i-heroicons-ticket",class:"w-12 h-12 text-gray-300 dark:text-gray-600 mb-4"}),e[8]||(e[8]=t("p",{class:"text-gray-500 dark:text-gray-400 mb-4"},"Belum ada voucher",-1)),o(D(S),{href:"/admin/promotions/vouchers/create"},{default:d(()=>[o(v,{icon:"i-heroicons-plus",color:"primary",variant:"soft"},{default:d(()=>[...e[7]||(e[7]=[_(" Buat Voucher Pertama ",-1)])]),_:1})]),_:1})])])])):l("v-if",!0)])])]),l(" Pagination "),i.vouchers.length>0?(p(),g("div",Ct,[o(Z,{"current-page":i.pagination.currentPage,"last-page":i.pagination.lastPage,total:i.pagination.total,"per-page":i.pagination.perPage,onPageChange:U},null,8,["current-page","last-page","total","per-page"])])):l("v-if",!0)]),_:1}),l(" Delete Modal "),o(tt,{show:x.value,title:"Hapus Voucher",message:`Apakah Anda yakin ingin menghapus voucher '${f.value?.code}'? Tindakan ini tidak dapat dibatalkan.`,loading:b.value,onClose:e[3]||(e[3]=a=>x.value=!1),onConfirm:F},null,8,["show","message","loading"])])}}});export{qt as default};
