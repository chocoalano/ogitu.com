import{A as de}from"./admin-BzR6vrex.js";import{u as ce}from"./use_transmit-DG2L_GE5.js";import{h as $,c as U,l as ue,d as A,a as h,b as s,f as d,e as C,j as o,w as y,k as R,t as g,o as u,u as f,F as D,r as K,n as N,I as me,y as q,q as fe,S as O}from"./app-CyjtdGoI.js";import{_ as M,a as L}from"./Button-CI_-soaG.js";import{_ as E}from"./Badge-DfumusWV.js";import{_ as ge}from"./Select-D6kv-Jzs.js";import{_ as pe}from"./Pagination-97jdZAo5.js";import{_ as ve}from"./Modal-Bgd8PL5Y.js";import"./ColorModeButton-Bf7Nr8w3.js";import"./Tooltip-BrTR-Vq7.js";import"./useFormControl-D_pV87FU.js";function he(e={}){const a=$(Array.isArray(e.initialNotifications)?[...e.initialNotifications]:[]),t=$(e.initialUnreadCount||0),n=$(!1),c=$(e.initialMeta?.currentPage||1),l=$(e.initialFilters?.type||"all"),r=$(e.initialFilters?.isRead||"all"),p=U(()=>l.value!=="all"||r.value!=="all"),v=U(()=>a.value.some(i=>i.isRead)),k=i=>{i.notifications&&(a.value=Array.isArray(i.notifications)?[...i.notifications]:[]),i.unreadCount!==void 0&&(t.value=i.unreadCount),i.meta?.currentPage&&(c.value=i.meta.currentPage),i.filters&&(l.value=i.filters.type||"all",r.value=i.filters.isRead||"all")},b=(i={})=>{n.value=!0;const m={page:i.page||c.value,type:l.value,isRead:r.value};m.type==="all"&&delete m.type,m.isRead==="all"&&delete m.isRead,ue.get("/admin/notifications",m,{preserveState:!0,preserveScroll:i.preserveScroll??!0,onFinish:()=>{n.value=!1}})};return{notifications:a,unreadCount:t,isLoading:n,currentPage:c,selectedType:l,selectedReadStatus:r,hasActiveFilters:p,hasReadNotifications:v,syncWithProps:k,fetchNotifications:b,applyFilters:()=>{c.value=1,b({page:1})},resetFilters:()=>{l.value="all",r.value="all",c.value=1,b({page:1})},handlePageChange:i=>{c.value=i,b({page:i,preserveScroll:!1})},markAsRead:async i=>{try{if((await fetch(`/admin/notifications/${i}/read`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})).ok){const x=a.value.find(T=>T.id===i);return x&&!x.isRead&&(x.isRead=!0,x.readAt=new Date().toISOString(),t.value=Math.max(0,t.value-1)),!0}return!1}catch(m){return console.error("Failed to mark notification as read:",m),!1}},markAllAsRead:async()=>{try{return(await fetch("/admin/notifications/read-all",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})).ok?(a.value.forEach(m=>{m.isRead||(m.isRead=!0,m.readAt=new Date().toISOString())}),t.value=0,!0):!1}catch(i){return console.error("Failed to mark all notifications as read:",i),!1}},deleteNotification:async i=>{try{if((await fetch(`/admin/notifications/${i}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})).ok){const x=a.value.findIndex(T=>T.id===i);return x!==-1&&(a.value[x].isRead||(t.value=Math.max(0,t.value-1)),a.value.splice(x,1)),!0}return!1}catch(m){return console.error("Failed to delete notification:",m),!1}},clearReadNotifications:async()=>{try{return(await fetch("/admin/notifications/clear-read",{method:"DELETE",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})).ok?(a.value=a.value.filter(m=>!m.isRead),!0):!1}catch(i){return console.error("Failed to clear read notifications:",i),!1}}}}const be={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},xe={class:"flex items-center gap-4"},ke={class:"p-3 bg-linear-to-br from-violet-500 to-purple-600 rounded-xl shadow-lg shadow-violet-500/25"},ye={class:"flex items-center gap-3"},we={class:"flex items-center gap-2"},Re=A({__name:"NotificationHeader",props:{isConnected:{type:Boolean},unreadCount:{},hasReadNotifications:{type:Boolean}},emits:["markAllAsRead","clearRead"],setup(e){return(a,t)=>{const n=M,c=E,l=L;return u(),h("div",be,[s("div",xe,[s("div",ke,[d(n,{name:"i-heroicons-bell",class:"w-7 h-7 text-white"})]),s("div",null,[s("div",ye,[t[2]||(t[2]=s("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Pusat Notifikasi",-1)),e.unreadCount>0?(u(),C(c,{key:0,color:"error",variant:"solid",size:"sm"},{default:y(()=>[R(g(e.unreadCount)+" baru ",1)]),_:1})):o("v-if",!0)]),t[3]||(t[3]=s("p",{class:"text-sm text-slate-500 dark:text-slate-400 mt-0.5"}," Kelola notifikasi pesanan, pembayaran, dan pembaruan sistem ",-1))])]),s("div",we,[o(" Realtime Connection Status "),e.isConnected?(u(),C(c,{key:0,color:"success",variant:"subtle",size:"sm",class:"flex items-center gap-1.5"},{default:y(()=>[...t[4]||(t[4]=[s("span",{class:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"},null,-1),R(" Live ",-1)])]),_:1})):o("v-if",!0),o(" Mark All as Read "),e.unreadCount>0?(u(),C(l,{key:1,color:"primary",variant:"soft",size:"sm",icon:"i-heroicons-check-circle",onClick:t[0]||(t[0]=r=>a.$emit("markAllAsRead"))},{default:y(()=>[...t[5]||(t[5]=[R(" Tandai Semua Dibaca ",-1)])]),_:1})):o("v-if",!0),o(" Clear Read "),e.hasReadNotifications?(u(),C(l,{key:2,color:"error",variant:"ghost",size:"sm",icon:"i-heroicons-trash",onClick:t[1]||(t[1]=r=>a.$emit("clearRead"))},{default:y(()=>[...t[6]||(t[6]=[R(" Hapus Dibaca ",-1)])]),_:1})):o("v-if",!0)])])}}}),Ce={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},$e={class:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-5"},_e={class:"relative flex items-center gap-4"},Se={class:"p-3 bg-linear-to-br from-blue-500 to-cyan-500 rounded-xl shadow-lg shadow-blue-500/25"},Ae={class:"text-2xl font-bold text-slate-900 dark:text-white"},Pe={class:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-5"},Ne={class:"relative flex items-center gap-4"},Fe={class:"p-3 bg-linear-to-br from-amber-500 to-orange-500 rounded-xl shadow-lg shadow-amber-500/25"},Te={class:"text-2xl font-bold text-slate-900 dark:text-white"},Ue={class:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-5"},Me={class:"relative flex items-center gap-4"},Be={class:"p-3 bg-linear-to-br from-emerald-500 to-green-500 rounded-xl shadow-lg shadow-emerald-500/25"},De={class:"text-2xl font-bold text-slate-900 dark:text-white"},Le=A({__name:"NotificationStats",props:{total:{},unreadCount:{},readCount:{}},setup(e){return(a,t)=>{const n=M;return u(),h("div",Ce,[o(" Total Notifications "),s("div",$e,[t[1]||(t[1]=s("div",{class:"absolute top-0 right-0 w-24 h-24 -mr-8 -mt-8 bg-linear-to-br from-blue-500/10 to-cyan-500/10 rounded-full blur-2xl"},null,-1)),s("div",_e,[s("div",Se,[d(n,{name:"i-heroicons-bell",class:"w-6 h-6 text-white"})]),s("div",null,[t[0]||(t[0]=s("p",{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Total",-1)),s("p",Ae,g(e.total),1)])])]),o(" Unread "),s("div",Pe,[t[3]||(t[3]=s("div",{class:"absolute top-0 right-0 w-24 h-24 -mr-8 -mt-8 bg-linear-to-br from-amber-500/10 to-orange-500/10 rounded-full blur-2xl"},null,-1)),s("div",Ne,[s("div",Fe,[d(n,{name:"i-heroicons-envelope",class:"w-6 h-6 text-white"})]),s("div",null,[t[2]||(t[2]=s("p",{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Belum Dibaca",-1)),s("p",Te,g(e.unreadCount),1)])])]),o(" Read "),s("div",Ue,[t[5]||(t[5]=s("div",{class:"absolute top-0 right-0 w-24 h-24 -mr-8 -mt-8 bg-linear-to-br from-emerald-500/10 to-green-500/10 rounded-full blur-2xl"},null,-1)),s("div",Me,[s("div",Be,[d(n,{name:"i-heroicons-envelope-open",class:"w-6 h-6 text-white"})]),s("div",null,[t[4]||(t[4]=s("p",{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Sudah Dibaca",-1)),s("p",De,g(e.readCount),1)])])])])}}}),z=e=>e.startsWith("order_")?"order":e.startsWith("product_")?"stock":e.startsWith("withdrawal_")?"payment":e==="review_new"?"review":e==="system"?"system":"other",Ie={order:"i-heroicons-shopping-bag",payment:"i-heroicons-credit-card",stock:"i-heroicons-cube",system:"i-heroicons-cog-6-tooth",review:"i-heroicons-star",other:"i-heroicons-bell"},je={order:"primary",payment:"success",stock:"warning",system:"info",review:"warning",other:"neutral"},ze={order:"bg-violet-100 dark:bg-violet-900/30",payment:"bg-emerald-100 dark:bg-emerald-900/30",stock:"bg-amber-100 dark:bg-amber-900/30",system:"bg-blue-100 dark:bg-blue-900/30",review:"bg-orange-100 dark:bg-orange-900/30",other:"bg-slate-100 dark:bg-slate-700"},He={order:"text-violet-600 dark:text-violet-400",payment:"text-emerald-600 dark:text-emerald-400",stock:"text-amber-600 dark:text-amber-400",system:"text-blue-600 dark:text-blue-400",review:"text-orange-600 dark:text-orange-400",other:"text-slate-600 dark:text-slate-400"},Y=e=>{const a=z(e);return Ie[a]},G=e=>{const a=z(e);return je[a]},qe=e=>{const a=z(e);return ze[a]},Ee=e=>{const a=z(e);return He[a]},We=e=>{const a=new Date(e),t=new Date,n=t.getTime()-a.getTime(),c=Math.floor(n/1e3),l=Math.floor(c/60),r=Math.floor(l/60),p=Math.floor(r/24);return c<60?"Baru saja":l<60?`${l} menit lalu`:r<24?`${r} jam lalu`:p<7?`${p} hari lalu`:a.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:a.getFullYear()!==t.getFullYear()?"numeric":void 0})},Xe=e=>({order_new:"Pesanan Baru",order_paid:"Pembayaran",order_cancelled:"Dibatalkan",order_shipped:"Dikirim",order_completed:"Selesai",review_new:"Ulasan Baru",product_low_stock:"Stok Rendah",product_out_of_stock:"Stok Habis",withdrawal_approved:"Penarikan Disetujui",withdrawal_rejected:"Penarikan Ditolak",system:"Sistem"})[e]||e,Oe=[{label:"Semua Tipe",value:"all",icon:"i-heroicons-squares-2x2"},{label:"Pesanan",value:"order",icon:"i-heroicons-shopping-bag"},{label:"Pembayaran",value:"payment",icon:"i-heroicons-credit-card"},{label:"Stok",value:"stock",icon:"i-heroicons-cube"},{label:"Sistem",value:"system",icon:"i-heroicons-cog-6-tooth"},{label:"Ulasan",value:"review",icon:"i-heroicons-star"}],Ve=[{label:"Semua",value:"all"},{label:"Belum Dibaca",value:"unread"},{label:"Sudah Dibaca",value:"read"}],Ke={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4"},Ye={class:"flex flex-col sm:flex-row items-start sm:items-center gap-4"},Ge={class:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400"},Je={class:"flex flex-wrap items-center gap-3 flex-1"},Qe={class:"hidden lg:flex items-center gap-2"},Ze=A({__name:"NotificationFilterBar",props:{selectedType:{},selectedReadStatus:{},typeStats:{default:()=>({})}},emits:["update:selectedType","update:selectedReadStatus","filter","reset"],setup(e,{emit:a}){const t=e,n=a,c=U(()=>t.selectedType!=="all"||t.selectedReadStatus!=="all"),l=v=>{n("update:selectedType",v),n("filter")},r=v=>{n("update:selectedReadStatus",v),n("filter")},p=v=>{n("update:selectedType",v),n("filter")};return(v,k)=>{const b=M,B=ge,I=L,j=E;return u(),h("div",Ke,[s("div",Ye,[s("div",Ge,[d(b,{name:"i-heroicons-funnel",class:"w-4 h-4"}),k[1]||(k[1]=s("span",{class:"font-medium"},"Filter:",-1))]),s("div",Je,[d(B,{"model-value":e.selectedType,items:f(Oe),placeholder:"Tipe Notifikasi",size:"sm",class:"w-44","onUpdate:modelValue":l},null,8,["model-value","items"]),d(B,{"model-value":e.selectedReadStatus,items:f(Ve),placeholder:"Status",size:"sm",class:"w-36","onUpdate:modelValue":r},null,8,["model-value","items"]),c.value?(u(),C(I,{key:0,color:"neutral",variant:"ghost",size:"sm",icon:"i-heroicons-x-mark",onClick:k[0]||(k[0]=F=>v.$emit("reset"))},{default:y(()=>[...k[2]||(k[2]=[R(" Reset ",-1)])]),_:1})):o("v-if",!0)]),o(" Type Stats Pills "),s("div",Qe,[(u(!0),h(D,null,K(e.typeStats,(F,P)=>(u(),h(D,{key:P},[F>0?(u(),C(j,{key:0,color:f(G)(String(P)),variant:"subtle",size:"xs",class:"cursor-pointer hover:opacity-80 transition-opacity",onClick:H=>p(String(P))},{default:y(()=>[d(b,{name:f(Y)(String(P)),class:"w-3 h-3 mr-1"},null,8,["name"]),R(" "+g(F),1)]),_:2},1032,["color","onClick"])):o("v-if",!0)],64))),128))])])])}}}),et={key:0,class:"absolute left-0 top-0 bottom-0 w-1 bg-linear-to-b from-violet-500 to-purple-600"},tt={class:"flex items-start gap-4 pl-2"},at={class:"flex-1 min-w-0"},st={class:"flex items-start justify-between gap-4"},it={class:"flex-1 min-w-0"},nt={class:"flex items-center gap-2 mb-1"},ot={class:"text-xs text-slate-400 dark:text-slate-500 mt-2 flex items-center gap-1"},lt={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},rt=A({__name:"NotificationItem",props:{notification:{}},emits:["read","delete"],setup(e){return(a,t)=>{const n=M,c=E,l=L;return u(),h("div",{class:N(["group relative p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",{"bg-violet-50/50 dark:bg-violet-900/10":!e.notification.isRead}])},[o(" Unread Indicator "),e.notification.isRead?o("v-if",!0):(u(),h("div",et)),s("div",tt,[o(" Icon "),s("div",{class:N(["shrink-0 p-2.5 rounded-xl",f(qe)(e.notification.type)])},[d(n,{name:e.notification.icon||f(Y)(e.notification.type),class:N(["w-5 h-5",f(Ee)(e.notification.type)])},null,8,["name","class"])],2),o(" Content "),s("div",at,[s("div",st,[s("div",it,[s("div",nt,[s("h3",{class:N(["font-semibold truncate",e.notification.isRead?"text-slate-700 dark:text-slate-300":"text-slate-900 dark:text-white"])},g(e.notification.title),3),d(c,{color:f(G)(e.notification.type),variant:"subtle",size:"xs"},{default:y(()=>[R(g(f(Xe)(e.notification.type)),1)]),_:1},8,["color"])]),s("p",{class:N(["text-sm line-clamp-2",e.notification.isRead?"text-slate-500 dark:text-slate-400":"text-slate-600 dark:text-slate-300"])},g(e.notification.message),3),s("p",ot,[d(n,{name:"i-heroicons-clock",class:"w-3.5 h-3.5"}),R(" "+g(f(We)(e.notification.createdAt)),1)])]),o(" Actions "),s("div",lt,[e.notification.isRead?o("v-if",!0):(u(),C(l,{key:0,color:"primary",variant:"ghost",size:"xs",icon:"i-heroicons-check",square:"",onClick:t[0]||(t[0]=r=>a.$emit("read",e.notification.id))})),d(l,{color:"error",variant:"ghost",size:"xs",icon:"i-heroicons-trash",square:"",onClick:t[1]||(t[1]=r=>a.$emit("delete",e.notification.id))})])])])])],2)}}}),dt={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden"},ct={key:0,class:"flex items-center justify-center py-16"},ut={class:"flex flex-col items-center gap-3"},mt={class:"divide-y divide-slate-100 dark:divide-slate-700"},ft={class:"py-16 text-center"},gt={class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 mb-4"},pt={class:"text-sm text-slate-500 dark:text-slate-400 max-w-sm mx-auto"},vt=A({__name:"NotificationList",props:{notifications:{},isLoading:{type:Boolean},hasFilters:{type:Boolean}},emits:["read","delete","resetFilters"],setup(e){return(a,t)=>{const n=M,c=L;return u(),h("div",dt,[o(" Loading State "),e.isLoading?(u(),h("div",ct,[s("div",ut,[d(n,{name:"i-heroicons-arrow-path",class:"w-8 h-8 text-violet-500 animate-spin"}),t[3]||(t[3]=s("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Memuat notifikasi...",-1))])])):e.notifications.length>0?(u(),h(D,{key:1},[o(" Notifications "),s("div",mt,[(u(!0),h(D,null,K(e.notifications,l=>(u(),C(rt,{key:l.id,notification:l,onRead:t[0]||(t[0]=r=>a.$emit("read",r)),onDelete:t[1]||(t[1]=r=>a.$emit("delete",r))},null,8,["notification"]))),128))])],2112)):(u(),h(D,{key:2},[o(" Empty State "),s("div",ft,[s("div",gt,[d(n,{name:"i-heroicons-bell-slash",class:"w-8 h-8 text-slate-400 dark:text-slate-500"})]),t[5]||(t[5]=s("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white mb-2"}," Tidak Ada Notifikasi ",-1)),s("p",pt,g(e.hasFilters?"Tidak ada notifikasi yang sesuai dengan filter Anda.":"Anda belum memiliki notifikasi. Notifikasi akan muncul saat ada pesanan baru, pembayaran, atau pembaruan sistem."),1),e.hasFilters?(u(),C(c,{key:0,color:"primary",variant:"soft",size:"sm",class:"mt-4",onClick:t[2]||(t[2]=l=>a.$emit("resetFilters"))},{default:y(()=>[...t[4]||(t[4]=[R(" Reset Filter ",-1)])]),_:1})):o("v-if",!0)])],2112)),o(" Pagination Slot "),me(a.$slots,"pagination")])}}}),ht={key:0,class:"flex flex-col sm:flex-row items-center justify-between gap-4 border-t border-slate-200 dark:border-slate-700 px-4 py-3"},bt={class:"text-sm text-slate-500 dark:text-slate-400"},xt=A({__name:"NotificationPagination",props:{currentPage:{},total:{},perPage:{},lastPage:{}},emits:["update:currentPage"],setup(e){const a=e,t=U(()=>(a.currentPage-1)*a.perPage+1),n=U(()=>Math.min(a.currentPage*a.perPage,a.total));return(c,l)=>{const r=pe;return e.lastPage>1?(u(),h("div",ht,[s("p",bt," Menampilkan "+g(t.value)+" - "+g(n.value)+" dari "+g(e.total)+" notifikasi ",1),d(r,{page:e.currentPage,total:e.total,"items-per-page":e.perPage,"sibling-count":1,"show-edges":"",size:"sm","onUpdate:page":l[0]||(l[0]=p=>c.$emit("update:currentPage",p))},null,8,["page","total","items-per-page"])])):o("v-if",!0)}}}),kt={class:"p-6 max-h-[85vh] overflow-y-auto"},yt={class:"flex items-center gap-4 mb-4"},wt={class:"text-lg font-semibold text-slate-900 dark:text-white"},Rt={class:"text-sm text-slate-500 dark:text-slate-400"},Ct={class:"text-sm text-slate-600 dark:text-slate-400 mb-6"},$t={class:"flex justify-end gap-3"},V=A({__name:"ConfirmModal",props:{open:{type:Boolean},title:{},description:{},message:{},confirmLabel:{default:"Konfirmasi"},cancelLabel:{default:"Batal"},variant:{default:"danger"}},emits:["update:open","confirm","cancel"],setup(e,{emit:a}){const t=a,n=()=>{t("confirm")},c=()=>{t("update:open",!1),t("cancel")};return(l,r)=>{const p=M,v=L,k=ve;return u(),C(k,{open:e.open,"onUpdate:open":r[0]||(r[0]=b=>l.$emit("update:open",b)),ui:{overlay:"z-[100]",content:"z-[100]"}},{content:y(()=>[s("div",kt,[s("div",yt,[s("div",{class:N(["w-12 h-12 rounded-full flex items-center justify-center",e.variant==="danger"?"bg-red-100 dark:bg-red-900/30":"bg-amber-100 dark:bg-amber-900/30"])},[d(p,{name:e.variant==="danger"?"i-heroicons-trash":"i-heroicons-exclamation-triangle",class:N(["w-6 h-6",e.variant==="danger"?"text-red-500":"text-amber-500"])},null,8,["name","class"])],2),s("div",null,[s("h3",wt,g(e.title),1),s("p",Rt,g(e.description),1)])]),s("p",Ct,g(e.message),1),s("div",$t,[d(v,{color:"neutral",variant:"outline",onClick:c},{default:y(()=>[R(g(e.cancelLabel),1)]),_:1}),d(v,{color:"error",onClick:n},{default:y(()=>[R(g(e.confirmLabel),1)]),_:1})])])]),_:1},8,["open"])}}}),_t={class:"space-y-6"},It=A({layout:de,__name:"index",props:{admin:{default:()=>({id:0,name:"Admin"})},notifications:{default:()=>[]},meta:{default:()=>({total:0,perPage:20,currentPage:1,lastPage:1,firstPage:1})},unreadCount:{default:0},typeStats:{default:()=>({})},filters:{default:()=>({type:"all",isRead:"all"})}},setup(e){const a=e,{notifications:t,unreadCount:n,isLoading:c,currentPage:l,selectedType:r,selectedReadStatus:p,hasActiveFilters:v,hasReadNotifications:k,syncWithProps:b,applyFilters:B,resetFilters:I,handlePageChange:j,markAsRead:F,markAllAsRead:P,deleteNotification:H,clearReadNotifications:W}=he({initialNotifications:a.notifications,initialMeta:a.meta,initialUnreadCount:a.unreadCount,initialFilters:a.filters}),i=$(!1),m=$(null),x=$(!1);q(()=>a.notifications,()=>b({notifications:a.notifications}),{deep:!0}),q(()=>a.unreadCount,()=>b({unreadCount:a.unreadCount})),q(()=>a.meta?.currentPage,()=>b({meta:a.meta}));const{isConnected:T,setNotifications:J,setUnreadCount:Q,markAsRead:Z,markAllAsRead:ee}=ce();fe(()=>{J(t.value),Q(n.value)});const te=U(()=>(a.meta?.total??0)-n.value),ae=async _=>{await F(_)&&Z(_)},se=async()=>{await P()&&ee()},ie=_=>{m.value=_,i.value=!0},ne=async()=>{m.value&&(await H(m.value),i.value=!1,m.value=null)},oe=async()=>{await W(),x.value=!1},le=()=>{B()},X=()=>{I()},re=_=>{j(_)};return(_,w)=>(u(),h("div",_t,[o(" Page Header "),d(Re,{"is-connected":f(T),"unread-count":f(n),"has-read-notifications":f(k),onMarkAllAsRead:se,onClearRead:w[0]||(w[0]=S=>x.value=!0)},null,8,["is-connected","unread-count","has-read-notifications"]),o(" Stats Cards "),d(Le,{total:a.meta?.total??0,"unread-count":f(n),"read-count":te.value},null,8,["total","unread-count","read-count"]),o(" Filters "),d(Ze,{"selected-type":f(r),"onUpdate:selectedType":w[1]||(w[1]=S=>O(r)?r.value=S:null),"selected-read-status":f(p),"onUpdate:selectedReadStatus":w[2]||(w[2]=S=>O(p)?p.value=S:null),"type-stats":a.typeStats,onFilter:le,onReset:X},null,8,["selected-type","selected-read-status","type-stats"]),o(" Notifications List "),d(vt,{notifications:f(t),"is-loading":f(c),"has-filters":f(v),onRead:ae,onDelete:ie,onResetFilters:X},{pagination:y(()=>[d(xt,{"current-page":f(l),total:a.meta?.total??0,"per-page":a.meta?.perPage??20,"last-page":a.meta?.lastPage??1,"onUpdate:currentPage":re},null,8,["current-page","total","per-page","last-page"])]),_:1},8,["notifications","is-loading","has-filters"]),o(" Delete Confirmation Modal "),d(V,{open:i.value,"onUpdate:open":w[3]||(w[3]=S=>i.value=S),title:"Hapus Notifikasi",description:"Apakah Anda yakin ingin menghapus notifikasi ini?",message:"Tindakan ini tidak dapat dibatalkan.","confirm-label":"Hapus",variant:"danger",onConfirm:ne},null,8,["open"]),o(" Clear Read Modal "),d(V,{open:x.value,"onUpdate:open":w[4]||(w[4]=S=>x.value=S),title:"Hapus Notifikasi Dibaca",description:"Hapus semua notifikasi yang sudah dibaca?",message:"Semua notifikasi yang sudah ditandai sebagai dibaca akan dihapus secara permanen.","confirm-label":"Hapus Semua",variant:"warning",onConfirm:oe},null,8,["open"])]))}});export{It as default};
