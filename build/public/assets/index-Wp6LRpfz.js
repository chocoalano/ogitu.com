import{d as T,a as b,j as n,b as t,f as e,w as u,t as d,u as p,o as v,Q as R,R as $,e as A,L as D,k as F,F as N,r as P,n as U,m as j,h as w,l as L}from"./app-CyjtdGoI.js";import{A as K}from"./admin-BzR6vrex.js";import{_ as C}from"./Card-BjL1m_sW.js";import{_ as B,a as M}from"./Button-CI_-soaG.js";import{f as _,t as O,a as z,b as E}from"./finance-XRy4NKgY.js";import{_ as H}from"./SelectMenu-DKAhKU-v.js";import{_ as J}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as Q}from"./Badge-DfumusWV.js";import{_ as W}from"./FinancePagination.vue_vue_type_script_setup_true_lang-D1WWecWR.js";import"./Tooltip-BrTR-Vq7.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./index-v4g8wp86.js";const q={class:"space-y-4"},G={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},X={class:"flex items-center gap-3"},Y={class:"p-2 rounded-lg bg-primary-100 dark:bg-primary-900/30"},Z={class:"text-xl font-bold text-gray-900 dark:text-white"},tt={class:"flex items-center gap-3"},et={class:"p-2 rounded-lg bg-success-100 dark:bg-success-900/30"},at={class:"text-xl font-bold text-gray-900 dark:text-white"},st={class:"flex items-center gap-3"},ot={class:"p-2 rounded-lg bg-info-100 dark:bg-info-900/30"},lt={class:"text-xl font-bold text-gray-900 dark:text-white"},rt={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4"},nt={class:"text-center"},it={class:"font-bold text-gray-900 dark:text-white text-sm"},dt={class:"text-center"},ct={class:"font-bold text-gray-900 dark:text-white text-sm"},ut={class:"text-center"},mt={class:"font-bold text-gray-900 dark:text-white text-sm"},xt={class:"text-center"},pt={class:"font-bold text-gray-900 dark:text-white text-sm"},gt={class:"text-center"},yt={class:"font-bold text-gray-900 dark:text-white text-sm"},ft=T({__name:"TransactionStatsCards",props:{stats:{}},setup(l){return(y,a)=>{const s=B,r=C;return v(),b("div",q,[n(" Overview Stats "),t("div",G,[e(r,null,{default:u(()=>[t("div",X,[t("div",Y,[e(s,{name:"i-heroicons-document-text",class:"w-5 h-5 text-primary-600 dark:text-primary-400"})]),t("div",null,[a[0]||(a[0]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Transaksi",-1)),t("p",Z,d(l.stats.totalTransactions.toLocaleString()),1)])])]),_:1}),e(r,null,{default:u(()=>[t("div",tt,[t("div",et,[e(s,{name:"i-heroicons-calendar",class:"w-5 h-5 text-success-600 dark:text-success-400"})]),t("div",null,[a[1]||(a[1]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bulan Ini",-1)),t("p",at,d(l.stats.monthTransactions.toLocaleString()),1)])])]),_:1}),e(r,null,{default:u(()=>[t("div",st,[t("div",ot,[e(s,{name:"i-heroicons-clock",class:"w-5 h-5 text-info-600 dark:text-info-400"})]),t("div",null,[a[2]||(a[2]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Hari Ini",-1)),t("p",lt,d(l.stats.todayTransactions.toLocaleString()),1)])])]),_:1})]),n(" Amount Stats "),t("div",rt,[e(r,null,{default:u(()=>[t("div",nt,[e(s,{name:"i-heroicons-arrow-down-circle",class:"w-6 h-6 mx-auto text-success-500 mb-2"}),a[3]||(a[3]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Top Up",-1)),t("p",it,d(p(_)(l.stats.totalTopup)),1)])]),_:1}),e(r,null,{default:u(()=>[t("div",dt,[e(s,{name:"i-heroicons-arrow-up-circle",class:"w-6 h-6 mx-auto text-error-500 mb-2"}),a[4]||(a[4]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Penarikan",-1)),t("p",ct,d(p(_)(l.stats.totalWithdrawal)),1)])]),_:1}),e(r,null,{default:u(()=>[t("div",ut,[e(s,{name:"i-heroicons-currency-dollar",class:"w-6 h-6 mx-auto text-primary-500 mb-2"}),a[5]||(a[5]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Komisi",-1)),t("p",mt,d(p(_)(l.stats.totalCommission)),1)])]),_:1}),e(r,null,{default:u(()=>[t("div",xt,[e(s,{name:"i-heroicons-shopping-cart",class:"w-6 h-6 mx-auto text-warning-500 mb-2"}),a[6]||(a[6]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Pembayaran",-1)),t("p",pt,d(p(_)(l.stats.totalPayment)),1)])]),_:1}),e(r,null,{default:u(()=>[t("div",gt,[e(s,{name:"i-heroicons-arrow-uturn-left",class:"w-6 h-6 mx-auto text-info-500 mb-2"}),a[7]||(a[7]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Refund",-1)),t("p",yt,d(p(_)(l.stats.totalRefund)),1)])]),_:1})])])}}}),ht={class:"space-y-4"},vt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4"},_t={class:"flex gap-2"},kt=T({__name:"TransactionFilters",props:{type:{default:"all"},typeModifiers:{},status:{default:"all"},statusModifiers:{},search:{default:""},searchModifiers:{},dateFrom:{default:""},dateFromModifiers:{},dateTo:{default:""},dateToModifiers:{}},emits:R(["filter","reset"],["update:type","update:status","update:search","update:dateFrom","update:dateTo"]),setup(l,{emit:y}){const a=$(l,"type"),s=$(l,"status"),r=$(l,"search"),m=$(l,"dateFrom"),g=$(l,"dateTo"),f=y,k=()=>{f("filter")},o=()=>{a.value="all",s.value="all",r.value="",m.value="",g.value="",f("reset")};return(S,i)=>{const c=J,x=H,V=M,I=C;return v(),A(I,null,{default:u(()=>[t("div",ht,[t("div",vt,[n(" Search "),e(c,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=h=>r.value=h),placeholder:"Cari customer...",icon:"i-heroicons-magnifying-glass",onKeyup:D(k,["enter"])},null,8,["modelValue"]),n(" Type "),e(x,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=h=>a.value=h),items:p(O),"value-key":"value",placeholder:"Tipe"},null,8,["modelValue","items"]),n(" Status "),e(x,{modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=h=>s.value=h),items:p(z),"value-key":"value",placeholder:"Status"},null,8,["modelValue","items"]),n(" Date From "),e(c,{modelValue:m.value,"onUpdate:modelValue":i[3]||(i[3]=h=>m.value=h),type:"date",placeholder:"Dari Tanggal"},null,8,["modelValue"]),n(" Date To "),e(c,{modelValue:g.value,"onUpdate:modelValue":i[4]||(i[4]=h=>g.value=h),type:"date",placeholder:"Sampai Tanggal"},null,8,["modelValue"]),n(" Actions "),t("div",_t,[e(V,{color:"primary",icon:"i-heroicons-funnel",onClick:k},{default:u(()=>[...i[5]||(i[5]=[F(" Filter ",-1)])]),_:1}),e(V,{color:"neutral",variant:"ghost",icon:"i-heroicons-x-mark",onClick:o},{default:u(()=>[...i[6]||(i[6]=[F(" Reset ",-1)])]),_:1})])])])]),_:1})}}}),bt={key:0,class:"flex items-center justify-center py-12"},wt={key:1,class:"text-center py-12"},$t={key:2,class:"overflow-x-auto"},Tt={class:"w-full"},Ut={class:"py-3 px-4"},Ft={class:"flex items-center gap-3"},Ct=["src","alt"],St={class:"font-medium text-gray-900 dark:text-white"},Vt={class:"text-sm text-gray-500 dark:text-gray-400"},Lt={class:"py-3 px-4"},At={class:"flex items-center gap-2"},Bt={class:"font-medium text-gray-900 dark:text-white"},Mt={class:"py-3 px-4 text-right"},It={class:"py-3 px-4 text-right"},Rt={class:"text-sm text-gray-500 dark:text-gray-400"},Dt={class:"font-medium text-gray-900 dark:text-white"},Nt={class:"py-3 px-4 text-center"},Pt={class:"py-3 px-4"},jt={class:"text-sm text-gray-600 dark:text-gray-300"},Kt={class:"py-3 px-4 text-center"},Ot=T({__name:"TransactionTable",props:{transactions:{},isLoading:{type:Boolean}},setup(l){const y=s=>s||"https://placehold.co/40x40/1a1a2e/ffffff?text=U",a=s=>["topup","commission","refund","cashback"].includes(s);return(s,r)=>{const m=B,g=Q,f=M,k=C;return v(),A(k,null,{default:u(()=>[l.isLoading?(v(),b("div",bt,[e(m,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin text-gray-400"})])):l.transactions.length===0?(v(),b("div",wt,[e(m,{name:"i-heroicons-inbox",class:"w-12 h-12 mx-auto text-gray-400 mb-3"}),r[0]||(r[0]=t("p",{class:"text-gray-500 dark:text-gray-400"},"Tidak ada transaksi",-1))])):(v(),b("div",$t,[t("table",Tt,[r[1]||(r[1]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Customer "),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Tipe "),t("th",{class:"text-right py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Jumlah "),t("th",{class:"text-right py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Saldo "),t("th",{class:"text-center py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Status "),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Tanggal "),t("th",{class:"text-center py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400"}," Aksi ")])],-1)),t("tbody",null,[(v(!0),b(N,null,P(l.transactions,o=>(v(),b("tr",{key:o.id,class:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50"},[n(" Customer "),t("td",Ut,[t("div",Ft,[t("img",{src:y(o.customerAvatar),alt:o.customerName,class:"w-10 h-10 rounded-full object-cover"},null,8,Ct),t("div",null,[t("p",St,d(o.customerName),1),t("p",Vt,d(o.customerEmail),1)])])]),n(" Type "),t("td",Lt,[t("div",At,[t("div",{class:U(["p-1.5 rounded-lg",`bg-${o.typeColor}-100 dark:bg-${o.typeColor}-900/30`])},[e(m,{name:o.typeIcon,class:U(["w-4 h-4",`text-${o.typeColor}-600 dark:text-${o.typeColor}-400`])},null,8,["name","class"])],2),t("span",Bt,d(o.typeLabel),1)])]),n(" Amount "),t("td",Mt,[t("p",{class:U(["font-bold",a(o.transactionType)?"text-success-600 dark:text-success-400":"text-error-600 dark:text-error-400"])},d(a(o.transactionType)?"+":"-")+" "+d(p(_)(o.amount)),3)]),n(" Balance "),t("td",It,[t("p",Rt,d(p(_)(o.balanceBefore)),1),t("p",Dt," â†’ "+d(p(_)(o.balanceAfter)),1)]),n(" Status "),t("td",Nt,[e(g,{color:o.statusColor,variant:"soft"},{default:u(()=>[F(d(o.statusLabel),1)]),_:2},1032,["color"])]),n(" Date "),t("td",Pt,[t("p",jt,d(p(E)(o.createdAt)),1)]),n(" Actions "),t("td",Kt,[e(p(j),{href:`/admin/finance/transactions/${o.id}`},{default:u(()=>[e(f,{icon:"i-heroicons-eye",color:"neutral",variant:"ghost",size:"sm"})]),_:1},8,["href"])])]))),128))])])]))]),_:1})}}}),zt={class:"p-6 space-y-6"},se=T({layout:K,__name:"index",props:{transactions:{},pagination:{},stats:{},filters:{}},setup(l){const y=l,a=w(y.filters.type||"all"),s=w(y.filters.status||"all"),r=w(y.filters.search),m=w(y.filters.dateFrom),g=w(y.filters.dateTo),f=w(!1),k=()=>{f.value=!0,L.get("/admin/finance/transactions",{type:a.value==="all"?"":a.value,status:s.value==="all"?"":s.value,search:r.value,dateFrom:m.value,dateTo:g.value},{preserveState:!0,preserveScroll:!0,onFinish:()=>{f.value=!1}})},o=()=>{a.value="all",s.value="all",r.value="",m.value="",g.value="",k()},S=i=>{f.value=!0,L.get("/admin/finance/transactions",{type:a.value==="all"?"":a.value,status:s.value==="all"?"":s.value,search:r.value,dateFrom:m.value,dateTo:g.value,page:i},{preserveState:!0,preserveScroll:!0,onFinish:()=>{f.value=!1}})};return(i,c)=>(v(),b("div",zt,[n(" Header "),c[5]||(c[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Riwayat Transaksi"),t("p",{class:"text-gray-500 dark:text-gray-400"}," Lihat semua transaksi wallet dari customer ")],-1)),n(" Stats "),e(ft,{stats:l.stats},null,8,["stats"]),n(" Filters "),e(kt,{type:a.value,"onUpdate:type":c[0]||(c[0]=x=>a.value=x),status:s.value,"onUpdate:status":c[1]||(c[1]=x=>s.value=x),search:r.value,"onUpdate:search":c[2]||(c[2]=x=>r.value=x),"date-from":m.value,"onUpdate:dateFrom":c[3]||(c[3]=x=>m.value=x),"date-to":g.value,"onUpdate:dateTo":c[4]||(c[4]=x=>g.value=x),onFilter:k,onReset:o},null,8,["type","status","search","date-from","date-to"]),n(" Table "),e(Ot,{transactions:l.transactions,"is-loading":f.value},null,8,["transactions","is-loading"]),n(" Pagination "),e(W,{pagination:l.pagination,onPageChange:S},null,8,["pagination"])]))}});export{se as default};
