import{_ as q}from"./Pagination-97jdZAo5.js";import{_ as G}from"./DropdownMenu-DxuVXSbh.js";import{_ as Q}from"./Tooltip-BrTR-Vq7.js";import{a as W,_ as X,b as Y}from"./Button-CI_-soaG.js";import{_ as Z}from"./Badge-DfumusWV.js";import{_ as tt}from"./Checkbox-9qpvU9Db.js";import{_ as et}from"./Select-D6kv-Jzs.js";import{_ as at}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as st}from"./Card-BjL1m_sW.js";import{d as lt,h as _,y as ot,l as f,c as rt,a as c,f as s,b as t,u as b,i as it,j as m,w as i,k as u,t as n,o as d,F as D,r as nt,e as B}from"./app-CyjtdGoI.js";import{A as dt}from"./admin-BzR6vrex.js";import{e as ut,b as ct,g as mt}from"./admin_article-B2V9J82g.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Label-yeknIWsP.js";const gt={class:"space-y-6"},pt={class:"flex items-center justify-between"},xt={class:"grid grid-cols-2 gap-4 md:grid-cols-4"},ft={class:"text-2xl font-bold text-gray-900 dark:text-white"},yt={class:"text-2xl font-bold text-green-600"},vt={class:"text-2xl font-bold text-yellow-600"},ht={class:"text-2xl font-bold text-primary-600"},kt={class:"flex flex-col gap-4 md:flex-row md:items-center"},_t={class:"overflow-x-auto"},bt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},wt={class:"bg-gray-50 dark:bg-gray-800"},St={class:"w-10 px-4 py-3"},Ut={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-900"},Vt={class:"px-4 py-3"},At={class:"px-4 py-3"},$t={class:"flex items-center gap-3"},Dt=["src","alt"],Bt={key:1,class:"flex h-12 w-16 items-center justify-center rounded bg-gray-100 dark:bg-gray-800"},Ct={class:"min-w-0 flex-1"},Pt={class:"truncate font-medium text-gray-900 dark:text-white"},Tt={class:"truncate text-sm text-gray-500 dark:text-gray-400"},Ft={class:"mt-1 flex items-center gap-2"},Ot={class:"px-4 py-3"},jt={class:"px-4 py-3"},zt={key:0,class:"flex items-center gap-2"},Kt={class:"text-sm text-gray-700 dark:text-gray-300"},Nt={key:1,class:"text-sm text-gray-400"},Lt={class:"px-4 py-3"},Jt={class:"px-4 py-3"},Ht={class:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400"},Mt={class:"flex items-center gap-1"},Et={class:"flex items-center gap-1"},It={class:"flex items-center gap-1"},Rt={class:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400"},qt={class:"px-4 py-3"},Gt={class:"flex items-center justify-end gap-2"},Qt={key:0},Wt={colspan:"8",class:"px-4 py-12 text-center"},Xt={key:0,class:"flex items-center justify-between border-t border-gray-200 px-4 py-3 dark:border-gray-700"},Yt={class:"text-sm text-gray-500 dark:text-gray-400"},pe=lt({layout:dt,__name:"index",props:{articles:{},filters:{},stats:{},categories:{}},setup(l){const g=l,r=_({search:g.filters.search,status:g.filters.status,category:g.filters.category,sortBy:g.filters.sortBy,sortOrder:g.filters.sortOrder}),w=_(null);ot(()=>r.value.search,()=>{w.value&&clearTimeout(w.value),w.value=setTimeout(()=>{h()},500)});function h(){f.get("/admin/articles",{search:r.value.search||void 0,status:r.value.status||void 0,category:r.value.category||void 0,sortBy:r.value.sortBy||void 0,sortOrder:r.value.sortOrder||void 0},{preserveState:!0,preserveScroll:!0})}function C(){r.value={search:"",status:"",category:"",sortBy:"createdAt",sortOrder:"desc"},f.get("/admin/articles")}function P(o){f.get("/admin/articles",{...r.value,page:o},{preserveState:!0,preserveScroll:!0})}const p=_([]),U=_(null);function T(o){o?p.value=g.articles.data.map(e=>e.id):p.value=[]}function F(o){const e=p.value.indexOf(o);e===-1?p.value.push(o):p.value.splice(e,1)}function O(o){f.patch(`/admin/articles/${o.id}/status`,{},{preserveState:!0,preserveScroll:!0})}function j(o){f.patch(`/admin/articles/${o.id}/featured`,{},{preserveState:!0,preserveScroll:!0})}function z(o){f.post(`/admin/articles/${o.id}/duplicate`,{},{preserveState:!1})}function K(o){confirm(`Apakah Anda yakin ingin menghapus artikel "${o.title}"?`)&&(U.value=o.id,f.delete(`/admin/articles/${o.id}`,{preserveState:!0,preserveScroll:!0,onFinish:()=>{U.value=null}}))}function N(o){return new Date(o).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}const L=[{value:"",label:"Semua Status"},{value:"draft",label:"Draft"},{value:"published",label:"Dipublikasikan"},{value:"archived",label:"Diarsipkan"}],J=rt(()=>[{value:"",label:"Semua Kategori"},...g.categories]),H=[{value:"createdAt",label:"Tanggal Dibuat"},{value:"title",label:"Judul"},{value:"viewCount",label:"Views"},{value:"publishedAt",label:"Tanggal Publish"}];return(o,e)=>{const y=W,v=st,M=at,S=et,V=tt,x=X,k=Z,E=Y,A=Q,I=G,R=q;return d(),c(D,null,[s(b(it),{title:"Kelola Artikel"}),t("div",gt,[m(" Header "),t("div",pt,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Kelola Artikel"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Kelola semua artikel dan konten blog ")],-1)),s(y,{to:"/admin/articles/create",icon:"i-heroicons-plus",color:"primary"},{default:i(()=>[...e[4]||(e[4]=[u(" Tambah Artikel ",-1)])]),_:1})]),m(" Stats Cards "),t("div",xt,[s(v,{class:"text-center"},{default:i(()=>[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total",-1)),t("p",ft,n(l.stats.total),1)]),_:1}),s(v,{class:"text-center"},{default:i(()=>[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Dipublikasikan",-1)),t("p",yt,n(l.stats.published),1)]),_:1}),s(v,{class:"text-center"},{default:i(()=>[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Draft",-1)),t("p",vt,n(l.stats.draft),1)]),_:1}),s(v,{class:"text-center"},{default:i(()=>[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Unggulan",-1)),t("p",ht,n(l.stats.featured),1)]),_:1})]),m(" Filters "),s(v,null,{default:i(()=>[t("div",kt,[s(M,{modelValue:r.value.search,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.search=a),icon:"i-heroicons-magnifying-glass",placeholder:"Cari artikel...",class:"w-full md:w-64"},null,8,["modelValue"]),s(S,{modelValue:r.value.status,"onUpdate:modelValue":[e[1]||(e[1]=a=>r.value.status=a),h],options:L,"option-attribute":"label","value-attribute":"value",placeholder:"Status",class:"w-full md:w-40"},null,8,["modelValue"]),s(S,{modelValue:r.value.category,"onUpdate:modelValue":[e[2]||(e[2]=a=>r.value.category=a),h],options:J.value,"option-attribute":"label","value-attribute":"value",placeholder:"Kategori",class:"w-full md:w-48"},null,8,["modelValue","options"]),s(S,{modelValue:r.value.sortBy,"onUpdate:modelValue":[e[3]||(e[3]=a=>r.value.sortBy=a),h],options:H,"option-attribute":"label","value-attribute":"value",class:"w-full md:w-40"},null,8,["modelValue"]),s(y,{color:"neutral",variant:"ghost",icon:"i-heroicons-arrow-path",onClick:C},{default:i(()=>[...e[10]||(e[10]=[u(" Reset ",-1)])]),_:1})])]),_:1}),m(" Articles Table "),s(v,{class:"overflow-hidden"},{default:i(()=>[t("div",_t,[t("table",bt,[t("thead",wt,[t("tr",null,[t("th",St,[s(V,{"model-value":p.value.length===l.articles.data.length&&l.articles.data.length>0,"onUpdate:modelValue":T},null,8,["model-value"])]),e[11]||(e[11]=t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Judul ",-1)),e[12]||(e[12]=t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Kategori ",-1)),e[13]||(e[13]=t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Penulis ",-1)),e[14]||(e[14]=t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Status ",-1)),e[15]||(e[15]=t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Statistik ",-1)),e[16]||(e[16]=t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Dibuat ",-1)),e[17]||(e[17]=t("th",{class:"px-4 py-3"},null,-1))])]),t("tbody",Ut,[(d(!0),c(D,null,nt(l.articles.data,a=>(d(),c("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[t("td",Vt,[s(V,{"model-value":p.value.includes(a.id),"onUpdate:modelValue":$=>F(a.id)},null,8,["model-value","onUpdate:modelValue"])]),t("td",At,[t("div",$t,[a.thumbnail?(d(),c("img",{key:0,src:a.thumbnail,alt:a.title,class:"h-12 w-16 rounded object-cover"},null,8,Dt)):(d(),c("div",Bt,[s(x,{name:"i-heroicons-photo",class:"text-gray-400"})])),t("div",Ct,[t("p",Pt,n(a.title),1),t("p",Tt,n(a.slug),1),t("div",Ft,[a.isFeatured?(d(),B(k,{key:0,color:"warning",variant:"soft",size:"xs"},{default:i(()=>[s(x,{name:"i-heroicons-star",class:"mr-1 h-3 w-3"}),e[18]||(e[18]=u(" Unggulan ",-1))]),_:1})):m("v-if",!0),a.isPinned?(d(),B(k,{key:1,color:"info",variant:"soft",size:"xs"},{default:i(()=>[s(x,{name:"i-heroicons-map-pin",class:"mr-1 h-3 w-3"}),e[19]||(e[19]=u(" Disematkan ",-1))]),_:1})):m("v-if",!0)])])])]),t("td",Ot,[s(k,{color:b(ut)(a.category),variant:"soft"},{default:i(()=>[u(n(l.categories.find($=>$.value===a.category)?.label||a.category),1)]),_:2},1032,["color"])]),t("td",jt,[a.author?(d(),c("div",zt,[s(E,{src:a.author.avatar||void 0,alt:a.author.fullName,size:"xs"},null,8,["src","alt"]),t("span",Kt,n(a.author.fullName),1)])):(d(),c("span",Nt,"-"))]),t("td",Lt,[s(k,{color:b(ct)(a.status),variant:"soft"},{default:i(()=>[u(n(b(mt)(a.status)),1)]),_:2},1032,["color"])]),t("td",Jt,[t("div",Ht,[t("span",Mt,[s(x,{name:"i-heroicons-eye",class:"h-4 w-4"}),u(" "+n(a.viewCount),1)]),t("span",Et,[s(x,{name:"i-heroicons-heart",class:"h-4 w-4"}),u(" "+n(a.likeCount),1)]),t("span",It,[s(x,{name:"i-heroicons-clock",class:"h-4 w-4"}),u(" "+n(a.readTime)+" mnt ",1)])])]),t("td",Rt,n(N(a.createdAt)),1),t("td",qt,[t("div",Gt,[s(A,{text:"Lihat"},{default:i(()=>[s(y,{icon:"i-heroicons-eye",color:"neutral",variant:"ghost",size:"xs",to:`/admin/articles/${a.id}`},null,8,["to"])]),_:2},1024),s(A,{text:"Edit"},{default:i(()=>[s(y,{icon:"i-heroicons-pencil",color:"primary",variant:"ghost",size:"xs",to:`/admin/articles/${a.id}/edit`},null,8,["to"])]),_:2},1024),s(I,{items:[[{label:a.status==="published"?"Jadikan Draft":"Publikasikan",icon:a.status==="published"?"i-heroicons-archive-box":"i-heroicons-paper-airplane",onSelect:()=>O(a)},{label:a.isFeatured?"Hapus Unggulan":"Jadikan Unggulan",icon:"i-heroicons-star",onSelect:()=>j(a)},{label:"Duplikat",icon:"i-heroicons-document-duplicate",onSelect:()=>z(a)}],[{label:"Hapus",icon:"i-heroicons-trash",color:"error",onSelect:()=>K(a)}]],content:{align:"end"},modal:!1},{default:i(()=>[s(y,{icon:"i-heroicons-ellipsis-vertical",color:"neutral",variant:"ghost",size:"xs"})]),_:1},8,["items"])])])]))),128)),l.articles.data.length===0?(d(),c("tr",Qt,[t("td",Wt,[s(x,{name:"i-heroicons-document-text",class:"mx-auto mb-4 h-12 w-12 text-gray-300"}),e[21]||(e[21]=t("p",{class:"text-gray-500 dark:text-gray-400"},"Tidak ada artikel ditemukan",-1)),s(y,{to:"/admin/articles/create",color:"primary",variant:"soft",class:"mt-4"},{default:i(()=>[...e[20]||(e[20]=[u(" Buat Artikel Baru ",-1)])]),_:1})])])):m("v-if",!0)])])]),m(" Pagination "),l.articles.meta.lastPage>1?(d(),c("div",Xt,[t("div",Yt," Menampilkan "+n((l.articles.meta.currentPage-1)*l.articles.meta.perPage+1)+" - "+n(Math.min(l.articles.meta.currentPage*l.articles.meta.perPage,l.articles.meta.total))+" dari "+n(l.articles.meta.total)+" artikel ",1),s(R,{"model-value":l.articles.meta.currentPage,"page-count":l.articles.meta.perPage,total:l.articles.meta.total,"onUpdate:modelValue":P},null,8,["model-value","page-count","total"])])):m("v-if",!0)]),_:1})])],64)}}});export{pe as default};
