import{_ as W}from"./Checkbox-9qpvU9Db.js";import{_ as X}from"./Select-D6kv-Jzs.js";import{a as Y,_ as Z}from"./Button-CI_-soaG.js";import{_ as ee}from"./Badge-DfumusWV.js";import{_ as le}from"./Card-BjL1m_sW.js";import{_ as ae}from"./Textarea-CZyY9J1c.js";import{_ as te}from"./FormField-qFQ_28ZO.js";import{_ as oe}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as se,a as ne}from"./ArticlePageBuilder.vue_vue_type_script_setup_true_lang-BSrqSR3I.js";import{d as ie,C as re,h as f,y as ue,c as M,a as g,f as a,b as t,u as s,i as de,j as i,w as n,k as v,D as me,E as C,G as $,n as ce,t as b,o as c,F as R,r as pe,e as fe}from"./app-CyjtdGoI.js";import{A as ge}from"./admin-BzR6vrex.js";import{c as ve}from"./admin_article-B2V9J82g.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./Label-yeknIWsP.js";import"./Modal-Bgd8PL5Y.js";import"./Alert-CrKiQ9oh.js";import"./Tooltip-BrTR-Vq7.js";const be={class:"space-y-6"},ke={class:"flex items-center justify-between"},he={class:"flex items-center gap-4"},ye={class:"flex items-center gap-2"},_e={class:"space-y-6"},xe={class:"space-y-4"},we={class:"flex items-center justify-between"},Ve={class:"space-y-6"},Te={class:"grid gap-6 md:grid-cols-2"},Ue={class:"space-y-3"},Ce={key:0,class:"relative aspect-video overflow-hidden rounded-lg border dark:border-gray-700"},$e=["src"],Se={class:"space-y-3"},De={key:0,class:"relative aspect-video overflow-hidden rounded-lg border dark:border-gray-700"},Ae=["src"],Pe={class:"space-y-6"},Be={class:"space-y-4"},Fe={class:"mt-6 rounded-lg border bg-white p-4 dark:border-gray-700 dark:bg-gray-800"},Ke={class:"space-y-1"},je={class:"text-lg text-blue-600 hover:underline"},Ie={class:"text-sm text-green-600"},Me={class:"text-sm text-gray-600 dark:text-gray-400"},Re={class:"space-y-6"},Ee={class:"grid gap-6 md:grid-cols-2"},Ge={class:"space-y-4"},Le={class:"space-y-2"},Oe={class:"flex gap-2"},ze={key:0,class:"flex flex-wrap gap-2"},Ne={class:"space-y-4"},Je={class:"space-y-3 pt-4"},cl=ie({layout:ge,__name:"create",props:{authors:{},categories:{}},setup(D){const l=re(ve()),k=f("content"),h=f(!1),_=f(null),x=f(null),w=f(null),V=f(null);function E(r){const u=r.target.files?.[0];if(u){l.thumbnail=u;const p=new FileReader;p.onload=m=>{w.value=m.target?.result},p.readAsDataURL(u)}}function G(r){const u=r.target.files?.[0];if(u){l.banner=u;const p=new FileReader;p.onload=m=>{V.value=m.target?.result},p.readAsDataURL(u)}}function L(){l.thumbnail=null,l.thumbnailUrl="",w.value=null,_.value&&(_.value.value="")}function O(){l.banner=null,l.bannerUrl="",V.value=null,x.value&&(x.value.value="")}ue(()=>l.title,r=>{(!l.slug||l.slug===A(l.title.slice(0,-1)))&&(l.slug=A(r))});function A(r){return r.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const U=f("");function P(){const r=U.value.trim();r&&!l.tags.includes(r)&&l.tags.push(r),U.value=""}function z(r){l.tags.splice(r,1)}function N(r){(r.key==="Enter"||r.key===",")&&(r.preventDefault(),P())}function S(r="draft"){l.status=r,h.value=!0,l.post("/admin/articles",{preserveScroll:!0,onFinish:()=>{h.value=!1}})}function J(){localStorage.setItem("article_preview",JSON.stringify(l.data())),window.open("/artikel/preview","_blank")}const q=[{value:"content",label:"Konten",icon:"i-heroicons-document-text"},{value:"media",label:"Media",icon:"i-heroicons-photo"},{value:"seo",label:"SEO",icon:"i-heroicons-magnifying-glass"},{value:"settings",label:"Pengaturan",icon:"i-heroicons-cog-6-tooth"}],H=M(()=>l.metaDescription?.length||0),Q=M(()=>l.metaTitle?.length||0);return(r,e)=>{const u=Y,p=se,m=oe,d=te,B=ae,y=le,F=ee,T=Z,K=X,j=W;return c(),g(R,null,[a(s(de),{title:"Tambah Artikel"}),t("div",be,[i(" Header "),t("div",ke,[t("div",he,[a(u,{icon:"i-heroicons-arrow-left",color:"neutral",variant:"ghost",to:"/admin/articles"}),e[20]||(e[20]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Tambah Artikel"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Buat artikel baru dengan page builder ")],-1))]),t("div",ye,[a(u,{color:"neutral",variant:"soft",icon:"i-heroicons-eye",onClick:J},{default:n(()=>[...e[21]||(e[21]=[v(" Preview ",-1)])]),_:1}),a(u,{color:"neutral",variant:"outline",loading:h.value&&s(l).status==="draft",disabled:h.value,onClick:e[0]||(e[0]=o=>S("draft"))},{default:n(()=>[...e[22]||(e[22]=[v(" Simpan Draft ",-1)])]),_:1},8,["loading","disabled"]),a(u,{color:"primary",loading:h.value&&s(l).status==="published",disabled:h.value,icon:"i-heroicons-paper-airplane",onClick:e[1]||(e[1]=o=>S("published"))},{default:n(()=>[...e[23]||(e[23]=[v(" Publikasikan ",-1)])]),_:1},8,["loading","disabled"])])]),i(" Tabs "),a(p,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=o=>k.value=o),items:q},null,8,["modelValue"]),i(" Form "),t("form",{onSubmit:e[19]||(e[19]=me(o=>S("draft"),["prevent"]))},[i(" Content Tab "),C(t("div",_e,[a(y,null,{default:n(()=>[t("div",xe,[i(" Title "),a(d,{label:"Judul Artikel",required:"",error:s(l).errors.title},{default:n(()=>[a(m,{modelValue:s(l).title,"onUpdate:modelValue":e[3]||(e[3]=o=>s(l).title=o),placeholder:"Masukkan judul artikel...",size:"lg",class:ce([{"text-xl font-semibold":!0},"w-full"])},null,8,["modelValue"])]),_:1},8,["error"]),i(" Slug "),a(d,{label:"Slug (URL)",error:s(l).errors.slug},{default:n(()=>[a(m,{modelValue:s(l).slug,"onUpdate:modelValue":e[4]||(e[4]=o=>s(l).slug=o),placeholder:"url-artikel",icon:"i-heroicons-link",class:"w-full"},{leading:n(()=>[...e[24]||(e[24]=[t("span",{class:"text-sm text-gray-500"},"/artikel/",-1)])]),_:1},8,["modelValue"])]),_:1},8,["error"]),i(" Excerpt "),a(d,{label:"Ringkasan",error:s(l).errors.excerpt},{default:n(()=>[a(B,{modelValue:s(l).excerpt,"onUpdate:modelValue":e[5]||(e[5]=o=>s(l).excerpt=o),placeholder:"Tulis ringkasan singkat artikel (akan ditampilkan di daftar artikel)...",rows:3,class:"w-full"},null,8,["modelValue"])]),_:1},8,["error"])])]),_:1}),i(" Page Builder "),a(y,null,{header:n(()=>[t("div",we,[e[25]||(e[25]=t("h3",{class:"font-semibold"},"Konten Artikel",-1)),a(F,{color:"info",variant:"soft"},{default:n(()=>[v(b(s(l).blocks.length)+" blok ",1)]),_:1})])]),default:n(()=>[a(ne,{modelValue:s(l).blocks,"onUpdate:modelValue":e[6]||(e[6]=o=>s(l).blocks=o),"upload-url":"/admin/articles/upload-image"},null,8,["modelValue"])]),_:1})],512),[[$,k.value==="content"]]),i(" Media Tab "),C(t("div",Ve,[a(y,null,{header:n(()=>[...e[26]||(e[26]=[t("h3",{class:"font-semibold"},"Gambar Artikel",-1)])]),default:n(()=>[t("div",Te,[i(" Thumbnail "),a(d,{label:"Thumbnail",help:"Gambar yang ditampilkan di daftar artikel (rasio 16:9)"},{default:n(()=>[t("div",Ue,[t("input",{ref_key:"thumbnailInputRef",ref:_,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",class:"hidden",onChange:E},null,544),w.value?(c(),g("div",Ce,[t("img",{src:w.value,alt:"Thumbnail",class:"h-full w-full object-cover"},null,8,$e),a(u,{icon:"i-heroicons-x-mark",color:"error",variant:"solid",size:"xs",class:"absolute right-2 top-2",onClick:L})])):(c(),g("div",{key:1,class:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 transition-colors hover:border-primary-500 dark:border-gray-600",onClick:e[7]||(e[7]=o=>_.value?.click())},[a(T,{name:"i-heroicons-photo",class:"mb-2 h-8 w-8 text-gray-400"}),e[27]||(e[27]=t("span",{class:"text-sm text-gray-500"},"Klik untuk upload thumbnail",-1))])),a(u,{type:"button",color:"neutral",variant:"outline",size:"sm",onClick:e[8]||(e[8]=o=>_.value?.click())},{default:n(()=>[a(T,{name:"i-heroicons-arrow-up-tray",class:"mr-2 h-4 w-4"}),v(" "+b(w.value?"Ganti Thumbnail":"Upload Thumbnail"),1)]),_:1})])]),_:1}),i(" Banner "),a(d,{label:"Banner",help:"Gambar header yang ditampilkan di halaman artikel"},{default:n(()=>[t("div",Se,[t("input",{ref_key:"bannerInputRef",ref:x,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",class:"hidden",onChange:G},null,544),V.value?(c(),g("div",De,[t("img",{src:V.value,alt:"Banner",class:"h-full w-full object-cover"},null,8,Ae),a(u,{icon:"i-heroicons-x-mark",color:"error",variant:"solid",size:"xs",class:"absolute right-2 top-2",onClick:O})])):(c(),g("div",{key:1,class:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 transition-colors hover:border-primary-500 dark:border-gray-600",onClick:e[9]||(e[9]=o=>x.value?.click())},[a(T,{name:"i-heroicons-photo",class:"mb-2 h-8 w-8 text-gray-400"}),e[28]||(e[28]=t("span",{class:"text-sm text-gray-500"},"Klik untuk upload banner",-1))])),a(u,{type:"button",color:"neutral",variant:"outline",size:"sm",onClick:e[10]||(e[10]=o=>x.value?.click())},{default:n(()=>[a(T,{name:"i-heroicons-arrow-up-tray",class:"mr-2 h-4 w-4"}),v(" "+b(V.value?"Ganti Banner":"Upload Banner"),1)]),_:1})])]),_:1})])]),_:1})],512),[[$,k.value==="media"]]),i(" SEO Tab "),C(t("div",Pe,[a(y,null,{header:n(()=>[...e[29]||(e[29]=[t("h3",{class:"font-semibold"},"Pengaturan SEO",-1)])]),default:n(()=>[t("div",Be,[i(" Meta Title "),a(d,{label:"Meta Title",help:`${Q.value}/70 karakter`},{default:n(()=>[a(m,{modelValue:s(l).metaTitle,"onUpdate:modelValue":e[11]||(e[11]=o=>s(l).metaTitle=o),placeholder:"Judul untuk mesin pencari (kosongkan untuk menggunakan judul artikel)...",maxlength:70,class:"w-full"},null,8,["modelValue"])]),_:1},8,["help"]),i(" Meta Description "),a(d,{label:"Meta Description",help:`${H.value}/160 karakter`},{default:n(()=>[a(B,{modelValue:s(l).metaDescription,"onUpdate:modelValue":e[12]||(e[12]=o=>s(l).metaDescription=o),placeholder:"Deskripsi untuk mesin pencari (kosongkan untuk menggunakan ringkasan)...",rows:3,maxlength:160,class:"w-full"},null,8,["modelValue"])]),_:1},8,["help"]),i(" Meta Keywords "),a(d,{label:"Meta Keywords"},{default:n(()=>[a(m,{modelValue:s(l).metaKeywords,"onUpdate:modelValue":e[13]||(e[13]=o=>s(l).metaKeywords=o),placeholder:"kata kunci, dipisah, koma...",class:"w-full"},null,8,["modelValue"])]),_:1}),i(" SEO Preview "),t("div",Fe,[e[30]||(e[30]=t("p",{class:"mb-2 text-xs text-gray-500"},"Preview di Google:",-1)),t("div",Ke,[t("p",je,b(s(l).metaTitle||s(l).title||"Judul Artikel"),1),t("p",Ie," https://ogitu.com/artikel/"+b(s(l).slug||"url-artikel"),1),t("p",Me,b(s(l).metaDescription||s(l).excerpt||"Deskripsi artikel akan muncul di sini..."),1)])])])]),_:1})],512),[[$,k.value==="seo"]]),i(" Settings Tab "),C(t("div",Re,[t("div",Ee,[i(" Category & Tags "),a(y,null,{header:n(()=>[...e[31]||(e[31]=[t("h3",{class:"font-semibold"},"Kategori & Tags",-1)])]),default:n(()=>[t("div",Ge,[i(" Category "),a(d,{label:"Kategori",required:"",error:s(l).errors.category},{default:n(()=>[a(K,{modelValue:s(l).category,"onUpdate:modelValue":e[14]||(e[14]=o=>s(l).category=o),items:D.categories,"label-key":"label","value-key":"value",placeholder:"Pilih kategori...",class:"w-full",portal:!1},null,8,["modelValue","items"])]),_:1},8,["error"]),i(" Tags "),a(d,{label:"Tags"},{default:n(()=>[t("div",Le,[t("div",Oe,[a(m,{modelValue:U.value,"onUpdate:modelValue":e[15]||(e[15]=o=>U.value=o),placeholder:"Tambah tag...",class:"flex-1 w-full",onKeydown:N},null,8,["modelValue"]),a(u,{icon:"i-heroicons-plus",color:"primary",variant:"soft",onClick:P})]),s(l).tags.length>0?(c(),g("div",ze,[(c(!0),g(R,null,pe(s(l).tags,(o,I)=>(c(),fe(F,{key:I,color:"neutral",variant:"soft",class:"cursor-pointer",onClick:qe=>z(I)},{default:n(()=>[v(b(o)+" ",1),a(T,{name:"i-heroicons-x-mark",class:"ml-1 h-3 w-3"})]),_:2},1032,["onClick"]))),128))])):i("v-if",!0)])]),_:1})])]),_:1}),i(" Author & Options "),a(y,null,{header:n(()=>[...e[32]||(e[32]=[t("h3",{class:"font-semibold"},"Pengaturan Lainnya",-1)])]),default:n(()=>[t("div",Ne,[i(" Author "),a(d,{label:"Penulis"},{default:n(()=>[a(K,{modelValue:s(l).authorId,"onUpdate:modelValue":e[16]||(e[16]=o=>s(l).authorId=o),items:D.authors.map(o=>({value:o.id,label:o.fullName})),"label-key":"label","value-key":"value",placeholder:"Pilih penulis...",class:"w-full",portal:!1},null,8,["modelValue","items"])]),_:1}),i(" Options "),t("div",Je,[a(j,{modelValue:s(l).isFeatured,"onUpdate:modelValue":e[17]||(e[17]=o=>s(l).isFeatured=o),label:"Artikel Unggulan",help:"Artikel ini akan ditampilkan di bagian unggulan"},null,8,["modelValue"]),a(j,{modelValue:s(l).isPinned,"onUpdate:modelValue":e[18]||(e[18]=o=>s(l).isPinned=o),label:"Sematkan di Atas",help:"Artikel ini akan selalu muncul di atas daftar"},null,8,["modelValue"])])])]),_:1})])],512),[[$,k.value==="settings"]])],32)])],64)}}});export{cl as default};
