import{_ as j}from"./Card-BjL1m_sW.js";import{_ as B,a as F}from"./Button-CI_-soaG.js";import{d as S,c as w,a as i,F as C,r as V,e as $,w as g,b as e,t as l,n as T,f as a,o,u as x,k as P,j as y,m as z,h as R,i as E,l as N}from"./app-CyjtdGoI.js";import{a as v,p as M,s as H,f as A}from"./analytics-Dycz2OpM.js";import{_ as L}from"./SelectMenu-DKAhKU-v.js";import{_ as D}from"./FormField-qFQ_28ZO.js";import{_ as O}from"./ColorModeButton-Bf7Nr8w3.js";import{_ as K}from"./Badge-DfumusWV.js";import{A as Q}from"./admin-BzR6vrex.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./index-v4g8wp86.js";import"./Label-yeknIWsP.js";import"./Tooltip-BrTR-Vq7.js";const q={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},G={class:"flex items-start justify-between"},J={class:"text-sm text-gray-500 dark:text-gray-400"},W={class:"mt-1 text-2xl font-bold"},X=S({__name:"ProductStatsCards",props:{summary:{}},setup(s){const f=s,c=w(()=>[{title:"Total Produk",value:v(f.summary.totalProducts),icon:"i-heroicons-cube",color:"primary"},{title:"Produk Aktif",value:v(f.summary.activeProducts),icon:"i-heroicons-check-circle",color:"success"},{title:"Stok Habis",value:v(f.summary.outOfStockProducts),icon:"i-heroicons-x-circle",color:"error"},{title:"Stok Rendah",value:v(f.summary.lowStockProducts),icon:"i-heroicons-exclamation-triangle",color:"warning"}]);return(u,n)=>{const r=B,p=j;return o(),i("div",q,[(o(!0),i(C,null,V(c.value,d=>(o(),$(p,{key:d.title},{default:g(()=>[e("div",G,[e("div",null,[e("p",J,l(d.title),1),e("p",W,l(d.value),1)]),e("div",{class:T(["p-3 rounded-lg",{"bg-primary-100 dark:bg-primary-900":d.color==="primary","bg-green-100 dark:bg-green-900":d.color==="success","bg-red-100 dark:bg-red-900":d.color==="error","bg-yellow-100 dark:bg-yellow-900":d.color==="warning"}])},[a(r,{name:d.icon,class:T(["w-6 h-6",{"text-primary-500":d.color==="primary","text-green-500":d.color==="success","text-red-500":d.color==="error","text-yellow-500":d.color==="warning"}])},null,8,["name","class"])],2)])]),_:2},1024))),128))])}}}),Y={class:"flex flex-wrap items-end gap-3"},Z=S({__name:"ProductFilters",props:{period:{},sortBy:{},search:{}},emits:["update:period","update:sortBy","update:search","apply"],setup(s,{emit:f}){const c=s,u=f,n=w({get:()=>c.period,set:m=>u("update:period",m)}),r=w({get:()=>c.sortBy,set:m=>u("update:sortBy",m)}),p=w({get:()=>c.search||"",set:m=>u("update:search",m)}),d=()=>{u("apply")};return(m,t)=>{const b=O,h=D,_=L,k=B,I=F;return o(),i("div",Y,[a(h,{label:"Cari Produk",class:"flex-1 min-w-64"},{default:g(()=>[a(b,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=U=>p.value=U),placeholder:"Nama produk atau SKU...",icon:"i-heroicons-magnifying-glass"},null,8,["modelValue"])]),_:1}),a(h,{label:"Periode"},{default:g(()=>[a(_,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=U=>n.value=U),items:x(M),"value-key":"value",class:"w-44"},null,8,["modelValue","items"])]),_:1}),a(h,{label:"Urutkan"},{default:g(()=>[a(_,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=U=>r.value=U),items:x(H),"value-key":"value",class:"w-44"},null,8,["modelValue","items"])]),_:1}),a(I,{color:"primary",onClick:d},{default:g(()=>[a(k,{name:"i-heroicons-funnel",class:"mr-1"}),t[3]||(t[3]=P(" Filter ",-1))]),_:1})])}}}),ee={class:"overflow-x-auto"},te={class:"w-full text-sm"},se={class:"py-3 px-4"},ae={class:"flex items-center gap-3"},oe={class:"w-10 h-10 rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 shrink-0"},ne=["src","alt"],re={key:1,class:"w-full h-full flex items-center justify-center"},le={class:"min-w-0"},ie={class:"text-xs text-gray-500"},ce={class:"py-3 px-4"},de={class:"py-3 px-4 font-medium"},ue={class:"py-3 px-4"},me={class:"py-3 px-4 font-medium"},ge={class:"py-3 px-4"},ye={class:"py-3 px-4 font-medium text-green-600"},pe={class:"py-3 px-4"},fe={class:"flex items-center gap-1"},he={class:"text-gray-500 text-xs"},_e={class:"py-3 px-4"},xe={class:"py-3 px-4"},ve={key:0,class:"text-center text-gray-500 py-8"},be=S({__name:"ProductPerformanceTable",props:{products:{}},setup(s){const f=n=>{switch(n){case"active":return"success";case"inactive":return"gray";case"out_of_stock":return"error";default:return"gray"}},c=n=>{switch(n){case"active":return"Aktif";case"inactive":return"Nonaktif";case"out_of_stock":return"Habis";default:return n}},u=n=>n===0?"text-red-500":n<=10?"text-yellow-500":"text-green-500";return(n,r)=>{const p=B,d=K,m=j;return o(),$(m,null,{default:g(()=>[e("div",ee,[e("table",te,[r[0]||(r[0]=e("thead",null,[e("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Produk"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Kategori"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Harga"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Stok"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Terjual (Periode)"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Total Terjual"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Pendapatan (Periode)"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Rating"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Dilihat"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Status")])],-1)),e("tbody",null,[(o(!0),i(C,null,V(s.products,t=>(o(),i("tr",{key:t.id,class:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50"},[e("td",se,[e("div",ae,[e("div",oe,[t.image?(o(),i("img",{key:0,src:t.image,alt:t.name,class:"w-full h-full object-cover"},null,8,ne)):(o(),i("div",re,[a(p,{name:"i-heroicons-photo",class:"w-5 h-5 text-gray-400"})]))]),e("div",le,[a(x(z),{href:`/admin/products/${t.id}`,class:"text-primary-500 hover:text-primary-600 font-medium truncate block max-w-48"},{default:g(()=>[P(l(t.name),1)]),_:2},1032,["href"]),e("p",ie,l(t.sku),1)])])]),e("td",ce,l(t.category),1),e("td",de,l(x(A)(t.price)),1),e("td",ue,[e("span",{class:T([u(t.stock),"font-medium"])},l(x(v)(t.stock)),3)]),e("td",me,l(x(v)(t.periodSold)),1),e("td",ge,l(x(v)(t.totalSold)),1),e("td",ye,l(x(A)(t.periodRevenue)),1),e("td",pe,[e("div",fe,[a(p,{name:"i-heroicons-star-solid",class:"w-4 h-4 text-yellow-400"}),e("span",null,l(Number(t.rating||0).toFixed(1)),1),e("span",he,"("+l(t.totalReviews)+")",1)])]),e("td",_e,l(x(v)(t.viewCount)),1),e("td",xe,[a(d,{color:f(t.status),variant:"soft"},{default:g(()=>[P(l(c(t.status)),1)]),_:2},1032,["color"])])]))),128))])])]),s.products.length===0?(o(),i("div",ve," Tidak ada produk ditemukan ")):y("v-if",!0)]),_:1})}}}),ke={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},we={class:"flex items-center gap-2"},Pe={class:"space-y-3"},$e={class:"w-6 h-6 flex items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 text-sm font-bold"},Ce={class:"w-10 h-10 rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 shrink-0"},Be=["src","alt"],Se={key:1,class:"w-full h-full flex items-center justify-center"},Ue={class:"flex-1 min-w-0"},Ve={class:"font-medium truncate"},je={class:"flex items-center gap-1 text-gray-500"},Re={key:0,class:"text-center text-gray-500 py-4"},Te={class:"flex items-center gap-2"},Fe={class:"space-y-3"},Ne={class:"w-6 h-6 flex items-center justify-center rounded-full bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-400 text-sm font-bold"},Ae={class:"w-10 h-10 rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 shrink-0"},Ie=["src","alt"],ze={key:1,class:"w-full h-full flex items-center justify-center"},Ee={class:"flex-1 min-w-0"},Me={class:"font-medium truncate"},He={class:"flex items-center gap-1"},Le={class:"font-medium"},De={class:"text-gray-500 text-sm"},Oe={key:0,class:"text-center text-gray-500 py-4"},Ke=S({__name:"TopProductsCards",props:{byViews:{},byRating:{}},setup(s){return(f,c)=>{const u=B,n=j;return o(),i("div",ke,[y(" Top by Views "),a(n,null,{header:g(()=>[e("div",we,[a(u,{name:"i-heroicons-eye",class:"w-5 h-5 text-blue-500"}),c[0]||(c[0]=e("h3",{class:"font-semibold"},"Paling Banyak Dilihat",-1))])]),default:g(()=>[e("div",Pe,[(o(!0),i(C,null,V(s.byViews,(r,p)=>(o(),i("div",{key:r.id,class:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("span",$e,l(p+1),1),e("div",Ce,[r.image?(o(),i("img",{key:0,src:r.image,alt:r.name,class:"w-full h-full object-cover"},null,8,Be)):(o(),i("div",Se,[a(u,{name:"i-heroicons-photo",class:"w-4 h-4 text-gray-400"})]))]),e("div",Ue,[e("p",Ve,l(r.name),1)]),e("div",je,[a(u,{name:"i-heroicons-eye",class:"w-4 h-4"}),e("span",null,l(x(v)(r.viewCount||0)),1)])]))),128)),s.byViews.length===0?(o(),i("div",Re," Belum ada data ")):y("v-if",!0)])]),_:1}),y(" Top by Rating "),a(n,null,{header:g(()=>[e("div",Te,[a(u,{name:"i-heroicons-star",class:"w-5 h-5 text-yellow-500"}),c[1]||(c[1]=e("h3",{class:"font-semibold"},"Rating Tertinggi",-1))])]),default:g(()=>[e("div",Fe,[(o(!0),i(C,null,V(s.byRating,(r,p)=>(o(),i("div",{key:r.id,class:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("span",Ne,l(p+1),1),e("div",Ae,[r.image?(o(),i("img",{key:0,src:r.image,alt:r.name,class:"w-full h-full object-cover"},null,8,Ie)):(o(),i("div",ze,[a(u,{name:"i-heroicons-photo",class:"w-4 h-4 text-gray-400"})]))]),e("div",Ee,[e("p",Me,l(r.name),1)]),e("div",He,[a(u,{name:"i-heroicons-star-solid",class:"w-4 h-4 text-yellow-400"}),e("span",Le,l(Number(r.rating||0).toFixed(1)),1),e("span",De,"("+l(r.totalReviews||0)+")",1)])]))),128)),s.byRating.length===0?(o(),i("div",Oe," Belum ada data ")):y("v-if",!0)])]),_:1})])}}}),Qe={class:"flex items-center justify-between px-4 py-3 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700"},qe={class:"text-sm text-gray-500"},Ge={key:0,class:"flex items-center gap-1"},Je={key:1,class:"px-2 text-gray-500"},We={key:2,class:"px-2 text-gray-500"},Xe=S({__name:"AnalyticsPagination",props:{pagination:{}},emits:["changePage"],setup(s,{emit:f}){const c=s,u=f,n=w(()=>{const m=[],t=Math.max(1,c.pagination.currentPage-2),b=Math.min(c.pagination.lastPage,c.pagination.currentPage+2);for(let h=t;h<=b;h++)m.push(h);return m}),r=w(()=>n.value[0]>1),p=w(()=>n.value[n.value.length-1]<c.pagination.lastPage),d=m=>{m>=1&&m<=c.pagination.lastPage&&u("changePage",m)};return(m,t)=>{const b=B,h=F;return o(),i("div",Qe,[e("div",qe," Menampilkan "+l((s.pagination.currentPage-1)*s.pagination.perPage+1)+" - "+l(Math.min(s.pagination.currentPage*s.pagination.perPage,s.pagination.total))+" dari "+l(s.pagination.total)+" data ",1),s.pagination.lastPage>1?(o(),i("div",Ge,[a(h,{variant:"ghost",size:"sm",disabled:s.pagination.currentPage===1,onClick:t[0]||(t[0]=_=>d(s.pagination.currentPage-1))},{default:g(()=>[a(b,{name:"i-heroicons-chevron-left"})]),_:1},8,["disabled"]),r.value?(o(),$(h,{key:0,variant:"ghost",size:"sm",onClick:t[1]||(t[1]=_=>d(1))},{default:g(()=>[...t[4]||(t[4]=[P(" 1 ",-1)])]),_:1})):y("v-if",!0),r.value?(o(),i("span",Je,"...")):y("v-if",!0),(o(!0),i(C,null,V(n.value,_=>(o(),$(h,{key:_,variant:_===s.pagination.currentPage?"solid":"ghost",color:_===s.pagination.currentPage?"primary":"gray",size:"sm",onClick:k=>d(_)},{default:g(()=>[P(l(_),1)]),_:2},1032,["variant","color","onClick"]))),128)),p.value?(o(),i("span",We,"...")):y("v-if",!0),p.value?(o(),$(h,{key:3,variant:"ghost",size:"sm",onClick:t[2]||(t[2]=_=>d(s.pagination.lastPage))},{default:g(()=>[P(l(s.pagination.lastPage),1)]),_:1})):y("v-if",!0),a(h,{variant:"ghost",size:"sm",disabled:s.pagination.currentPage===s.pagination.lastPage,onClick:t[3]||(t[3]=_=>d(s.pagination.currentPage+1))},{default:g(()=>[a(b,{name:"i-heroicons-chevron-right"})]),_:1},8,["disabled"])])):y("v-if",!0)])}}}),Ye={class:"space-y-6"},Ze={class:"flex items-center justify-between"},yt=S({layout:Q,__name:"index",props:{summary:{},products:{},pagination:{},topByViews:{},topByRating:{},filters:{}},setup(s){const f=s,c=R(f.filters.period||"30days"),u=R(f.filters.sortBy||"totalSold"),n=R(f.filters.search||""),r=()=>{N.get("/admin/analytics/products",{period:c.value,sortBy:u.value,search:n.value||void 0},{preserveState:!0,preserveScroll:!0})},p=m=>{N.get("/admin/analytics/products",{period:c.value,sortBy:u.value,search:n.value||void 0,page:m},{preserveState:!0,preserveScroll:!0})},d=()=>{const m=new URLSearchParams({period:c.value,sortBy:u.value,export:"csv"});n.value&&m.append("search",n.value),window.open(`/admin/analytics/products?${m.toString()}`,"_blank")};return(m,t)=>{const b=B,h=F,_=j;return o(),i(C,null,[a(x(E),{title:"Performa Produk"}),e("div",Ye,[y(" Header "),e("div",Ze,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-2xl font-bold"},"Performa Produk"),e("p",{class:"text-gray-500"},"Analisis performa dan penjualan produk")],-1)),a(h,{color:"gray",onClick:d},{default:g(()=>[a(b,{name:"i-heroicons-arrow-down-tray",class:"mr-2"}),t[3]||(t[3]=P(" Export CSV ",-1))]),_:1})]),y(" Stats Cards "),a(X,{summary:s.summary},null,8,["summary"]),y(" Top Products "),a(Ke,{"by-views":s.topByViews,"by-rating":s.topByRating},null,8,["by-views","by-rating"]),y(" Filters "),a(_,null,{default:g(()=>[a(Z,{period:c.value,"onUpdate:period":t[0]||(t[0]=k=>c.value=k),"sort-by":u.value,"onUpdate:sortBy":t[1]||(t[1]=k=>u.value=k),search:n.value,"onUpdate:search":t[2]||(t[2]=k=>n.value=k),onApply:r},null,8,["period","sort-by","search"])]),_:1}),y(" Products Table "),a(be,{products:s.products},null,8,["products"]),y(" Pagination "),s.pagination.lastPage>1?(o(),$(Xe,{key:0,pagination:s.pagination,onChangePage:p},null,8,["pagination"])):y("v-if",!0)])],64)}}});export{yt as default};
