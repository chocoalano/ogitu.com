import{_ as w}from"./Card-BjL1m_sW.js";import{_ as S,a as A}from"./Button-CI_-soaG.js";import{d as $,c as P,a as p,F as C,r as B,e as b,w as m,b as e,j as y,t as g,o as n,n as T,u as _,f as r,k as v,m as O,h as j,i as V,l as I}from"./app-CyjtdGoI.js";import{a as U,f as k,b as D,o as F,c as L,d as E}from"./analytics-Dycz2OpM.js";import{C as G,A as z,b as H,c as Q,D as W,_ as q,e as J}from"./PeriodSelector.vue_vue_type_script_setup_true_lang-K8mRvDWh.js";import{_ as N}from"./Badge-DfumusWV.js";import{A as K}from"./admin-BzR6vrex.js";import"./ColorModeButton-Bf7Nr8w3.js";import"./FormField-qFQ_28ZO.js";import"./Label-yeknIWsP.js";import"./SelectMenu-DKAhKU-v.js";import"./useFormControl-D_pV87FU.js";import"./VisuallyHiddenInput-BGOu5NlX.js";import"./index-v4g8wp86.js";import"./Tooltip-BrTR-Vq7.js";const M={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},X={class:"flex items-start justify-between"},Y={class:"text-sm text-gray-500 dark:text-gray-400"},Z={class:"mt-1 text-2xl font-bold"},tt=$({__name:"SalesStatsCards",props:{summary:{}},setup(l){const i=l,d=P(()=>[{title:"Total Pesanan",value:U(i.summary.totalOrders),growth:i.summary.ordersGrowth,icon:"i-heroicons-shopping-cart",color:"primary"},{title:"Total Pendapatan",value:k(i.summary.totalRevenue),growth:i.summary.revenueGrowth,icon:"i-heroicons-banknotes",color:"success"},{title:"Rata-rata Pesanan",value:k(i.summary.averageOrderValue),icon:"i-heroicons-calculator",color:"info"},{title:"Total Item Terjual",value:U(i.summary.totalItems),icon:"i-heroicons-cube",color:"warning"}]),s=c=>c>0?"text-green-500":c<0?"text-red-500":"text-gray-500";return(c,u)=>{const o=S,a=w;return n(),p("div",M,[(n(!0),p(C,null,B(d.value,t=>(n(),b(a,{key:t.title},{default:m(()=>[e("div",X,[e("div",null,[e("p",Y,g(t.title),1),e("p",Z,g(t.value),1),t.growth!==void 0?(n(),p("p",{key:0,class:T(["mt-1 text-sm",s(t.growth)])},g(_(D)(t.growth))+" dari periode sebelumnya ",3)):y("v-if",!0)]),e("div",{class:T(["p-3 rounded-lg",{"bg-primary-100 dark:bg-primary-900":t.color==="primary","bg-green-100 dark:bg-green-900":t.color==="success","bg-blue-100 dark:bg-blue-900":t.color==="info","bg-yellow-100 dark:bg-yellow-900":t.color==="warning"}])},[r(o,{name:t.icon,class:T(["w-6 h-6",{"text-primary-500":t.color==="primary","text-green-500":t.color==="success","text-blue-500":t.color==="info","text-yellow-500":t.color==="warning"}])},null,8,["name","class"])],2)])]),_:2},1024))),128))])}}}),et={class:"flex items-center justify-between"},at={class:"h-64"},st={key:1,class:"flex items-center justify-center h-full text-gray-500"},ot=$({__name:"SalesByStatusChart",props:{data:{}},setup(l){G.register(z,H,Q);const i=l,d={pending_payment:"rgb(251, 191, 36)",paid:"rgb(16, 185, 129)",processing:"rgb(59, 130, 246)",shipped:"rgb(139, 92, 246)",delivered:"rgb(34, 197, 94)",cancelled:"rgb(239, 68, 68)"},s=P(()=>{const o=[],a=[],t=[];return Object.entries(i.data).forEach(([f,h])=>{h>0&&(o.push(F[f]||f),a.push(h),t.push(d[f]||"rgb(156, 163, 175)"))}),{labels:o,datasets:[{data:a,backgroundColor:t,borderWidth:0}]}}),c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(o){const a=o.dataset.data.reduce((f,h)=>f+h,0),t=(o.parsed/a*100).toFixed(1);return`${o.label}: ${o.parsed} (${t}%)`}}}}},u=P(()=>Object.values(i.data).reduce((o,a)=>o+a,0));return(o,a)=>{const t=N,f=w;return n(),b(f,null,{header:m(()=>[e("div",et,[a[0]||(a[0]=e("h3",{class:"text-lg font-semibold"},"Pesanan Berdasarkan Status",-1)),r(t,{color:"gray",variant:"soft"},{default:m(()=>[v(" Total: "+g(u.value),1)]),_:1})])]),default:m(()=>[e("div",at,[u.value>0?(n(),b(_(W),{key:0,data:s.value,options:c},null,8,["data"])):(n(),p("div",st," Tidak ada data pesanan "))])]),_:1})}}}),rt={class:"space-y-4"},nt={class:"flex items-center justify-center w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-400 font-bold"},lt={class:"w-12 h-12 rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 shrink-0"},it=["src","alt"],dt={key:1,class:"w-full h-full flex items-center justify-center"},ct={class:"flex-1 min-w-0"},ut={class:"font-medium truncate"},mt={class:"text-sm text-gray-500"},pt={class:"text-right"},gt={class:"font-semibold text-green-600"},_t={key:0,class:"text-center text-gray-500 py-8"},ft=$({__name:"TopSellingProducts",props:{products:{}},setup(l){return(i,d)=>{const s=S,c=w;return n(),b(c,null,{header:m(()=>[...d[0]||(d[0]=[e("h3",{class:"text-lg font-semibold"},"Produk Terlaris",-1)])]),default:m(()=>[e("div",rt,[(n(!0),p(C,null,B(l.products,(u,o)=>(n(),p("div",{key:u.id,class:"flex items-center gap-4 p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},[e("div",nt,g(o+1),1),e("div",lt,[u.image?(n(),p("img",{key:0,src:u.image,alt:u.name,class:"w-full h-full object-cover"},null,8,it)):(n(),p("div",dt,[r(s,{name:"i-heroicons-photo",class:"w-6 h-6 text-gray-400"})]))]),e("div",ct,[e("p",ut,g(u.name),1),e("p",mt,g(_(U)(u.totalQuantity))+" terjual ",1)]),e("div",pt,[e("p",gt,g(_(k)(u.totalRevenue)),1)])]))),128)),l.products.length===0?(n(),p("div",_t," Belum ada data penjualan ")):y("v-if",!0)])]),_:1})}}}),yt={class:"flex items-center justify-between"},ht={class:"overflow-x-auto"},xt={class:"w-full text-sm"},vt={class:"py-3 px-4"},bt={class:"py-3 px-4"},wt={class:"py-3 px-4 font-medium"},$t={class:"py-3 px-4"},kt={class:"py-3 px-4 text-gray-500"},St={key:0,class:"text-center text-gray-500 py-8"},Ct=$({__name:"RecentOrdersTable",props:{orders:{}},setup(l){const i=d=>E[d]||"gray";return(d,s)=>{const c=S,u=A,o=N,a=w;return n(),b(a,null,{header:m(()=>[e("div",yt,[s[1]||(s[1]=e("h3",{class:"text-lg font-semibold"},"Pesanan Terbaru",-1)),r(_(O),{href:"/admin/orders"},{default:m(()=>[r(u,{variant:"ghost",size:"sm"},{default:m(()=>[s[0]||(s[0]=v(" Lihat Semua ",-1)),r(c,{name:"i-heroicons-arrow-right",class:"ml-1"})]),_:1})]),_:1})])]),default:m(()=>[e("div",ht,[e("table",xt,[s[2]||(s[2]=e("thead",null,[e("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"No. Pesanan"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Pelanggan"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Total"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Status"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-500"},"Tanggal")])],-1)),e("tbody",null,[(n(!0),p(C,null,B(l.orders,t=>(n(),p("tr",{key:t.id,class:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50"},[e("td",vt,[r(_(O),{href:`/admin/orders/${t.id}`,class:"text-primary-500 hover:text-primary-600 font-medium"},{default:m(()=>[v(g(t.orderNumber),1)]),_:2},1032,["href"])]),e("td",bt,g(t.customerName),1),e("td",wt,g(_(k)(t.total)),1),e("td",$t,[r(o,{color:i(t.status),variant:"soft"},{default:m(()=>[v(g(_(F)[t.status]||t.status),1)]),_:2},1032,["color"])]),e("td",kt,g(_(L)(t.createdAt)),1)]))),128))])])]),l.orders.length===0?(n(),p("div",St," Belum ada pesanan ")):y("v-if",!0)]),_:1})}}}),Tt={class:"space-y-6"},jt={class:"flex items-center justify-between"},Pt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ut={class:"lg:col-span-2"},Bt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},qt=$({layout:K,__name:"index",props:{summary:{},dailySales:{},salesByStatus:{},topProducts:{},recentOrders:{},filters:{}},setup(l){const i=l,d=j(i.filters.period||"30days"),s=j(i.filters.dateFrom||""),c=j(i.filters.dateTo||""),u=()=>{const a={period:d.value};d.value==="custom"&&(s.value&&(a.dateFrom=s.value),c.value&&(a.dateTo=c.value)),I.get("/admin/analytics/sales",a,{preserveState:!0,preserveScroll:!0})},o=()=>{const a=new URLSearchParams({period:d.value,export:"csv"});d.value==="custom"&&(s.value&&a.append("dateFrom",s.value),c.value&&a.append("dateTo",c.value)),window.open(`/admin/analytics/sales?${a.toString()}`,"_blank")};return(a,t)=>{const f=S,h=A,R=w;return n(),p(C,null,[r(_(V),{title:"Analisis Penjualan"}),e("div",Tt,[y(" Header "),e("div",jt,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-2xl font-bold"},"Analisis Penjualan"),e("p",{class:"text-gray-500"},"Statistik dan laporan penjualan")],-1)),r(h,{color:"gray",onClick:o},{default:m(()=>[r(f,{name:"i-heroicons-arrow-down-tray",class:"mr-2"}),t[3]||(t[3]=v(" Export CSV ",-1))]),_:1})]),y(" Period Selector "),r(R,null,{default:m(()=>[r(q,{period:d.value,"onUpdate:period":t[0]||(t[0]=x=>d.value=x),"date-from":s.value,"onUpdate:dateFrom":t[1]||(t[1]=x=>s.value=x),"date-to":c.value,"onUpdate:dateTo":t[2]||(t[2]=x=>c.value=x),onApply:u},null,8,["period","date-from","date-to"])]),_:1}),y(" Stats Cards "),r(tt,{summary:l.summary},null,8,["summary"]),y(" Charts Row "),e("div",Pt,[e("div",Ut,[r(J,{data:l.dailySales},null,8,["data"])]),r(ot,{data:l.salesByStatus},null,8,["data"])]),y(" Products and Orders "),e("div",Bt,[r(ft,{products:l.topProducts},null,8,["products"]),r(Ct,{orders:l.recentOrders},null,8,["orders"])])])],64)}}});export{qt as default};
